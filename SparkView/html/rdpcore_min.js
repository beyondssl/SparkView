var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(v,C,H){v!=Array.prototype&&v!=Object.prototype&&(v[C]=H.value)};$jscomp.getGlobal=function(v){return"undefined"!=typeof window&&window===v?v:"undefined"!=typeof global&&null!=global?global:v};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(v,C,H,O){if(C){H=$jscomp.global;v=v.split(".");for(O=0;O<v.length-1;O++){var N=v[O];N in H||(H[N]={});H=H[N]}v=v[v.length-1];O=H[v];C=C(O);C!=O&&null!=C&&$jscomp.defineProperty(H,v,{configurable:!0,writable:!0,value:C})}};$jscomp.polyfill("Array.prototype.fill",function(v){return v?v:function(v,H,O){var C=this.length||0;0>H&&(H=Math.max(0,C+H));if(null==O||O>C)O=C;O=Number(O);0>O&&(O=Math.max(0,C+O));for(H=Number(H||0);H<O;H++)this[H]=v;return this}},"es6-impl","es3");
var rdpcodecs=rdpcodecs||new function(){function v(){var y=new Uint32Array(10240),v=0,h=new Uint8Array(10240),W=0,x=new Uint8Array(10240),t=0,a=new Uint8Array(10240),m=0,q=new Uint8Array(0),e=0;this.getData=function(){return y};this.getDataSize=function(){return v};this.resetData=function(a){y.length<a&&(y=new Uint32Array(a));v=a;return y};this.resetLumaPlane=function(a){h.length<a&&(h=new Uint8Array(a));W=a;return h};this.getLumaPlanceSize=function(){return W};this.resetOrangeChromaPlane=function(a){x.length<
a&&(x=new Uint8Array(a));t=a;return x};this.getOrangeChromaPlane=function(){return t};this.resetGreenChromaPlane=function(n){a.length<n&&(a=new Uint8Array(n));m=n;return a};this.getGreenChromaPlane=function(){return m};this.resetAlphaPlane=function(a){q.length<a&&(q=new Uint8Array(a));e=a;return q};this.getAlphaPlane=function(){return e}}function C(y,v,h){var W=y,x=h,t=0,a=8,m=v;this.attach=function(q,e,n){W=q;x=n;t=0;a=8;m=e};this.getBits=function(q){for(var e,n=0;t<x&&0<q;)e=q,e>a&&(e=a),0!=n&&
(n<<=e),n|=W[t+m]>>a-e&(1<<e)-1,a-=e,q-=e,0==a&&(a=8,t++);return n};this.putBits=function(q,e){for(var n=e,f;t<x&&0<n;)f=n,f>a&&(f=a),W[t+m]|=(q>>n-f&(1<<f)-1)<<a-f,a-=f,n-=f,0==a&&(a=8,t++)};this.eos=function(){return t>=x};this.left=function(){return t>=x?0:8*(x-t-1)+a};this.getProcessBytes=function(){return 8>a?t+1:t}}function H(){this.y=this.x=this.CrLen=this.CbLen=this.YLen=this.quantIdxCr=this.quantIdxCb=this.quantIdxY=0;this.data=new Uint32Array(4096)}function O(){function y(W,x,t,a,m,q,e){t=
W.et;var n=4096,f=W.bitStream;var d=1;var r=d<<3,z=1,l=z<<3,p=0;for(null==f?f=new C(a,m,q):f.attach(a,m,q);!f.eos()&&0<n;)if(0!=d){for(;!f.eos();){m=f.getBits(1);if(0!=m)break;d=a=1<<d;d>n&&(d=n);0<d&&(ja(e,p,p+d,0),p+=d);n-=a;r+=4;80<r&&(r=80);0>r&&(r=0);d=r>>3}d=a=d=f.getBits(d);d>n&&(d=n);0<d&&(ja(e,p,p+d,0),p+=d);n-=a;d=f.getBits(1);a=0;do if(m=f.getBits(1),1==m)a++;else break;while(1);m=f.getBits(z);m|=a<<z;0==a?(l+=-2,80<l&&(l=80),0>l&&(l=0),z=l>>3):1!=a&&(l+=a,80<l&&(l=80),0>l&&(l=0),z=l>>
3);a=m+1;0<n&&(e[p++]=0!=d?-a:a);n--;r+=-6;80<r&&(r=80);0>r&&(r=0);d=r>>3}else{a=0;do if(m=f.getBits(1),1==m)a++;else break;while(1);m=f.getBits(z);m|=a<<z;0==a?(l+=-2,80<l&&(l=80),0>l&&(l=0),z=l>>3):1!=a&&(l+=a,80<l&&(l=80),0>l&&(l=0),z=l>>3);a=m;if(1!=t){q=a;for(m=0;0!=q;)q>>=1,m++;m=f.getBits(m);a-=m;0!=m&&0!=a?(r+=-6,80<r&&(r=80),0>r&&(r=0),d=r>>3):0==m&&0==a&&(r+=6,80<r&&(r=80),0>r&&(r=0),d=r>>3);0<n&&(e[p++]=0!=(m&1)?-1*(m+1>>1):m>>1);n--;0<n&&(e[p++]=0!=(a&1)?-1*(a+1>>1):a>>1);n--}else 0==
a?(0<n&&(e[p++]=0),n--,r+=3):(0<n&&(e[p++]=0!=(a&1)?-1*(a+1>>1):a>>1),n--,r+=-3),80<r&&(r=80),0>r&&(r=0),d=r>>3}t=64;n=4032;for(f=4033;1<t;n++,f++,t--)e[f]+=e[n];h(e,0,4096,5);h(e,0,1024,x[8]-6);h(e,1024,1024,x[7]-6);h(e,2048,1024,x[9]-6);h(e,3072,256,x[5]-6);h(e,3328,256,x[4]-6);h(e,3584,256,x[6]-6);h(e,3840,64,x[2]-6);h(e,3904,64,x[1]-6);h(e,3968,64,x[3]-6);h(e,4032,64,x[0]-6);W=W.dwtBuffer;v(e,3840,W,8);v(e,3072,W,16);v(e,0,W,32)}function v(h,x,t,a){var m,q;var e=a<<1;var n=x+a*a*3;var f=x;var d=
0;var r=x+a*a;var z=x+a*a*2;var l=a*a*2;for(m=0;m<a;m++){t[d]=h[n]-(h[f]+h[f]+1>>1)<<16>>16;t[l]=h[r]-(h[z]+h[z]+1>>1)<<16>>16;for(q=1;q<a;q++){var p=q<<1;t[d+p]=h[n+q]-(h[f+q-1]+h[f+q]+1>>1)<<16>>16;t[l+p]=h[r+q]-(h[z+q-1]+h[z+q]+1>>1)<<16>>16}for(q=0;q<a-1;q++)p=q<<1,t[d+p+1]=(h[f+q]<<1)+(t[d+p]+t[d+p+2]>>1)<<16>>16,t[l+p+1]=(h[z+q]<<1)+(t[l+p]+t[l+p+2]>>1)<<16>>16;p=q<<1;t[d+p+1]=(h[f+q]<<1)+t[d+p]<<16>>16;t[l+p+1]=(h[z+q]<<1)+t[l+p]<<16>>16;n+=a;f+=a;d+=e;r+=a;z+=a;l+=e}for(p=0;p<e;p++){for(q=
0;q<a;q++)m=q<<1,d=x+m*e+p,l=q*e+p,f=l+a*e,h[d]=t[l]-((0<q?t[f-e]:t[f])+t[f]+1>>1)<<16>>16;for(q=0;q<a;q++)m=q<<1,d=x+m*e+p,l=q*e+p,f=l+a*e,h[d+e]=(t[f]<<1)+(h[d]+h[d+(q<a-1?2*e:0)]>>1)<<16>>16}}function h(h,x,t,a){if(0!=a)for(;0<t;x++,t--)h[x]<<=a}this.decodeRgb=function(h,x,t,a,m,q,e,n,f,d){y(h,t,m,x.getData(),x.getPosition(),a,h.yrBuffer);x.skipPosition(a);y(h,t,e,x.getData(),x.getPosition(),q,h.cbgBuffer);x.skipPosition(q);y(h,t,f,x.getData(),x.getPosition(),n,h.crbBuffer);x.skipPosition(n);x=
h.yrBuffer;t=h.cbgBuffer;a=h.crbBuffer;for(q=0;4096>q;q++)e=x[q],n=t[q],f=a[q],e=e+4096<<16,m=e+91947*f,f=e-22544*n-46792*f,e+=115998*n,m>>=21,f>>=21,e>>=21,x[q]=0>m?0:255<m?255:m,t[q]=0>f?0:255<f?255:f,a[q]=0>e?0:255<e?255:e;x=h.yrBuffer;t=h.cbgBuffer;h=h.crbBuffer;for(a=0;4096>a;a++)d[a]=4278190080|h[a]<<16|t[a]<<8|x[a]}}function N(y){var v=[new hi5.graphic.Rectangle],h=[new H],W=0,x=0;this.resetRects=function(h){if(v.length<h){var a=v.length;for(v.length=h;a<h;a++)v[a]=new hi5.graphic.Rectangle}W=
h;return v};this.resetTiles=function(t){var a=0;if(y){if(h.length<t)for(a=h.length,h.length=t;a<t;a++)h[a]=new H}else for(;a<t;a++)h[a]=new H;x=t;return h};this.getRectSize=function(){return W};this.getTileSize=function(){return x};this.getRects=function(){return v};this.getTiles=function(){return h}}function P(){this.ctxId=0;this.tileSize=64;this.qt=this.et=this.xft=this.cct=this.flags=0;this.yrBuffer=new Int32Array(4096);this.cbgBuffer=new Int32Array(4096);this.crbBuffer=new Int32Array(4096);this.dwtBuffer=
new Int32Array(4096);var v=this;this.setProperties=function(y){v.flags=y&7;v.cct=y>>3&3;v.xft=y>>5&15;v.et=y>>9&15};this.bitStream=new C}var y=hi5.Arrays.arraycopy,ja=hi5.Arrays.fill;this.flipimage=function(v,C,h,W,x,t){t*=W;for(var a=0;a<x;a++)W=C+(x-a-1)*t,y(v,W,h,a*t,t)};this.Bitmap=function(v,y,h,W,x,t,a,m){this.data=v;this.left=W;this.top=x;this.width=y;this.height=h;this.bitsperpixel=t;this.bytesperpixel=Math.floor((t+7)/8);this.raw=a;this.codec=m||0};this.NSCodec=function(){function C(h,v,
x,t,a){if(0==x)ja(t,0,a,255);else if(x<a){var m=a;for(a=0;4<m;){var q=h[v++];5==m?(t[a++]=q,m--):q==h[v]?(v++,255>(h[v]&255)?(x=h[v++]&255,x+=2):(v++,x=(h[v+3]&255)<<24|(h[v+2]&255)<<16|(h[v+1]&255)<<8|h[v]&255,v+=4),ja(t,a,a+x,q),a+=x,m-=x):(t[a++]=q,m--)}for(x=0;4>x;x++)t[a++]=h[v++]}else y(h,v,t,0,a)}var H=new v;this.getData=function(){return H.getData()};this.getDataSize=function(){return H.getDataSize()};this.process=function(h,v,x,t){v=h.getLittleEndian32();var a=h.getLittleEndian32(),m=h.getLittleEndian32();
h.skipPosition(4);var q=h.getByte(),e=h.getByte();h.skipPosition(2);var n=h.getData(),f=h.getPosition(),d=H.resetData(x*t),r=x+(~(x&7)+1&7),z=t+(~(t&1)+1&1);var l=r*z;var p=H.resetLumaPlane(l),B=H.resetOrangeChromaPlane(l);l=H.resetGreenChromaPlane(l);var k=x*t,z=0<e?(r>>1)*(z>>1):k,w=0<e?z:k;C(n,f,v,p,0<e?r*t:k);f+=v;C(n,f,a,B,z);C(n,f+a,m,l,w);for(var y,A,u,D,G,n=0,f=x+(~(x&7)+1&7),ia=q-1,r=0;r<t;r++)for(0<e?(k=r*f,z=(r>>1)*(f>>1),w=(r>>1)*(f>>1)):(k=r*x,z=r*x,w=r*x),q=0;q<x;q++)y=p[k]&255,A=(B[z]&
255)<<ia<<24>>24,u=l[w]<<ia<<24>>24,D=y+A-u,G=y+u,y=y-A-u,y=0>y?0:255<y?255:y,G=0>G?0:255<G?255:G,D=0>D?0:255<D?255:D,d[n++]=4278190080|y<<16|G<<8|D,k++,z+=0<e?q%2:1,w+=0<e?q%2:1;h.skipPosition(v+a+m)}};this.RemoteFX=function(v){var y=new N(!v);v=new O;var h=new P;this.decode=function(x,t){for(var a,m,q=x.getPosition()+t;x.getPosition()<q;){a=x.getLittleEndian16();m=x.getLittleEndian32();if(0==m)break;m=x.getPosition()-6+m;switch(a){case 52416:a=x;a.getLittleEndian32();a.getLittleEndian16();break;
case 52417:x.skipPosition(4);break;case 52418:a=x;for(var e=a.getByte(),n=0;n<e;n++){var f=a.getByte(),d=a.getLittleEndian16(),r=a.getLittleEndian16();svGlobal.logger.info("Channel, id:"+f+" width:"+d+" height:"+r)}break;case 52419:a=x;a.skipPosition(2);h.ctxId=a.getByte();h.tileSize=a.getLittleEndian16();h.setProperties(a.getLittleEndian16());break;case 52420:x.skipPosition(10);break;case 52421:x.skipPosition(2);break;case 52422:a=x;a.skipPosition(2);a.skipPosition(1);e=a.getLittleEndian16();n=y.resetRects(e);
for(f=0;f<e;f++)d=n[f],d.x=a.getLittleEndian16(),d.y=a.getLittleEndian16(),d.width=a.getLittleEndian16(),d.height=a.getLittleEndian16();a.skipPosition(4);break;case 52423:a=x;e=h;a.skipPosition(6);n=a.getLittleEndian16();e.cct=n>>>4&3;e.xft=n>>>6&15;e.et=n>>>10&15;e.qt=n>>>14&3;var z=a.getByte();a.skipPosition(1);f=a.getLittleEndian16();a.skipPosition(4);for(var d=Array(10*z),l=0,n=0;n<z;n++)r=a.getByte(),d[l++]=r&15,d[l++]=r>>>4,r=a.getByte(),d[l++]=r&15,d[l++]=r>>>4,r=a.getByte(),d[l++]=r&15,d[l++]=
r>>>4,r=a.getByte(),d[l++]=r&15,d[l++]=r>>>4,r=a.getByte(),d[l++]=r&15,d[l++]=r>>>4;r=y.resetTiles(f);for(n=0;n<f;n++){var z=r[n],l=a,p=z;l.skipPosition(6);p.quantIdxY=l.getByte();p.quantIdxCb=l.getByte();p.quantIdxCr=l.getByte();p.x=64*l.getLittleEndian16();p.y=64*l.getLittleEndian16();p.YLen=l.getLittleEndian16();p.CbLen=l.getLittleEndian16();p.CrLen=l.getLittleEndian16();C(e,a,d,z.YLen,10*z.quantIdxY,z.CbLen,10*z.quantIdxCb,z.CrLen,10*z.quantIdxCr,z.data)}break;default:svGlobal.logger.warn("unknown blockType 0x%X"+
a)}x.setPosition(m)}return y};var C=v.decodeRgb;this.getResult=function(){return y}};this.RDP8BulkData=function(){function v(d){for(;e<d;)q<<=8,x<t&&(q+=C[x++]),e+=8;m-=d;e-=d;a=q>>e;q&=(1<<e)-1}function y(a,f,k){if(!(0>=k)){if(25E5<k){var p=k-25E5;k=25E5;f+=p;r=(r+p)%25E5}25E5>=r+k?(l(a,f,d,r,k),25E5==(r+=k)&&(r=0)):(p=25E5-r,l(a,f,d,r,p),l(a,f+p,d,0,k-p),r=k-p)}}var h=[[1,0,8,0,0],[5,17,5,1,0],[5,18,7,1,32],[5,19,9,1,160],[5,20,10,1,672],[5,21,12,1,1696],[5,24,0,0,0],[5,25,0,0,1],[6,44,14,1,5792],
[6,45,15,1,22176],[6,52,0,0,2],[6,53,0,0,3],[6,54,0,0,255],[7,92,18,1,54944],[7,93,20,1,317088],[7,110,0,0,4],[7,111,0,0,5],[7,112,0,0,6],[7,113,0,0,7],[7,114,0,0,8],[7,115,0,0,9],[7,116,0,0,10],[7,117,0,0,11],[7,118,0,0,58],[7,119,0,0,59],[7,120,0,0,60],[7,121,0,0,61],[7,122,0,0,62],[7,123,0,0,63],[7,124,0,0,64],[7,125,0,0,128],[8,188,20,1,1365664],[8,189,21,1,2414240],[8,252,0,0,12],[8,253,0,0,56],[8,254,0,0,57],[8,255,0,0,102],[9,380,22,1,4511392],[9,381,23,1,8705696],[9,382,24,1,17094304],[0]],
C=[],x=0,t=0,a=0,m=0,q=0,e=0,n=new Uint8Array(65536),f=0,d=new Uint8Array(25E5),r=0,z=new hi5.DataBuffer(n,0,65536);this.resetHistory=function(){r=a=0};this.release=function(){z=d=n=C=n=null};var l=hi5.Arrays.arraycopy;this.decompress=function(p,B,k){if(1>k)return null;var w=p[B++];k--;f=0;if(w&32)for(C=p,x=B,t=B+k-1,m=8*(k-1)-(C[t]&7),q=e=0;m;)for(p=k=B=0;0!=h[p][0];p++){for(;B<h[p][0];)v(1),k=(k<<1)+a,B++;if(k==h[p][1]){if(0==h[p][3])v(h[p][2]),p=h[p][4]+a,d[r]=p,25E5==++r&&(r=0),n[f++]=p;else{v(h[p][2]);
var R=h[p][4]+a;if(0!=R){v(1);if(0==a)p=3;else{p=4;B=2;for(v(1);1==a;)p*=2,B++,v(1);v(B);p+=a}B=n;k=f;var A=k;if(!(0>=p)){w=p;var u=(r+25E5-R)%25E5;R=Math.min(w,R);if(25E5>=u+R)l(d,u,B,A,R);else{var D=25E5-u;l(d,u,B,A,D);l(d,0,B,A+D,R-D)}if(0!=(w-=R)){A+=R;u=R;do R=u,R>w&&(R=w),l(B,k,B,A,R),A+=R,u<<=1;while(0<(w-=R))}}y(n,f,p)}else v(15),p=a,m-=e,q=e=0,l(C,x,n,f,p),y(C,x,p),x+=p,m-=8*p;f+=p}break}}else y(p,B,k),l(p,B,n,0,k),f=k;z.setPosition(0);z.markEnd(f);return z}};this.bitmap=new function(){function v(h,
v,x,t,a,m){for(var q,e=0,n,f,d,r,z=0,l,p=v,B=m;e<t;){m=B+x*t*4-(e+1)*x*4;d=0;l=m;q=0;if(0==z)for(;q<x;){n=h[v++];f=n&15;n=n>>4&15;r=f<<4|n;47>=r&&16<=r&&(f=r,n=0);for(;0<n;)d=h[v++],a[m]=d,m+=4,q++,n--;for(;0<f;)a[m]=d,m+=4,q++,f--}else for(;q<x;){n=h[v++];f=n&15;n=n>>4&15;r=f<<4|n;47>=r&&16<=r&&(f=r,n=0);for(;0<n;)r=h[v++],0!=(r&1)?(r>>=1,r+=1,d=-r):d=r>>=1,r=a[z+4*q]+d,a[m]=r,m+=4,q++,n--;for(;0<f;)r=a[z+4*q]+d,a[m]=r,m+=4,q++,f--}e++;z=l}return v-p}function y(h,v,x,t,a,m){var q,e;for(e=0;e<t;e++)for(q=
0;q<x;q++)a[m+4*((t-e-1)*x+q)]=h[v+(e*x+q)]}this.decompressInt16=function(h,v,x,t,a){var m=-1,q=-1;x=a+x;for(var e,n,f,d=h,r=-1,z,l=0,p=0,B=0,k=4294967295,w,y=!1,A=!1,u=new Uint32Array(h*v);a<x;){z=0;n=t[a++];e=n>>4;switch(e){case 12:case 13:case 14:e-=6;n&=15;f=16;break;case 15:e=n&15;9>e?(n=t[a++],n|=t[a++]<<8):n=11>e?8:1;f=0;break;default:e>>=1,n&=31,f=32}0!=f&&(w=2==e||7==e,0==n?n=w?t[a++]+1:t[a++]+f:w&&(n<<=3));switch(e){case 0:r!=e||d==h&&-1==m||(y=!0);break;case 8:w=t[a++]|t[a++]<<8,l=4278190080|
w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16;case 3:w=t[a++]|t[a++]<<8;p=4278190080|w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16;break;case 6:case 7:w=t[a++]|t[a++]<<8;k=4278190080|w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16;e-=5;break;case 9:B=3;e=2;z=3;break;case 10:B=5,e=2,z=5}r=e;for(f=0;0<n;)switch(d>=h&&(d=0,v--,m=q,q=0+v*h),e){case 0:y&&(u[q+d]=-1==m?k:u[m+d]^k|4278190080,y=!1,n--,d++);if(-1==m){for(;0!=(n&-8)&&d+8<h;)for(var D=0;8>D;D++)u[q+d]=
4278190080,n--,d++;for(;0<n&&d<h;)u[q+d]=4278190080,n--,d++}else{for(;0!=(n&-8)&&d+8<h;)for(D=0;8>D;D++)u[q+d]=u[m+d],n--,d++;for(;0<n&&d<h;)u[q+d]=u[m+d],n--,d++}break;case 1:if(-1==m){for(;0!=(n&-8)&&d+8<h;)for(D=0;8>D;D++)u[q+d]=k,n--,d++;for(;0<n&&d<h;)u[q+d]=k,n--,d++}else{for(;0!=(n&-8)&&d+8<h;)for(D=0;8>D;D++)u[q+d]=u[m+d]^k|4278190080,n--,d++;for(;0<n&&d<h;)u[q+d]=u[m+d]^k|4278190080,n--,d++}break;case 2:if(-1==m){for(;0!=(n&-8)&&d+8<h;)for(D=0;8>D;D++)f<<=1,f&=255,0==f&&(B=0!=z?z&255:t[a++],
f=1),u[q+d]=0!=(B&f)?k:4278190080,n--,d++;for(;0<n&&d<h;)f<<=1,f&=255,0==f&&(B=0!=z?z&255:t[a++],f=1),u[q+d]=0!=(B&f)?k:4278190080,n--,d++}else{for(;0!=(n&-8)&&d+8<h;)for(D=0;8>D;D++)f<<=1,f&=255,0==f&&(B=0!=z?z&255:t[a++],f=1),u[q+d]=0!=(B&f)?u[m+d]^k|4278190080:u[m+d],n--,d++;for(;0<n&&d<h;)f<<=1,f&=255,0==f&&(B=0!=z?z&255:t[a++],f=1),u[q+d]=0!=(B&f)?u[m+d]^k|4278190080:u[m+d],n--,d++}break;case 3:for(;0!=(n&-8)&&d+8<h;)for(D=0;8>D;D++)u[q+d]=p,n--,d++;for(;0<n&&d<h;)u[q+d]=p,n--,d++;break;case 4:for(;0!=
(n&-8)&&d+8<h;)for(D=0;8>D;D++)w=t[a++]|t[a++]<<8,u[q+d]=4278190080|w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16,n--,d++;for(;0<n&&d<h;)w=t[a++]|t[a++]<<8,u[q+d]=4278190080|w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16,n--,d++;break;case 8:for(;0!=(n&-8)&&d+8<h;)for(D=0;8>D;D++)A?(u[q+d]=p,A=!1):(u[q+d]=l,A=!0,n++),n--,d++;for(;0<n&&d<h;)A?(u[q+d]=p,A=!1):(u[q+d]=l,A=!0,n++),n--,d++;break;case 13:for(;0!=(n&-8)&&d+8<h;)for(D=0;8>D;D++)u[q+d]=4294967295,n--,d++;for(;0<
n&&d<h;)u[q+d]=4294967295,n--,d++;break;case 14:for(;0!=(n&-8)&&d+8<h;)for(D=0;8>D;D++)u[q+d]=4278190080,n--,d++;for(;0<n&&d<h;)u[q+d]=4278190080,n--,d++;break;default:n--,d++}}return u};this.byte2int=function(h,v,x){v||(v=h.length);x||(x=0);v=Math.floor(v/4);for(var t=new Uint32Array(v),a,m=0;m<v;m++)a=(m<<2)+x,t[m]=(h[a+3]&255)<<24|h[a+2]&255|(h[a+1]&255)<<8|(h[a+0]&255)<<16;return t};this.decompressInt32=function(h,C,x,t,a){x=t[a];a+=1;var m=h*C,q=new Uint32Array(4*m);if(0==(x&32)){for(var e=a,
n,f,d=0,r,z,l,p=e,B=3;d<C;){n=B+h*C*4-(d+1)*h*4;for(f=0;f<h;){r=t[e++];z=r&15;r=r>>4&15;l=z<<4|r;47>=l&&16<=l&&(z=l,r=0);for(;0<r;)e++,q[n]=255,n+=4,f++,r--;for(;0<z;)q[n]=255,n+=4,f++,z--}d++}a+=e-p}else for(n=0;n<m;n++)e=n<<2,q[e+3]=255;0!=(x&16)?(x=v(t,a,h,C,q,2),a+=x,x=v(t,a,h,C,q,1),v(t,a+x,h,C,q,0)):(y(t,a,h,C,q,2),a+=m,y(t,a,h,C,q,1),y(t,a+m,h,C,q,0));return rdpBitmap.byte2int(q)};this.decompressInt24=function(h,v,x,t,a){var m=-1,q=-1;x=a+x;for(var e,n,f,d=h,r=-1,z,l=0,p=0,B=0,k=4294967295,
w=!1,y=!1,A,u=new Uint32Array(h*v);a<x;){z=0;n=t[a++];e=n>>4;switch(e){case 12:case 13:case 14:e-=6;n&=15;f=16;break;case 15:e=n&15;9>e?(n=t[a++],n|=t[a++]<<8):n=11>e?8:1;f=0;break;default:e>>=1,n&=31,f=32}0!=f&&(A=2==e||7==e,0==n?n=A?t[a++]+1:t[a++]+f:A&&(n<<=3));switch(e){case 0:r!=e||d==h&&-1==m||(w=!0);break;case 8:l=4278190080|t[a++]<<16|t[a++]<<8|t[a++];case 3:p=4278190080|t[a++]<<16|t[a++]<<8|t[a++];break;case 6:case 7:k=4278190080|t[a++]<<16|t[a++]<<8|t[a++];e-=5;break;case 9:B=3;e=2;z=3;
break;case 10:B=5,e=2,z=5}r=e;for(f=0;0<n;)switch(d>=h&&(d=0,v--,m=q,q=0+v*h),e){case 0:w&&(u[q+d]=-1==m?k:u[m+d]^k|4278190080,w=!1,n--,d++);if(-1==m){for(;0!=(n&-8)&&d+8<h;)for(A=0;8>A;A++)u[q+d]=4278190080,n--,d++;for(;0<n&&d<h;)u[q+d]=4278190080,n--,d++}else{for(;0!=(n&-8)&&d+8<h;)for(A=0;8>A;A++)u[q+d]=u[m+d],n--,d++;for(;0<n&&d<h;)u[q+d]=u[m+d],n--,d++}break;case 1:if(-1==m){for(;0!=(n&-8)&&d+8<h;)for(A=0;8>A;A++)u[q+d]=k,n--,d++;for(;0<n&&d<h;)u[q+d]=k,n--,d++}else{for(;0!=(n&-8)&&d+8<h;)for(A=
0;8>A;A++)u[q+d]=u[m+d]^k|4278190080,n--,d++;for(;0<n&&d<h;)u[q+d]=u[m+d]^k|4278190080,n--,d++}break;case 2:if(-1==m){for(;0!=(n&-8)&&d+8<h;)for(A=0;8>A;A++)f<<=1,f&=255,0==f&&(B=0!=z?z&255:t[a++],f=1),u[q+d]=0!=(B&f)?k:4278190080,n--,d++;for(;0<n&&d<h;)f<<=1,f&=255,0==f&&(B=0!=z?z&255:t[a++],f=1),u[q+d]=0!=(B&f)?k:4278190080,n--,d++}else{for(;0!=(n&-8)&&d+8<h;)for(A=0;8>A;A++)f<<=1,f&=255,0==f&&(B=0!=z?z&255:t[a++],f=1),u[q+d]=0!=(B&f)?u[m+d]^k|4278190080:u[m+d],n--,d++;for(;0<n&&d<h;)f<<=1,f&=255,
0==f&&(B=0!=z?z&255:t[a++],f=1),u[q+d]=0!=(B&f)?u[m+d]^k|4278190080:u[m+d],n--,d++}break;case 3:for(;0!=(n&-8)&&d+8<h;)for(A=0;8>A;A++)u[q+d]=p,n--,d++;for(;0<n&&d<h;)u[q+d]=p,n--,d++;break;case 4:for(;0!=(n&-8)&&d+8<h;)for(A=0;8>A;A++)u[q+d]=4278190080|t[a++]<<16|t[a++]<<8|t[a++],n--,d++;for(;0<n&&d<h;)u[q+d]=4278190080|t[a++]<<16|t[a++]<<8|t[a++],n--,d++;break;case 8:for(;0!=(n&-8)&&d+8<h;)for(A=0;8>A;A++)y?(u[q+d]=p,y=!1):(u[q+d]=l,y=!0,n++),n--,d++;for(;0<n&&d<h;)y?(u[q+d]=p,y=!1):(u[q+d]=l,y=
!0,n++),n--,d++;break;case 13:for(;0!=(n&-8)&&d+8<h;)for(A=0;8>A;A++)u[q+d]=4294967295,n--,d++;for(;0<n&&d<h;)u[q+d]=4294967295,n--,d++;break;case 14:for(;0!=(n&-8)&&d+8<h;)for(A=0;8>A;A++)u[q+d]=4278190080,n--,d++;for(;0<n&&d<h;)u[q+d]=4278190080,n--,d++}}return u};this.decompress=function(h,v,y,t,a){var m=-1,q=0;y+=a;var e=h,n=-1,f=0,d=0,r=0,z=4294967295,l=!1,p=!1,B=new Uint8Array(h*v);for(B[0]=0;a<y;){var k=0;var w=t[a++];var x=w>>4;switch(x){case 12:case 13:case 14:x-=6;w&=15;var A=16;break;case 15:x=
w&15;9>x?(w=t[a++],w|=t[a++]<<8):w=11>x?8:1;A=0;break;default:x>>=1,w&=31,A=32}if(0!=A){var u=2==x||7==x;0==w?w=u?t[a++]+1:t[a++]+A:u&&(w<<=3)}switch(x){case 0:n!=x||e==h&&-1==m||(l=!0);break;case 8:f=t[a++];case 3:d=t[a++];break;case 6:case 7:z=t[a++];x-=5;break;case 9:r=3;x=2;k=3;break;case 10:r=5,x=2,k=5}n=x;for(A=0;0<w;)switch(e>=h&&(e=0,v--,m=q,q=0+v*h),x){case 0:l&&(B[q+e]=-1==m?z:B[m+e]^z,l=!1,w--,e++);if(-1==m){for(;0!=(w&-8)&&e+8<h;)for(u=0;8>u;u++)B[q+e]=0,w--,e++;for(;0<w&&e<h;)B[q+e]=
0,w--,e++}else{for(;0!=(w&-8)&&e+8<h;)for(u=0;8>u;u++)B[q+e]=B[m+e],w--,e++;for(;0<w&&e<h;)B[q+e]=B[m+e],w--,e++}break;case 1:if(-1==m){for(;0!=(w&-8)&&e+8<h;)for(u=0;8>u;u++)B[q+e]=z,w--,e++;for(;0<w&&e<h;)B[q+e]=z,w--,e++}else{for(;0!=(w&-8)&&e+8<h;)for(u=0;8>u;u++)B[q+e]=B[m+e]^z,w--,e++;for(;0<w&&e<h;)B[q+e]=B[m+e]^z,w--,e++}break;case 2:if(-1==m){for(;0!=(w&-8)&&e+8<h;)for(u=0;8>u;u++)A<<=1,A&=255,0==A&&(r=0!=k?k:t[a++],A=1),B[q+e]=0!=(r&A)?z:0,w--,e++;for(;0<w&&e<h;)A<<=1,A&=255,0==A&&(r=0!=
k?k:t[a++],A=1),B[q+e]=0!=(r&A)?z:0,w--,e++}else{for(;0!=(w&-8)&&e+8<h;)for(u=0;8>u;u++)A<<=1,A&=255,0==A&&(r=0!=k?k:t[a++],A=1),B[q+e]=0!=(r&A)?B[m+e]^z:B[m+e],w--,e++;for(;0<w&&e<h;)A<<=1,A&=255,0==A&&(r=0!=k?k:t[a++],A=1),B[q+e]=0!=(r&A)?B[m+e]^z:B[m+e],w--,e++}break;case 3:for(;0!=(w&-8)&&e+8<h;)for(u=0;8>u;u++)B[q+e]=d,w--,e++;for(;0<w&&e<h;)B[q+e]=d,w--,e++;break;case 4:for(;0!=(w&-8)&&e+8<h;)for(u=0;8>u;u++)B[q+e]=t[a++],w--,e++;for(;0<w&&e<h;)B[q+e]=t[a++],w--,e++;break;case 8:for(;0!=(w&
-8)&&e+8<h;)for(u=0;8>u;u++)p?(B[q+e]=d,p=!1):(B[q+e]=f,p=!0,w++),w--,e++;for(;0<w&&e<h;)p?(B[q+e]=d,p=!1):(B[q+e]=f,p=!0,w++),w--,e++;break;case 13:for(;0!=(w&-8)&&e+8<h;)for(u=0;8>u;u++)B[q+e]=255,w--,e++;for(;0<w&&e<h;)B[q+e]=255,w--,e++;break;case 14:for(;0!=(w&-8)&&e+8<h;)for(u=0;8>u;u++)B[q+e]=0,w--,e++;for(;0<w&&e<h;)B[q+e]=0,w--,e++;break;default:w--,e++}}return B}}};
function RdpGeneral(v,C,H,O,N,P,y){function ja(b){return"on"==b||"true"==b}function ya(){return ma.displayName||ma.server||ma.symlink||ma.id||"undefined"}function za(b){return 4278190080|(b<<3&248|b>>2&7)<<16|(b>>3&252|b>>9&3)<<8|b>>8&248|b>>13&7}function h(b){return 4278190080|X.paletteRdp[2][b]<<16|X.paletteRdp[1][b]<<8|X.paletteRdp[0][b]}function W(b){return 4278190080|b}function x(b){return 4278190080|b}function t(b,c){switch(b){case 16:Fa=za;Db=rdpBitmap.decompressInt16;break;case 8:Fa=h;break;
case 24:Fa=x;Db=rdpBitmap.decompressInt24;break;case 32:Fa=W;Db=rdpBitmap.decompressInt32;break;case 15:return ma.invitation||console.log("15 bit color is not supported anymore."),!1;default:return!1}O=b;lb=(b+7)/8>>0;if(c&&J.onColorChange)J.onColorChange(b);return!0}function a(b,c,a){C=b;H=c;ea=ca=0;da=C-1;fa=H-1;if(J.onresolutionchange&&a)J.onresolutionchange(b,c)}function m(b){M||bb&&Y.send(b)}function q(){this.style=this.yOrigin=this.xOrigin=0;this.pattern=Array(8);this.toStream=function(b){b.setByte(this.xOrigin);
b.setByte(this.yOrigin);b.setByte(this.style);b.setBytes(this.pattern)};this.fromStream=function(b){this.xOrigin=b.getByte();this.yOrigin=b.getByte();this.style=b.getByte();this.pattern=b.getBytes(8)};this.byteLength=function(){return 11}}function e(){this.bottom=this.top=this.right=this.left=0;this.toStream=function(b){b.setLittleEndian16(this.left);b.setLittleEndian16(this.right);b.setLittleEndian16(this.top);b.setLittleEndian16(this.bottom)};this.fromStream=function(b){this.left=b.getLittleEndian16();
this.right=b.getLittleEndian16();this.top=b.getLittleEndian16();this.bottom=b.getLittleEndian16()};this.byteLength=function(){return 8}}function n(){this.action=this.offset=this.bottom=this.top=this.right=this.left=0;this.toStream=function(b){b.setLittleEndian16(this.left);b.setLittleEndian16(this.right);b.setLittleEndian16(this.top);b.setLittleEndian16(this.bottom);b.setLittleEndian32(this.offset);b.setByte(this.action)};this.fromStream=function(b){this.left=b.getLittleEndian16();this.right=b.getLittleEndian16();
this.top=b.getLittleEndian16();this.bottom=b.getLittleEndian16();this.offset=b.getLittleEndian32();this.action=b.getByte()};this.byteLength=function(){return 13}}function f(){this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=function(b){b.setLittleEndian16(this.x);b.setLittleEndian16(this.y);b.setLittleEndian16(this.cx);b.setLittleEndian16(this.cy);b.setByte(this.opcode)};this.fromStream=function(b){this.x=b.getLittleEndian16();this.y=b.getLittleEndian16();this.cx=b.getLittleEndian16();this.cy=
b.getLittleEndian16();this.opcode=b.getByte()};this.byteLength=function(){return 9}}function d(b,c,a,d,p){this.offset=b;this.baseLine=c;this.width=a;this.height=d;this.fontData=p}function r(){this.opcode=this.backgroundColor=this.endY=this.endX=this.startY=this.startX=this.mixmode=0;this.pen=new p;this.toStream=function(b){b.setLittleEndian16(this.mixmode);b.setLittleEndian16(this.startX);b.setLittleEndian16(this.startY);b.setLittleEndian16(this.endX);b.setLittleEndian16(this.endY);b.setLittleEndian32(this.backgroundColor);
b.setByte(this.opcode);this.pen.toStream(b)};this.fromStream=function(b){this.mixmode=b.getLittleEndian16();this.startX=b.getLittleEndian16();this.startY=b.getLittleEndian16();this.endX=b.getLittleEndian16();this.endY=b.getLittleEndian16();this.backgroundColor=b.getLittleEndian32();this.opcode=b.getByte();this.pen.fromStream(b)};this.byteLength=function(){return 15+this.pen.byteLength()}}function z(){this.cacheIDX=this.cacheID=this.colorTable=this.srcY=this.srcX=this.opcode=this.cy=this.cx=this.y=
this.x=0;this.toStream=function(b){b.setLittleEndian16(this.x);b.setLittleEndian16(this.y);b.setLittleEndian16(this.cx);b.setLittleEndian16(this.cy);b.setByte(this.opcode);b.setLittleEndian16(this.srcX);b.setLittleEndian16(this.srcY);b.setByte(this.cacheID);b.setByte(this.colorTable);b.setLittleEndian16(this.cacheIDX)};this.fromStream=function(b){this.x=b.getLittleEndian16();this.y=b.getLittleEndian16();this.cx=b.getLittleEndian16();this.cy=b.getLittleEndian16();this.opcode=b.getByte();this.srcX=
b.getLittleEndian16();this.srcY=b.getLittleEndian16();this.cacheID=b.getByte();this.colorTable=b.getByte();this.cacheIDX=b.getLittleEndian16()};this.byteLength=function(){return 17}}function l(){this.foregroundColor=this.backgroundColor=this.opcode=this.cy=this.cx=this.y=this.x=0;this.brush=new q;this.toStream=function(b){b.setLittleEndian16(this.x);b.setLittleEndian16(this.y);b.setLittleEndian16(this.cx);b.setLittleEndian16(this.cy);b.setByte(this.opcode);b.setLittleEndian32(this.backgroundColor);
b.setLittleEndian32(this.foregroundColor);this.brush.toStream(b)};this.fromStream=function(b){this.x=b.getLittleEndian16();this.y=b.getLittleEndian16();this.cx=b.getLittleEndian16();this.cy=b.getLittleEndian16();this.opcode=b.getByte();this.backgroundColor=b.getLittleEndian32();this.foregroundColor=b.getLittleEndian32();this.brush.fromStream(b)};this.byteLength=function(){return 17+this.brush.byteLength()}}function p(){this.color=this.width=this.style=0;this.toStream=function(b){b.setByte(this.style);
b.setByte(this.width);b.setLittleEndian32(this.color)};this.fromStream=function(b){this.style=b.getByte();this.width=b.getByte();this.color=b.getLittleEndian32()};this.byteLength=function(){return 6}}function B(){this.dataSize=this.opcode=this.lines=this.foregroundColor=this.flags=this.y=this.x=0;this.data=[];this.toStream=function(b){b.setLittleEndian16(this.x);b.setLittleEndian16(this.y);b.setByte(this.opcode);b.setLittleEndian32(this.foregroundColor);b.setByte(this.lines);b.setByte(this.dataSize);
this.dataSize&&b.setBytes(this.data)};this.fromStream=function(b){this.x=b.getLittleEndian16();this.y=b.getLittleEndian16();this.opcode=b.getByte();this.foregroundColor=b.getLittleEndian32();this.lines=b.getByte();if(this.dataSize=b.getByte())this.data=b.getBytes(this.dataSize)};this.byteLength=function(){return 11+this.dataSize}}function k(){this.color=this.cy=this.cx=this.y=this.x=0;this.toStream=function(b){b.setLittleEndian16(this.x);b.setLittleEndian16(this.y);b.setLittleEndian16(this.cx);b.setLittleEndian16(this.cy);
b.setLittleEndian32(this.color)};this.fromStream=function(b){this.x=b.getLittleEndian16();this.y=b.getLittleEndian16();this.cx=b.getLittleEndian16();this.cy=b.getLittleEndian16();this.color=b.getLittleEndian32()};this.byteLength=function(){return 12}}function w(){this.srcY=this.srcX=this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=function(b){b.setLittleEndian16(this.x);b.setLittleEndian16(this.y);b.setLittleEndian16(this.cx);b.setLittleEndian16(this.cy);b.setByte(this.opcode);b.setLittleEndian16(this.srcX);
b.setLittleEndian16(this.srcY)};this.fromStream=function(b){this.x=b.getLittleEndian16();this.y=b.getLittleEndian16();this.cx=b.getLittleEndian16();this.cy=b.getLittleEndian16();this.opcode=b.getByte();this.srcX=b.getLittleEndian16();this.srcY=b.getLittleEndian16()};this.byteLength=function(){return 13}}function R(){this.length=this.opcode=this.boxBottom=this.boxRight=this.boxTop=this.boxLeft=this.clipBottom=this.clipRight=this.clipTop=this.clipLeft=this.font=this.unknown=this.y=this.x=this.backgroundColor=
this.foregroundColor=this.mixmode=this.flags=0;this.text=null;this.toStream=function(b){b.setByte(this.font);b.setByte(this.flags);b.setByte(this.opcode);b.setByte(this.mixmode);b.setLittleEndian32(this.foregroundColor);b.setLittleEndian32(this.backgroundColor);b.setLittleEndian16(this.clipLeft);b.setLittleEndian16(this.clipTop);b.setLittleEndian16(this.clipRight);b.setLittleEndian16(this.clipBottom);b.setLittleEndian16(this.boxLeft);b.setLittleEndian16(this.boxTop);b.setLittleEndian16(this.boxRight);
b.setLittleEndian16(this.boxBottom);b.setLittleEndian16(this.x);b.setLittleEndian16(this.y);b.setByte(this.length);this.length&&b.setBytes(this.text)};this.fromStream=function(b){this.font=b.getByte();this.flags=b.getByte();this.opcode=b.getByte();this.mixmode=b.getByte();this.foregroundColor=b.getLittleEndian32();this.backgroundColor=b.getLittleEndian32();this.clipLeft=b.getLittleEndian16();this.clipTop=b.getLittleEndian16();this.clipRight=b.getLittleEndian16();this.clipBottom=b.getLittleEndian16();
this.boxLeft=b.getLittleEndian16();this.boxTop=b.getLittleEndian16();this.boxRight=b.getLittleEndian16();this.boxBottom=b.getLittleEndian16();this.x=b.getLittleEndian16();this.y=b.getLittleEndian16();if(this.length=b.getByte())this.text=b.getBytes(this.length)};this.byteLength=function(){return 33+this.length}}function A(){this.orderType=0;this.bounds=new e;this.destBlt=new f;this.patBlt=new l;this.screenBlt=new w;this.line=new r;this.rectangle=new k;this.deskSave=new n;this.memBlt=new z;this.polyLine=
new B;this.text2=new R;this._line=new hi5.graphic.Line;this.paletteRdp=null;this.toPDU=function(){var b=4+this.bounds.byteLength()+this.destBlt.byteLength()+this.patBlt.byteLength()+this.screenBlt.byteLength()+this.line.byteLength()+this.rectangle.byteLength()+this.deskSave.byteLength()+this.memBlt.byteLength()+this.polyLine.byteLength()+this.text2.byteLength()+14+10,c=new Uint8Array(b);c[0]=29;c[2]=1;c[3]=3;b=new hi5.DataBuffer(c,0,b);b.skipPosition(4);this.bounds.toStream(b);this.destBlt.toStream(b);
this.patBlt.toStream(b);this.screenBlt.toStream(b);this.line.toStream(b);this.rectangle.toStream(b);this.deskSave.toStream(b);this.memBlt.toStream(b);this.polyLine.toStream(b);this.text2.toStream(b);b.setLittleEndian16(ca);b.setLittleEndian16(ea);b.setLittleEndian16(da);b.setLittleEndian16(fa);b.setLittleEndian32(na);b.setByte(this.orderType);b.setByte(O);ta.toStream(b);return c};this.fromStream=function(b){this.bounds.fromStream(b);this.destBlt.fromStream(b);this.patBlt.fromStream(b);this.screenBlt.fromStream(b);
this.line.fromStream(b);this.rectangle.fromStream(b);this.deskSave.fromStream(b);this.memBlt.fromStream(b);this.polyLine.fromStream(b);this.text2.fromStream(b);ca=b.getLittleEndian16();ea=b.getLittleEndian16();da=b.getLittleEndian16();fa=b.getLittleEndian16();na=b.getLittleEndian32();this.orderType=b.getByte();t(b.getByte(),!0);ta.fromStream(b)}}function u(){var b=bb;Jb=bb=!1;ic();X=new A;na=0;sa&&sa.reset();ua&&ua.reset();b&&(bb=b)}function D(){if(!bb){Jb=!1;if(M)Y=M;else{if(J.oncreatewebsocket)Y=
J.oncreatewebsocket(v);else{var b=0==J.mode&&y?v.substring(0,v.indexOf("?"))+"?_METHOD=post":v;Y=new WebSocket(b,"rdp")}"binaryType"in Y&&(Y.binaryType="arraybuffer")}Y.onopen=function(b){bb=!0;if(!y&&J.onopen)J.onopen()};"on"==ma.recording&&(Aa=new RecordingManager,Aa.setHeader({name:"rec",width:C,height:H,color:O,namesuffix:".rdpv",filetag:"RDPV",duration:0}));Y.onmessage=G;Y.onclose=cb;Y.onerror=J.onerror}}function G(b){var a=b.data;if("string"!=typeof a){var d=new Uint8Array(a);null!=Aa&&Aa.add(new RecordingObj(d,
0,a.byteLength,-1));Ga.attach(d,0,a.byteLength);d=Ga.getLittleEndian16();switch(d){case 29:c(Ga);break;case 48:if(J.onSlowPath)J.onSlowPath();d=Ga;var p;d.getLittleEndian16();b=d.getByte();var a=d.getByte(),l=d.getLittleEndian16();(p=0!=(a&32))&&(l-=18);p&&(3==(a&15)?(a=d.getByte(),p=d.getByte(),l-=2,0!=(a&16)&&0!=(p&32)&&(sa.dec5(d.getData(),d.getPosition(),l,p),d=sa.getData(),l=sa.getDecompressedLength()),ua.dec(d.getData(),d.getPosition(),l,a),d=ua.getData()):(sa.dec(d.getData(),d.getPosition(),
l,a),d=sa.getData()));gb(b,d);break;case 49:if(J.onFastPath)J.onFastPath();a:{var a=Ga,l=a.getByte();d=l&15;b=l>>4&3;p=0;2==(l>>6&3)&&(p=a.getByte());var f=0!=(p&32);l=a.getLittleEndian16();f&&(3==(p&15)?(p=a.getByte(),f=a.getByte(),l-=2,0!=(p&16)&&0!=(f&32)&&(sa.dec5(a.getData(),a.getPosition(),l,f),a=sa.getData(),l=sa.getDecompressedLength()),ua.dec(a.getData(),a.getPosition(),l,p),a=ua.getData(),l=ua.getDecompressedLength()):(sa.dec(a.getData(),a.getPosition(),l,p),a=sa.getData(),l=sa.getDecompressedLength()));
if(0!=b)switch(b){case 2:case 3:Eb.addFragement(a,l);break a;case 1:Eb.addFragement(a,l),a=Eb.clearFragements()}b=a;ga&&ga.begin("decodeFastPath");switch(d){case 0:d=b.getLittleEndian16();Zb(b,d);break;case 1:b.skipPosition(2);Fb(b);break;case 2:b.skipPosition(2);I(b);break;case 3:break;case 4:for(d=b.getEnd();b.getPosition()<d;)switch(a=b.getLittleEndian16(),a){case 1:case 6:l=b.getLittleEndian16();p=b.getLittleEndian16();b.getLittleEndian16();b.getBigEndian16();var a=b;var k=a.getByte();a.skipPosition(2);
var e=a.getByte();var n=a.getLittleEndian16(),h=a.getLittleEndian16(),r=a.getLittleEndian32();f=a.getPosition()+r;switch(e){case 0:e=rdpBitmap.byte2int(a.getData(),r,a.getPosition());k=new Uint32Array(e.length);rdpcodecs.flipimage(e,0,k,n,h,1);N.setRGBs(l,p,n,h,k,0,n);break;case 1:mb(a,k,n,h);e=wb.getData();k=wb.getDataSize();k=new Uint32Array(k);rdpcodecs.flipimage(e,0,k,n,h,1);N.setRGBs(l,p,n,h,k,0,n);break;case 3:e=Ha.decode(a,r);n=e.getRects();h=e.getTiles();k=e.getTileSize();for(var q=(r=e.getRectSize())?
new Ob(0,0,0,0):null,t=0;t<k;t++){var u=h[t];if(r)for(var w=0;w<r;w++)n[w].intersection(u.x,u.y,64,64,q),q.isEmpty()||(e=64*(q.y-u.y)+(q.x-u.x),q.x+=l,q.y+=p,N.setRGBs(q.x,q.y,q.width,q.height,u.data,e,64));else N.setRGBs(u.x,u.y,64,64,u.data,0,64)}}a.setPosition(f);break;case 4:l=b;a=l.getLittleEndian16();l=l.getLittleEndian32();1==a&&m("91"+l);break;default:svGlobal.logger.warn("Invalid surface cmd:"+a)}break;case 5:break;case 6:break;case 8:break;case 9:Ka(b,24);break;case 10:N.setCursor(b.getLittleEndian16());
break;case 11:d=b.getLittleEndian16();Ka(b,d);break;default:svGlobal.logger.warn("XXX RDP5 opcode "+d)}ga&&ga.end("decodeFastPath")}break;case 65:b=Ga;d=b.getPosition();a=b.getByte();l=b.getByte();seqNoLow=b.getByte();seqNoHigh=b.getByte();reqType=b.getLittleEndian16;out=null;payloadLen=0;payload=null;averageRTT=bandwidth=baseRTT=0;if(0!=l)svGlobal.logger.warn("invalid msg channel data");else switch(reqType){case 1:case 4097:out=new Uint8Array(7);out[0]=65;out.set(b.getData().subarray(d,d+4),1);out[5]=
0;out[6]=0;m(out.buffer);break;case 20:case 276:case 4116:break;case 2:8==a?(payloadLen=b.getLittleEndian16(),payload=b.getByte(payloadLen)):svGlobal.logger.warn("Invalid payload");break;case 43:8==a?(payloadLen=b.getLittleEndian16(),payload=b.getByte(payloadLen)):svGlobal.logger.warn("Invalid payload");break;case 1065:case 1577:break;case 2112:baseRTT=b.getLittleEndian32();averageRTT=b.getLittleEndian32();break;case 2176:bandwidth=b.getLittleEndian32();averageRTT=b.getLittleEndian32();break;case 2240:baseRTT=
b.getLittleEndian32();bandwidth=b.getLittleEndian32();averageRTT=b.getLittleEndian32();break;default:svGlobal.logger.warn("Invalid msg channel type:"+reqType)}break;case 62:ia(Ga.getUnicodeString(Ga.getEnd()-Ga.getPosition(),!1));default:if(J.onmessage)J.onmessage(b)}}else{d=parseInt(a.substring(0,2),16);a=a.substring(2);switch(d){case 0:d=v.substring(v.indexOf("?")+1);m("00"+d);if(y&&J.onopen)J.onopen();break;case 15:if(J&&(oa=Va=!1,X=new A,a&&(d=JSON.parse(a),d.capability&&J&&(J.sessionInfo.suppressOutput=
!!d.capability.suppressOutput)),!K&&J&&J.onready))J.onready();break;case 26:Va=!0;break;case 56:J.sessionInfo.appInfo=JSON.parse(a);break;case 62:ia(a)}J.onmessage(b)}}function ia(b){var c=parseInt(b.substring(0,1),16);b=b.substring(1);switch(c){case 0:b=JSON.parse(b),u(),c=b.width,b=b.height,c==C&&b==H||a(c,b,!1,!1)}}function c(b){var c=b.getByte();if(0==c){svGlobal.logger.info("Send history...");var a=new Uint8Array(4);a[0]=29;a[2]=1;a[3]=1;Y.send(a.buffer);N.getHistory(m,function(){ga&&ga.begin("his_mppc");
(a=sa.toPDU())&&Y.send(a.buffer);ga&&ga.end("his_mppc");if(ua){ga&&ga.begin("his_mppc61");var b=ua.toPDU();b&&Y.send(b.buffer);ga&&ga.end("his_mppc61")}ga&&ga.begin("his_order");Y.send(X.toPDU().buffer);ga&&ga.end("his_order");a=new Uint8Array(5);a[0]=29;a[2]=1;a[3]=0;a[4]=1;Y.send(a.buffer)})}else switch(c=b.getByte(),c){case 0:svGlobal.logger.warn("Received history");J.sessionInfo.suppressOutput&&ma.monitorDef&&524292==J.sessionInfo.appInfo.protocolVersion?(J.suppressOutput(!0),J.suppressOutput(!1)):
J.refreshOutput(0,0,C-1,H-1);if(J.onHistoryReceived)J.onHistoryReceived();break;case 1:break;case 2:ga&&ga.begin("his_mppc_dec");sa.fromStream(b);ga&&ga.end("his_mppc_dec");break;case 3:ga&&ga.begin("his_order_dec");X.fromStream(b);ga&&ga.end("his_order_dec");break;case 9:ua||(ua=new Bulk61Data);ga&&ga.begin("his_mppc_dec61");ua.fromStream(b);ga&&ga.end("his_mppc_dec61");break;default:N.setHistory(c,b)}if(J.onReqHistory)J.onReqHistory()}function gb(b,c){switch(b){case 2:ka(c);break;case 20:break;
case 31:Va=!1;break;case 27:Ma(c);break;case 34:break;case 38:E(c);Va=!1;break;case 40:setTimeout(function(){J&&!0!==ma.kbdSynced&&(J.sendKeyboardSynchronize(ja(ma.scrollLock),ja(ma.numLock),ja(ma.capsLock)),ma.kbdSynced=!0)},500);Va=!1;break;case 41:Ca(c);break;case 47:xb(c);break;case 50:c.skipPosition(4);break;case 54:Oa(c);break;case 55:db(c);break;default:svGlobal.logger.warn("Unimplemented Data PDU type "+b)}}function Ca(b){b.skipPosition(2);var c=b.getLittleEndian16();b=0!=(c&4);var a=0!=(c&
2),d=0!=(c&1),c=0!=(c&8);if(J.onLockKeyState)J.onLockKeyState({capsLock:b,numLock:a,scrollLock:d,kanaLock:c});svGlobal.logger.info("LED state, capsLock:"+b+" numLock:"+a+" scrollLock:"+d+" kanaLock:"+c)}function db(b){for(var c=b.getLittleEndian32(),d,l,p,f,k=0,e=0,n=0,h=0,r=0;r<c;r++)d=b.getLittleEndian32(),l=b.getLittleEndian32(),p=b.getLittleEndian32(),f=b.getLittleEndian32(),b.skipPosition(4),k=Math.min(d,k),e=Math.max(e,p),n=Math.min(l,n),h=Math.max(h,f);d=e-k+1;l=h-n+1;svGlobal.logger.warn("monitor, count:"+
c+" w:"+d+" h:"+l);a(d,l,!0)}function Oa(b){b=b.getLittleEndian32().toString(16).toUpperCase();svGlobal.logger.warn("server status code:"+b)}function ka(b){var c=b.getLittleEndian16();switch(c){case 0:b.skipPosition(2);c=b.getLittleEndian16();b.skipPosition(2);Zb(b,c);break;case 1:Fb(b);break;case 2:I(b);break;case 3:break;default:svGlobal.logger.warn("Unimplemented Update type "+c)}}function Ma(b){var c=b.getLittleEndian16();b.skipPosition(2);switch(c){case 3:c=b.getLittleEndian16();b=b.getLittleEndian16();
J.onMoveCursor(c,b,!0);break;case 6:Ka(b,24);break;case 7:N.setCursor(b.getLittleEndian16());break;case 1:b=b.getLittleEndian16();switch(b){case 0:break;default:svGlobal.logger.warn("XXX system pointer message "+b)}break;case 8:c=b.getLittleEndian16(),Ka(b,c)}}function E(b){var c=b.getLittleEndian32(),a=J.sessionInfo;if(3>c){var d=J.sessionInfo;switch(c){case 0:b.skipPosition(4);d.domain=b.getUnicodeString(52,!0);b.skipPosition(4);d.userName=b.getUnicodeString(512,!0);d.sessionId=b.getLittleEndian32();
break;case 1:d.version=b.getLittleEndian16();b.skipPosition(4);d.sessionId=b.getLittleEndian32();c=b.getLittleEndian32();var l=b.getLittleEndian32();b.skipPosition(558);d.domain=b.getUnicodeString(c,!0);d.userName=b.getUnicodeString(l,!0)}}else if(3==c){b.skipPosition(2);var p=b.getLittleEndian32();b.skipPosition(4);if(2==p)return;b.getLittleEndian32();b.skipPosition(4);a.sessionId=b.getLittleEndian32();p=b.getBytes(16);b=Array(16);for(d=0;16>d;d++)b[d]=p[d]&255}if(!Jb&&J.onloggedin)J.onloggedin(J.sessionInfo);
Jb=!0;b="8D";a.sessionId&&(b+=a.sessionId+"\t"+(p?hi5.Base64.enc(p):0)+"\t"+a.userName+"\t"+a.domain);K||m(b)}function xb(b){Va=!0;b=b.getLittleEndian32();svGlobal.logger.info("Disconnect:"+b);var c=11==b&&nb;if(c)J.onCloseSurface();if(!(1>b||c)&&(!K&&bb&&m("85"+b),b=b.toString(16).toUpperCase(),J.onerror))J.onerror(b)}function eb(b,c,a,d,l,p,f,k){this.x=b;this.y=c;this.width=a;this.height=d;this.mask=l;this.pixel=p;this.bpp=f;this.cache_idx=k}function Ka(b,c){if(!Na){var a=b.getLittleEndian16();
var d=b.getLittleEndian16();var l=b.getLittleEndian16();var p=b.getLittleEndian16();var f=b.getLittleEndian16();var k=b.getLittleEndian16();var e=b.getLittleEndian16();var n=b.getBytes(e);k=b.getBytes(k);if(0>d||d>=p-1)d=0;0>l?l=0:l>=f&&(l=f-1);for(var h=0;h<e&&0==n[h];h++);h=new eb(d,l,p,f,k,n,c,a);d=h.x;l=h.y;p=h.width;f=h.height;e=h.mask;n=h.pixel;k=h.bpp;for(var h=h.cache_idx,r=new Uint32Array(p*f),q=r[0]=0,t=!0,u=e.length,m=0;m<u;m++)if(0!=e[m]){t=!1;break}for(var w,m=0;m<f;m++)for(u=0;u<p;u++){r[q]=
yb(u,m,p,f,k,n);if(!t){w=m;1!=k&&(w=f-w-1);w=8*w*((p+7)/8|0)+u;w=0==(e[w/8>>0]&128>>w%8)?1:0;if(0==w&&0!=r[q])r[q]=~r[q],r[q]|=4278190080;else if(1==w||0!=r[q])r[q]|=4278190080;32==k&&-1==r[q]&&0==w&&(r[q]=0)}q++}d=new Pb(h,r,d,l,p,f,k,n.length,e.length);N.putCursor(h,d);N.setCursor(a)}}function yb(b,c,a,d,p,l){1!=p&&(c=d-c-1);c=(c*a+b)*p;a=c/8>>0;b=l[a]&255;switch(p){case 1:return 0==(b&128>>c%8)?0:4294967295;case 8:return 0==b?0:4294967295;case 15:return b|=(l[a+1]&255)<<8,p=Array(4),zb(b,15,p,
0),p[0]<<16|p[1]<<8|p[2];case 16:return b|=(l[a+1]&255)<<8,p=Array(4),zb(b,16,p,0),p[0]<<16|p[1]<<8|p[2];case 24:return(l[a+2]&255)<<16|(l[a+1]&255)<<8|b;case 32:return(l[a+3]&255)<<24|(l[a+2]&255)<<16|(l[a+1]&255)<<8|b}svGlobal.logger.warn("invalid bpp value for Xor Mask.");return 0}function Pb(b,c,a,d,p,l,f,k,e){function h(){var b=0;if(c)for(var a=0,d=c.length;a<d;a++)0!=c[a]&&(b+=a%p+(a/p|0));return b}function n(b){switch(b){case 0:return"none";case 507:return"text";case 2046:case 4359:return"default";
default:return""}}this.cache_idx=b;this.rawData=c;this.none=!c;this.hotX=a;this.hotY=d;this.width=p;this.height=l;this.xorSize=k;this.andSize=e;this.result="";this.distance=0;this.bpp=f;this.system="";c&&(this.distance||(this.distance=h()),this.system||(this.system=n(this.distance),"none"==this.system&&(c=null)));b="";if(!this.system&&c){f=p*l*4;b=62+f+k+e;var r=new Uint8Array(b);b=new hi5.DataBuffer(r,0,b);b.setLittleEndian16(0);b.setLittleEndian16(2);b.setLittleEndian16(1);b.setByte(p);b.setByte(l);
b.setByte(0);b.setByte(0);b.setLittleEndian16(a);b.setLittleEndian16(d);b.setLittleEndian32(40+f+k+e);b.setLittleEndian32(22);b.setLittleEndian32(40);b.setLittleEndian32(p);b.setLittleEndian32(2*l);b.setLittleEndian16(1);b.setLittleEndian16(32);b.setLittleEndian32(0);b.setLittleEndian32(k+e);b.setLittleEndian32(0);b.setLittleEndian32(0);b.setLittleEndian32(0);b.setLittleEndian32(0);for(a=l-1;0<=a;a--)for(d=0;d<p;d++)l=c[p*a+d],b.setByte(l&255),b.setByte(l>>8&255),b.setByte(l>>16&255),b.setByte(l>>
24&255);b="data:image/x-icon;base64,"+hi5.Base64.enc(b.getData())}this.url=b}function I(b){var c=0;b.skipPosition(2);var a=b.getLittleEndian16();b.skipPosition(2);var d=Array(a);var p=Array(a);var l=Array(a);b=b.getBytes(3*a);for(var f=0;f<a;f++)d[f]=b[c],p[f]=b[c+1],l[f]=b[c+2],c+=3;256==a&&(X.paletteRdp||(X.paletteRdp=Array(3)),X.paletteRdp[0]=d,X.paletteRdp[1]=p,X.paletteRdp[2]=l)}function Zb(b,c){for(var a=0,p,l;a<c;){p=b.getByte();l=p&3;switch(l){case 1:var f=b,k=p;0!=(k&8)&&(X.orderType=f.getByte());
var e=void 0,h=f,n=Gb[X.orderType],r=0;0!=(k&64)&&n--;0!=(k&128)&&(n=2>n?0:n-2);for(var q=0;q<n;q++)e=h.getByte(),r|=e<<8*q;var u=r;if(0!=(k&4)){if(0==(k&32)){var m=f,w=X.bounds,v=m.getByte();0!=(v&1)?w.left=S(m,w.left,!1):0!=(v&16)&&(w.left=S(m,w.left,!0));0!=(v&2)?w.top=S(m,w.top,!1):0!=(v&32)&&(w.top=S(m,w.top,!0));0!=(v&4)?w.right=S(m,w.right,!1):0!=(v&64)&&(w.right=S(m,w.right,!0));0!=(v&8)?w.bottom=S(m,w.bottom,!1):0!=(v&128)&&(w.bottom=S(m,w.bottom,!0))}var B=X.bounds;ca=B.left;0>ca&&(ca=0);
ea=B.top;0>ea&&(ea=0);da=B.right;da>=C&&(da=C-1);fa=B.bottom;fa>=H&&(fa=H-1)}var z=0!=(k&16);switch(X.orderType){case 0:var x=f,y=X.destBlt,A=u,ia=z;0!=(A&1)&&(y.x=S(x,y.x,ia));0!=(A&2)&&(y.y=S(x,y.y,ia));0!=(A&4)&&(y.cx=S(x,y.cx,ia));0!=(A&8)&&(y.cy=S(x,y.cy,ia));0!=(A&16)&&(y.opcode=x.getByte()&15);var D=y.x,fb=y.y,G=y.cx,E=y.cy,I=y.opcode;if(!(D>C||fb>H)){D<ca&&(G-=ca-D,D=ca);var gb=D+G-1;gb>da&&(G-=gb-da);fb<ea&&(E-=ea-fb,fb=ea);var R=fb+E-1;R>fa&&(E-=R-fa);1>G||1>E||N.bitBlt(I,C,D,fb,G,E,null,
0,0,0)}break;case 1:var K=void 0,M=f,L=X.patBlt,Ca=u,db=z;0!=(Ca&1)&&(L.x=S(M,L.x,db));0!=(Ca&2)&&(L.y=S(M,L.y,db));0!=(Ca&4)&&(L.cx=S(M,L.cx,db));0!=(Ca&8)&&(L.cy=S(M,L.cy,db));0!=(Ca&16)&&(L.opcode=M.getByte(),L.opcode=L.opcode&3|(L.opcode&48)>>2);0!=(Ca&32)&&(L.backgroundColor=hb(M));0!=(Ca&64)&&(L.foregroundColor=hb(M));var W=L.brush,Q=Ca>>7;0!=(Q&1)&&(W.xOrigin=M.getByte());0!=(Q&2)&&(W.yOrigin=M.getByte());0!=(Q&4)&&(W.style=M.getByte());var Y=W.pattern;0!=(Q&8)&&(Y[0]=M.getByte());if(0!=(Q&
16))for(var aa=1;8>aa;aa++)Y[aa]=M.getByte();W.pattern=Y;var F=L.x,U=L.y;if(!(F>da||U>fa)){var ga=L.opcode,ka=F,P=U,V=L.cx,ja=L.cy,Ma=L.foregroundColor,Oa=L.backgroundColor,ma=L.brush.xOrigin,ta=L.brush.yOrigin,sa=L.brush.style,za=L.brush.pattern,Ma=Fa(Ma),Oa=Fa(Oa);if(!(ka>C||P>H)){ka<ca&&(V-=ca-ka,ka=ca);var ua=ka+V-1;ua>da&&(V-=ua-da);P<ea&&(ja-=ea-P,P=ea);var Ka=P+ja-1;Ka>fa&&(ja-=Ka-fa);if(!(1>V||1>ja))switch(sa){case 0:for(var K=new Uint32Array(V*ja),pa=0;pa<K.length;pa++)K[pa]=Ma;N.bitBlt(ga,
C,ka,P,V,ja,K,V,0,0);break;case 2:svGlobal.logger.warn("hatch");break;case 3:for(var K=new Uint32Array(V*ja),Ea=0,pa=0;pa<ja;pa++)for(var Ha=0;Ha<V;Ha++)K[Ea]=0==(za[(pa+ta)%8]&1<<(Ha+ma)%8)?Ma:Oa,Ea++;N.bitBlt(ga,C,ka,P,V,ja,K,V,0,0);break;default:svGlobal.logger.warn("Unsupported brush style "+sa)}}}break;case 2:var oa=void 0,ya=f,va=X.screenBlt,eb=u,Da=z;0!=(eb&1)&&(va.x=S(ya,va.x,Da));0!=(eb&2)&&(va.y=S(ya,va.y,Da));0!=(eb&4)&&(va.cx=S(ya,va.cx,Da));0!=(eb&8)&&(va.cy=S(ya,va.cy,Da));0!=(eb&16)&&
(va.opcode=ya.getByte()&15);0!=(eb&32)&&(va.srcX=S(ya,va.srcX,Da));0!=(eb&64)&&(va.srcY=S(ya,va.srcY,Da));var Pa=va.x,Ia=va.y;if(!(Pa>da||Ia>fa)){var Aa=va.cx,Ga=va.cy,La=va.opcode,Na=va.srcX,yb=va.srcY;Pa<ca&&(oa=ca-Pa,Pa=ca,Na+=oa,Aa-=oa);var Va=Pa+Aa-1;Va>da&&(oa=Va-da,Aa-=oa);Ia<ea&&(oa=ea-Ia,Ia=ea,yb+=oa,Ga-=oa);var bb=Ia+Ga-1;bb>fa&&(oa=bb-fa,Ga-=oa);1>Aa||1>Ga||(12==La?N.moveArea(Na,yb,Aa,Ga,Pa-Na,Ia-yb):N.bitBlt(La,Aa,Pa,Ia,Aa,Ga,null,Aa,Na,yb))}break;case 9:var xb=void 0,Ja=f,la=X.line,qb=
u,rb=z;0!=(qb&1)&&(la.mixmode=Ja.getLittleEndian16());0!=(qb&2)&&(la.startX=S(Ja,la.startX,rb));0!=(qb&4)&&(la.startY=S(Ja,la.startY,rb));0!=(qb&8)&&(la.endX=S(Ja,la.endX,rb));0!=(qb&16)&&(la.endY=S(Ja,la.endY,rb));0!=(qb&32)&&(la.backgroundColor=hb(Ja));0!=(qb&64)&&(la.opcode=Ja.getByte());var kb=la.pen,lb=qb>>7;0!=(lb&1)&&(kb.style=Ja.getByte());0!=(lb&2)&&(kb.width=Ja.getByte());0!=(lb&4)&&(kb.color=hb(Ja));var qa=la.startX,Xa=la.startY,ib=la.endX,cb=la.endY,Ib=la.pen.color,Jb=la.opcode-1;Xa==
cb?(qa>ib&&(xb=qa,qa=ib,ib=xb),qa<ca&&(qa=ca),ib>da&&(ib=da)):qa==ib&&(Xa>cb&&(xb=Xa,Xa=cb,cb=xb),Xa<ea&&(Xa=ea),Xa>fa&&(Xa=fa));Tb(qa,Xa,ib,cb,Ib,Jb);break;case 10:var Kb=f,Ra=X.rectangle,sb=u,Ub=z;0!=(sb&1)&&(Ra.x=S(Kb,Ra.x,Ub));0!=(sb&2)&&(Ra.y=S(Kb,Ra.y,Ub));0!=(sb&4)&&(Ra.cx=S(Kb,Ra.cx,Ub));0!=(sb&8)&&(Ra.cy=S(Kb,Ra.cy,Ub));0!=(sb&16)&&(na=na&4294967040|Kb.getByte());0!=(sb&32)&&(na=na&4294902015|Kb.getByte()<<8);0!=(sb&64)&&(na=na&4278255615|Kb.getByte()<<16);Ra.color=na;var jb=Ra.x,Ab=Ra.y,
Ya=Ra.cx,Vb=Ra.cy;if(!(jb>da||Ab>fa)){jb<ca&&(Ya-=ca-jb,jb=ca);var Eb=jb+Ya-1;Eb>da&&(Ya-=Eb-da);Ab<ea&&(Vb-=ea-Ab,Ab=ea);var Fb=Ab+Vb-1;Fb>fa&&(Vb-=Fb-fa);1>Ya||1>Vb||N.fillRect(jb,Ab,Ya,Vb,Fa(Ra.color))}break;case 11:var Za=f,wa=X.deskSave,Wb=u,nb=z;0!=(Wb&1)&&(wa.offset=Za.getLittleEndian32());0!=(Wb&2)&&(wa.left=S(Za,wa.left,nb));0!=(Wb&4)&&(wa.top=S(Za,wa.top,nb));0!=(Wb&8)&&(wa.right=S(Za,wa.right,nb));0!=(Wb&16)&&(wa.bottom=S(Za,wa.bottom,nb));0!=(Wb&32)&&(wa.action=Za.getByte());var Lb=wa.right-
wa.left+1,zb=wa.bottom-wa.top+1;0==wa.action?1>Lb||1>zb||N.saveDesktop(wa.left,wa.top,Lb,zb,wa.offset):N.restoreDesktop(wa.left,wa.top,Lb,zb,wa.offset);break;case 13:var ra=void 0,$a=f,ba=X.memBlt,tb=u,ab=z;0!=(tb&1)&&(ba.cacheID=$a.getByte(),ba.colorTable=$a.getByte());0!=(tb&2)&&(ba.x=S($a,ba.x,ab));0!=(tb&4)&&(ba.y=S($a,ba.y,ab));0!=(tb&8)&&(ba.cx=S($a,ba.cx,ab));0!=(tb&16)&&(ba.cy=S($a,ba.cy,ab));0!=(tb&32)&&(ba.opcode=$a.getByte()&15);0!=(tb&64)&&(ba.srcX=S($a,ba.srcX,ab));0!=(tb&128)&&(ba.srcY=
S($a,ba.srcY,ab));0!=(tb&256)&&(ba.cacheIDX=$a.getLittleEndian16());var Bb=ba.x,g=ba.y;if(!(Bb>da||g>fa)){var Cb=ba.cx,Xb=ba.cy,Ob=ba.srcX,Pb=ba.srcY;Bb<ca&&(ra=ca-Bb,Bb=ca,Ob+=ra,Cb-=ra);var Zb=Bb+Cb-1;Zb>da&&(ra=Zb-da,Cb-=ra);g<ea&&(ra=ea-g,g=ea,Pb+=ra,Xb-=ra);var Cd=g+Xb-1;Cd>fa&&(ra=Cd-fa,Xb-=ra);1>Cb||1>Xb||N.drawBitmap(ba.cacheID,ba.cacheIDX,Bb,g,Cb,Xb,Ob,Pb,ba.opcode)}break;case 22:var ac=f,Sa=X.polyLine,fc=u,Dd=z;0!=(fc&1)&&(Sa.x=S(ac,Sa.x,Dd));0!=(fc&2)&&(Sa.y=S(ac,Sa.y,Dd));0!=(fc&4)&&(Sa.opcode=
ac.getByte());0!=(fc&16)&&(Sa.foregroundColor=hb(ac));0!=(fc&32)&&(Sa.lines=ac.getByte());if(0!=(fc&64)){var Ed=ac.getByte();Sa.dataSize=Ed;Sa.data=ac.getBytes(Ed)}var Vc=Sa.x,Wc=Sa.y,ne=Sa.foregroundColor,Fd=Sa.lines,oe=Sa.dataSize,Xc=Sa.data,Bc=Array(1);Bc[0]=Math.floor((Fd-1)/4)+1;for(var gc=0,pe=0,qe=Sa.opcode-1,Yc=0;Yc<Fd&&Bc[0]<oe;Yc++){var re=Vc,se=Wc;0==Yc%4&&(gc=Xc[pe++]);0==(gc&192)&&(gc|=192);0!=(gc&64)&&(Vc+=kc(Xc,Bc));0!=(gc&128)&&(Wc+=kc(Xc,Bc));Tb(re,se,Vc,Wc,ne,qe);gc<<=2}break;case 27:var xa=
f,ha=X.text2,Ba=u;0!=(Ba&1)&&(ha.font=xa.getByte());0!=(Ba&2)&&(ha.flags=xa.getByte());0!=(Ba&4)&&(ha.opcode=xa.getByte());0!=(Ba&8)&&(ha.mixmode=xa.getByte());0!=(Ba&16)&&(ha.foregroundColor=hb(xa));0!=(Ba&32)&&(ha.backgroundColor=hb(xa));0!=(Ba&64)&&(ha.clipLeft=xa.getLittleEndian16());0!=(Ba&128)&&(ha.clipTop=xa.getLittleEndian16());0!=(Ba&256)&&(ha.clipRight=xa.getLittleEndian16());0!=(Ba&512)&&(ha.clipBottom=xa.getLittleEndian16());0!=(Ba&1024)&&(ha.boxLeft=xa.getLittleEndian16());0!=(Ba&2048)&&
(ha.boxTop=xa.getLittleEndian16());0!=(Ba&4096)&&(ha.boxRight=xa.getLittleEndian16());0!=(Ba&8192)&&(ha.boxBottom=xa.getLittleEndian16());0!=(Ba&16384)&&xa.skipPosition(1);0!=(Ba&32768)&&xa.skipPosition(1);0!=(Ba&65536)&&xa.skipPosition(1);0!=(Ba&131072)&&xa.skipPosition(1);0!=(Ba&262144)&&xa.skipPosition(7);0!=(Ba&524288)&&(ha.x=xa.getLittleEndian16());0!=(Ba&1048576)&&(ha.y=xa.getLittleEndian16());if(0!=(Ba&2097152)){var Gd=xa.getByte();ha.length=Gd;ha.text=xa.getBytes(Gd)}var te=ha.font,ue=ha.flags,
ve=ha.mixmode,we=Fa(ha.foregroundColor),xe=Fa(ha.backgroundColor),Hd=ha.clipLeft,Id=ha.clipTop,ye=ha.clipRight,ze=ha.clipBottom,Cc=ha.boxLeft,Jd=ha.boxTop,Ae=ha.boxBottom,Be=ha.x,Ce=ha.y,De=ha.length,Ee=ha.text,Zc=ha.boxRight-Cc;Cc+Zc>C&&(Zc=C-Cc);N.drawText(te,ue,ve,we,xe,Hd,Id,ye-Hd,ze-Id,Cc,Jd,Zc,Ae-Jd,Be,Ce,De,Ee,ca,ea,da,fa);break;default:svGlobal.logger.warn("XXX Order type "+X.orderType)}0!=(k&4)&&ic();break;case 2:var Kd=b,Ld=p>>2;switch(Ld){case 11:var Dc=Kd,Md=Dc.getLittleEndian16()-3,Fe=
Dc.getPosition()+Md;J.onAltSecWindows(Dc,Md);Dc.setPosition(Fe);break;case 13:Kd.getLittleEndian32();break;default:svGlobal.logger.warn("Alt Sec order:"+Ld)}break;case 3:var ub=b;var Nd=ub.getLittleEndian16();var Ec=ub.getLittleEndian16();var Od=ub.getByte();var Ge=ub.getPosition()+Nd+7;if(ub.has(Nd+7)){switch(Od){case 0:var Pd=void 0,Hb=ub,He=Hb.getByte();Hb.skipPosition(1);var $c=Hb.getByte(),Fc=Hb.getByte(),Gc=Hb.getByte(),Hc=Math.floor((Gc+7)/8),Ie=Hb.getLittleEndian16(),Je=Hb.getLittleEndian16(),
Ke=Hb.getPosition();Hb.skipPosition(Ie);O!=Gc&&(svGlobal.logger.warn("Server limited colour depth to "+Gc+" bits"),t(Gc,!0));var ad=Array($c*Fc*Hc);ad[0]=0;for(var bd=$c*Hc,Ic=0;Ic<Fc;Ic++)Pd=Ke+(Fc-Ic-1)*bd,Hb.copyToByteArray(ad,Ic*bd,Pd,bd);var Le=Mb(ad,Hc);N.putBitmap(He,Je,new rdpcodecs.Bitmap(Le,$c,Fc,0,0,8*Hc,null,0));break;case 1:svGlobal.logger.info("TODO: color cache");break;case 2:var Qd=void 0,lc=void 0,Ta=ub,Me=Ec,Ne=Ta.getByte();Ta.getByte();var cd=Ta.getByte(),dd=Ta.getByte(),mc=Ta.getByte(),
Oe=Math.floor((mc+7)/8),Pe=Ta.getLittleEndian16(),Qe=Ta.getLittleEndian16();O!=mc&&(svGlobal.logger.warn("Server limited colour depth to "+mc+" bits"),t(mc,!0));0!=(Me&1024)?lc=Pe:(Ta.skipPosition(2),lc=Ta.getLittleEndian16(),Ta.skipPosition(2),Ta.skipPosition(2));var Qd=1!=Oe?Db(cd,dd,lc,Ta.getData(),Ta.getPosition()):bc(cd,dd,lc,Ta.getData(),Ta.getPosition()),Re=Ta.getBytes(lc);N.putBitmap(Ne,Qe,new rdpcodecs.Bitmap(Qd,cd,dd,0,0,mc,Re,1));break;case 3:for(var Rd=void 0,ed=void 0,fd=void 0,Sd=void 0,
Td=void 0,Ud=void 0,Vd=void 0,Wd=void 0,Xd=void 0,Yb=ub,Wd=Yb.getByte(),Vd=Yb.getByte(),Yd=0;Yd<Vd;Yd++)Ud=Yb.getLittleEndian16(),Td=Yb.getLittleEndian16(),Sd=Yb.getLittleEndian16(),fd=Yb.getLittleEndian16(),ed=Yb.getLittleEndian16(),Rd=ed*Math.floor((fd+7)/8)+3&-4,Xd=new d(Td,Sd,fd,ed,Yb.getBytes(Rd)),N.putFont(Wd,Ud,Xd);break;case 4:Jc(ub,Ec,!1);break;case 5:Jc(ub,Ec,!0);break;case 7:svGlobal.logger.info("CacheBrush...=");break;case 8:var hc=void 0,Ua=ub,Zd=Ec&7,$d=Ua.getLittleEndian16();Ua.skipPosition(8);
var Kc=Ua.getByte();O!=Kc&&(svGlobal.logger.warn("Server limited colour depth to "+Kc+" bits"),t(Kc,!0));Ua.skipPosition(2);var gd=Ua.getByte(),nc=Ua.getLittleEndian16(),oc=Ua.getLittleEndian16(),ae=Ua.getLittleEndian32(),be=Ua.getPosition();if(1==gd){mb(Ua,Kc,nc,oc);var Se=wb.getData(),Te=wb.getDataSize(),hc=new Uint32Array(Te);rdpcodecs.flipimage(Se,0,hc,nc,oc,1);var Ue=Ua.getPosition()-be;Ua.setPosition(be);var Ve=Ua.getBytes(Ue);N.putBitmap(Zd,$d,new rdpcodecs.Bitmap(hc,nc,oc,0,0,32,Ve,2))}else if(0==
gd){var ce=rdpBitmap.byte2int(Ua.getData(),ae,Ua.getPosition()),hc=new Uint32Array(ce.length);rdpcodecs.flipimage(ce,0,hc,nc,oc,1);N.putBitmap(Zd,$d,new rdpcodecs.Bitmap(hc,nc,oc,0,0,32,null,0))}else svGlobal.logger.warn("XXX invalid codec id:"+gd);Ua.skipPosition(ae);break;default:svGlobal.logger.warn("invalid second Order, type="+Od)}ub.setPosition(Ge)}}a++}}function Jc(b,c,a){var d;var p=c&7;var l=((c&120)>>3)-2;c=(c&65408)>>7;lb!=l&&(t(8*l,!0),svGlobal.logger.warn("Server limited colour depth to "+
l+" bytes"));0!=(c&2)&&b.skipPosition(8);if(0!=(c&1))var f=d=kb.readVar2Bytes(b);else d=kb.readVar2Bytes(b),f=kb.readVar2Bytes(b);var k=kb.readVar4Bytes(b);var e=kb.readVar2Bytes(b);a&&0==(c&8)&&b.skipPosition(8);if(a){a=1!=l?Db(d,f,k,b.getData(),b.getPosition()):bc(d,f,k,b.getData(),b.getPosition());b=b.getBytes(k);if(!a){svGlobal.logger.warn("Failed to decompress bitmap data");return}d=new rdpcodecs.Bitmap(a,d,f,0,0,8*l,b,1)}else{a=Array(d*f*l);a[0]=0;var n=b.getPosition(),h=d*l;for(k=0;k<f;k++){var r=
n+(f-k-1)*h;b.copyToByteArray(a,k*h,r,h)}b=Mb(a,l);d=new rdpcodecs.Bitmap(b,d,f,0,0,8*l,null,0)}N.putBitmap(p,e,d);0!=(c&2)&&svGlobal.logger.warn("XXX:TODO, persistent")}function S(b,c,a){return a?(b=b.getByte()<<24>>24,c+b):c=b.getLittleEndian16()<<16>>16}function hb(b){var c;var a=c=b.getByte();c=b.getByte();a|=c<<8;c=b.getByte();return a|c<<16}function Fb(b){for(var c,a,d,l,p,f,k,e,h,n=b.getLittleEndian16(),r=0;r<n;r++)if(c=b.getLittleEndian16(),a=b.getLittleEndian16(),d=b.getLittleEndian16(),
l=b.getLittleEndian16(),p=b.getLittleEndian16(),f=b.getLittleEndian16(),k=b.getLittleEndian16(),e=b.getLittleEndian16(),h=b.getLittleEndian16(),d=d-c+1,l=l-a+1,O!=k&&(svGlobal.logger.warn("Server limited colour depth to "+k+" bits"),t(k,!0)),0==e){e=p*lb;h=f*e;k=new Uint8Array(h);for(var q=b.getPosition(),u=0;u<f;u++)aa(b.getData(),q,k,(f-u-1)*e,e),q+=e;b.skipPosition(h);k=Mb(k,lb);N.setRGBs(c,a,d,l,k,0,p)}else 0!=(e&1024)?k=h:(b.skipPosition(2),k=b.getLittleEndian16(),b.skipPosition(4)),e=b.getData(),
h=k,q=b.getPosition(),u=a,a=l,l=lb,1>d*a*p*f||(1!=l?N.setRGBs(c,u,d,a,Db(p,f,h,e,q),0,p):(f=bc(p,f,h,e,q),e=u,l=Mb(f,l),N.setRGBs(c,e,d,a,l,0,p))),b.skipPosition(k)}function ic(){ca=0;da=C-1;ea=0;fa=H-1}function Tb(b,c,a,d,l,p){var f=Math.min(b,a),k=Math.max(b,a),e=Math.min(c,d),h=Math.max(c,d);l=Fa(l);if(!(f>=ca&&k<=da&&e>=ea&&h<=fa)){if(f>da||k<ca||e>fa||h<ea)return;if(b==a)c>d&&(f=c,c=d,d=f),c<ea&&(c=ea),d>fa&&(d=fa);else if(c==d)b>a&&(f=b,b=a,a=f),b<ca&&(b=ca),a>da&&(a=da);else{f=X._line;f.set(b,
c,a,d);k=f.intersection(ca,ea,da,ea);e=[];k&&e.push(k.x,k.y);(k=f.intersection(da,ea,da,fa))&&e.push(k.x,k.y);(k=f.intersection(ca,fa,da,fa))&&e.push(k.x,k.y);(k=f.intersection(ca,ea,ca,fa))&&e.push(k.x,k.y);2==e.length&&(b>=ca&&b<=da&&c>=ea&&c<=fa?e.push(b,c):a>=ca&&a<=da&&d>=ea&&d<=fa&&e.push(a,d));if(4!=e.length)return;b=e[0];c=e[1];a=e[2];d=e[3]}}12==p?N.drawLine(b,c,a,d,l):N.drawLineExt(b,c,a,d,l,p)}function kc(b,c){var a=b[c[0]++]&255,d=a&128,a=0!=(a&64)?a|-64:a&63;0!=d&&(a=a<<8|b[c[0]++]&255);
return a}function cb(b){if(J)if(svGlobal.logger.warn("closed "+(J.sessionInfo.appInfo?J.sessionInfo.appInfo.numericId:0)),J&&(bb=!1),oa)svGlobal.logger.info("Req credential");else{X=null;"undefined"!=typeof rdp8bulkData&&rdp8bulkData.release();wb=mb=Ha=v=null;try{if(null!=Aa&&(Aa.exit(),Aa=null),J.onclose)J.onclose(Va);else svGlobal.logger.info("onclose: null")}catch(fb){}Ga=null;Y&&(Y.onopen=null,Y.onmessage=null,Y.onclose=null,Y=Y.onerror=null);Eb=null;sa&&(sa.release(),sa=null);ua&&(ua.release(),
ua=null);J=null}}function zb(b,c,a,d){switch(c){case 16:c=b>>8&248;var l=b>>3&252;b=b<<3&255;a[d]=c|c>>5;a[d+1]=l|l>>6;a[d+2]=b|b>>5;a[d+3]=255;break;case 15:c=b>>7&248;l=b>>2&248;b=b<<3&255;a[d]=c|c>>5;a[d+1]=l|l>>5;a[d+2]=b|b>>5;a[d+3]=255;break;case 8:a[d]=X.paletteRdp[0][b];a[d+1]=X.paletteRdp[1][b];a[d+2]=X.paletteRdp[2][b];a[d+3]=255;break;case 32:a[d]=b&255,a[d+1]=b>>8&255,a[d+2]=b>>16&255,a[d+3]=b>>24&255;default:a[d]=b&255,a[d+1]=b>>8&255,a[d+2]=b>>16&255,a[d+3]=255}}function Mb(b,c){var a=
b.length/c>>0,d=new Uint32Array(a),l=Fa;switch(c){case 1:for(var p=0;p<a;p++)d[p]=l(b[p]);break;case 2:for(p=0;p<a;p++)d[p]=l(b[2*p+1]<<8|b[2*p]);break;default:for(p=0;p<a;p++)d[p]=l(b[p*c+2]<<16)|b[p*c+1]<<8|b[p*c]}return d}this.sessionInfo={domain:"",userName:"",sessionId:0,joinedSessions:[],suppressOutput:!1,appInfo:null};this.mode=0;this.remoteAppLogin=!0;var J=this,Va=!1,oa=!1,M="object"==typeof v?v:null,ma=M?{}:hi5.string.queryToObj(v.substring(v.indexOf("?")+1)),aa=hi5.Arrays.arraycopy,ga=
null,sa=new BulkData,ua=ja(ma.decompressingRDP61)?new Bulk61Data:null;this.protocol=M?"":v.substring(0,v.indexOf("://")).toLowerCase();this.setProfiler=function(b){ga=b};this.getProfiler=function(){return ga};this.gateway=function(){if(M)return"";var b=v.lastIndexOf("/RDP?");-1==b&&(b=v.lastIndexOf("/JOIN?"));-1==b&&(b=v.lastIndexOf("/PLAY?"));return v.substring(0,b).replace(/wss\:\/\//ig,"https://").replace(/ws\:\/\//ig,"http://")}();this.getGatewayAddr=function(){var b=J.gateway;J.ongetgatewayaddress&&
(b=J.ongetgatewayaddress(b));return b};var K="object"==typeof v||0<v.indexOf("/PLAY?"),pa=!K&&0<v.indexOf("invitation=");if(pa){var Da=decodeURIComponent(v),Ea=Da.indexOf(' USERNAME="');0<Ea&&(Ea+=11,Da=Da.substring(Ea,Da.indexOf('"',Ea)),v+="&novice="+Da+"&server="+Da);v+="&mapClipboard=on"}if(K)this.mode=1,M?v="":(C=640,H=480);else if(0<v.indexOf("/JOIN?")||pa)this.mode=2;ma.symlink&&ma.parameters&&hi5.string.queryToObj(ma.parameters,ma);ma.gateway||(v+="&gateway="+encodeURIComponent(J.gateway));
"useSSL"in ma||(v+="&useSSL="+("wss"==J.protocol));this.getDisplayName=ya;this.server=ya();this.port=parseInt(ma.port,10);this.getURL=function(){return v};this.getColor=function(){return O};var Ob=hi5.graphic.Rectangle,Na=0<v.indexOf("nocurosr=on"),nb=0<v.indexOf("startProgram=app");v.indexOf("mapDisk=on");this.isRemoteApp=function(){return nb};var Y=null,bb=!1,Jb=!1,ca=0,ea=0,da=C-1,fa=H-1,lb=0,Aa=null,Fa=za,Db=rdpBitmap.decompressInt16,bc=rdpBitmap.decompress;t(O,!0);this.setColor=function(b){t(b,
!1)};this.setResolution=function(b,c){a(b,c,!1)};var ta={tag:0,channels:0,bitsPerSample:0,samplePerSec:22050,toStream:function(b){b.setLittleEndian16(this.tag);b.setLittleEndian16(this.channels);b.setLittleEndian16(this.bitsPerSample);b.setLittleEndian32(this.samplePerSec)},fromStream:function(b){this.tag=b.getLittleEndian16();this.channels=b.getLittleEndian16();this.bitsPerSample=b.getLittleEndian16();this.samplePerSec=b.getLittleEndian32()}};this.setAudioFormat=function(b){ta.tag=b.tag;ta.channels=
b.channels;ta.samplePerSec=b.samplePerSec;ta.bitsPerSample=b.bitsPerSample};this.running=function(){return bb};this.setJoinMode=function(b){m("8E1"+b)};this.setJoinCloseMode=function(b){m("8EB3\t"+b)};this.refuseControl=function(b){m("8E3"+b)};this.giveControl=function(b){m("8E4"+b)};this.pauseSession=function(b,c){m("8EB"+(c?1:0)+"\t"+b)};this.closeSession=function(b){m("8EB2\t"+b)};this.requestControl=function(){m("8E2")};this.saveSession=function(b){m("8E9"+(b.save?1:0)+"\t"+(b.timeout||0)+"\t"+
(b.id||0))};this.allowJoin=function(b,c){m("8EA"+b+"\t"+(c?1:0))};var Ib=new function(){function b(){if(a&&0<a.length){var c=a.shift();Ib.sendSingleKey(c.down,c.key);0<a.length?setTimeout(b,d):a=null}}var c={" ":57,space:57,pgup:201,pageup:201,pgdn:209,pagedown:209,end:207,home:199,left:203,up:200,right:205,down:208,printscreen:183,insert:210,del:211,"delete":211,altgr:184,windows:219,windowsright:220,context:221,esc:1,backspace:14,tab:15,enter:28,meta:29,command:29,ctrl:29,shift:42,alt:56,capslock:58,
f1:59,f2:60,f3:61,f4:62,f5:63,f6:64,f7:65,f8:66,f9:67,f10:68,f11:87,f12:88,numlock:69,scrolllock:70,add:78};this.sendSingleKey=function(b,a){var d=c[a.toLowerCase()];d?J.writeScancode(b,d):(d=a.length,0!=d&&(1==d?J.writeKeyCode(b,a.toUpperCase().charCodeAt(0)):b&&J.writeText(a)))};var a=null,d=0;this.sendKeyComb=function(c,p){var l=c.split("+"),f=l.length,k;if(0!=f){var e=null,h=[];for(k=0;k<f;k++){var n=l[k];""==n&&""==e&&(n="Add");""!=n&&h.push({key:n,down:!0});e=n}f=h.length;for(k=f-1;0<=k;k--)h.push({key:h[k].key,
down:!1});if(p)a=h,d=p,b();else for(k=0,f=h.length;k<f;k++)Ib.sendSingleKey(h[k].down,h[k].key)}}};this.writeRawInput=function(b){m(b);if(J.onactivity)J.onactivity(b);if(Aa&&b.substring){var c=b.substring(0,2);b=b.substring(2);if("80"==c||"81"==c||"82"==c||"83"==c){b=b.split("\t");var a=new Uint8Array(7),d=0;var p=parseInt(b[0]);var l=parseInt(b[1]);switch(parseInt(c,16)){case 128:d=("0"==b[2]?4096:8192)|32768;break;case 129:d="0"==b[2]?4096:8192;break;case 130:d=2048;break;case 131:d="0"==b[2]?33408:
33664}a[0]=32;a[1]=d&255;a[2]=d>>8;a[3]=p&255;a[4]=p>>8;a[5]=l&255;a[6]=l>>8;Aa.add(new RecordingObj(a,0,7,60))}}};var X=new A,na=0;this.resetStatus=u;this.notify=function(b,c){b="8E6"+b;c&&(b+="\t"+c.join(";"));m(b)};this.run=function(){D()};this.getDesktop=function(){return N};var Ga=new hi5.DataBuffer([],0,0);this.suppressOutput=function(b){if(!J.sessionInfo.suppressOutput)return!1;void 0==b&&(b=!0);var c=new Uint8Array(b?3:11);c[0]=146;c[1]=3;c[2]=b?1:0;b||(c[3]=0,c[4]=0,c[5]=0,c[6]=0,c[7]=C-
1,c[8]=C-1>>8,c[9]=H-1,c[10]=H-1>>8);Y.send(c.buffer);return!0};this.refreshOutput=function(b,c,a,d){var p=new Uint8Array(a?11:3);p[0]=146;p[1]=3;p[2]=2;a&&(p[3]=b,p[4]=b>>8,p[5]=c,p[6]=c>>8,p[7]=a,p[8]=a>>8,p[9]=d,p[10]=d>>8);Y.send(p.buffer)};this.sendKeyboardSynchronize=function(b,c,a){var d=0;a&&(d|=4);c&&(d|=2);b&&(d|=1);m("8E5"+d);svGlobal.logger.info("keyboard sync, capital:"+a+" numlock:"+c+" scroll:"+b)};var Eb=new function(){var b=0,c=0,a=[0],d=new hi5.DataBuffer(a,0,0);this.addFragement=
function(d,p){aa(d.getData(),d.getPosition(),a,c,p);c+=p;b+=p};this.clearFragements=function(){d.setPosition(0);d.markEnd(b);c=b=0;return d}},Ha=new rdpcodecs.RemoteFX(P),wb=new rdpcodecs.NSCodec,mb=wb.process,Gb=[1,2,1,0,0,0,0,1,1,2,1,1,0,2,3,1,2,2,2,2,1,2,1,0,2,1,2,3],kb={readVar4Bytes:function(b){var c=b.getByte(),a=0;switch((c&192)>>6){case 0:a=c&63;break;case 1:a=(c&63)<<8|b.getByte();break;case 2:a=(c&63)<<16;c=b.getByte();a|=c<<8;c=b.getByte();a|=c;break;case 3:a=(c&63)<<24,c=b.getByte(),a|=
c<<16,c=b.getByte(),a|=c<<8,c=b.getByte(),a|=c}return a},readVar2Bytes:function(b){var c=b.getByte();return 0!=(c&128)?(c&127)<<8|b.getByte():c}};this._unload=cb;this.close=function(){Va=!0;svGlobal.logger.info("closing...");if(Y&&Y.readyState!=WebSocket.CLOSING&&Y.readyState!=WebSocket.CLOSED)try{for(;Y&&Y.readyState!=WebSocket.CLOSING&&Y.readyState!=WebSocket.CLOSED;)K||Y.readyState!=WebSocket.OPEN||m("85-1"),Y.close()}finally{cb()}else cb()}}
function BulkData(){function v(a){a=(a&1431655765)<<1|a>>>1&1431655765;a=(a&858993459)<<2|a>>>2&858993459;a=(a&252645135)<<4|a>>>4&252645135;if(0==a>>>8)return a;a=(a&16711935)<<8|a>>>8&16711935;return 0==a>>>16?a:(a&65535)<<16|a>>>16&65535}function C(a,f,e,l){var d=0,h=0,k,n,r=0!=(l&1),q=O;if(0==(l&32))return P=0,y=e,0;0!=(l&64)&&(H=0);if(0!=(l&128)){for(l=65536;0<=--l;)q[l]=0;H=0}y=P=0;P=n=k=l=H;if(0==e)return 0;e+=h;do{if(0==d){if(h>=e)break;l=a[f+h++]<<24;d=8}if(0<=l){if(8>d){if(h>=e){if(0!=l)return-1;
break}l|=a[f+h++]<<24-d;d+=8}if(65536<=k)return-1;q[k++]=l>>>24&255;l<<=8;d-=8}else{l<<=1;if(0==--d){if(h>=e)return-1;l=a[f+h++]<<24;d=8}if(0<=l){if(8>d){if(h>=e)return-1;l|=a[f+h++]<<24-d;d+=8}if(65536<=k)return-1;q[k++]=(l>>>24|128)&255;l<<=8;d-=8}else{l<<=1;if(--d<(r?3:2)){if(h>=e)return-1;l|=a[f+h++]<<24-d;d+=8}if(r)switch(l>>>29){case 7:for(;9>d;d+=8){if(h>=e)return-1;l|=a[f+h++]<<24-d}l<<=3;var u=l>>>26;l<<=6;d-=9;break;case 6:for(;11>d;d+=8){if(h>=e)return-1;l|=a[f+h++]<<24-d}l<<=3;u=(l>>>
24)+64;l<<=8;d-=11;break;case 5:case 4:for(;13>d;d+=8){if(h>=e)return-1;l|=a[f+h++]<<24-d}l<<=2;u=(l>>>21)+320;l<<=11;d-=13;break;default:for(;17>d;d+=8){if(h>=e)return-1;l|=a[f+h++]<<24-d}l<<=1;u=(l>>>16)+2368;l<<=16;d-=17}else switch(l>>>30){case 3:if(8>d){if(h>=e)return-1;l|=a[f+h++]<<24-d;d+=8}l<<=2;u=l>>>26;l<<=6;d-=8;break;case 2:for(;10>d;d+=8){if(h>=e)return-1;l|=a[f+h++]<<24-d}l<<=2;u=(l>>>24)+64;l<<=8;d-=10;break;default:for(;14>d;d+=8){if(h>=e)return-1;l|=a[f+h++]<<24-d}u=(l>>>18)+320;
l<<=14;d-=14}if(0==d){if(h>=e)return-1;l=a[f+h++]<<24;d=8}if(0<=l){var t=3;l<<=1;d--}else{var m=r?14:11;do{l<<=1;if(0==--d){if(h>=e)return-1;l=a[f+h++]<<24;d=8}if(0<=l)break;if(0==--m)return-1}while(1);t=(r?16:13)-m;l<<=1;if(--d<t)for(;d<t;d+=8){if(h>=e)return-1;l|=a[f+h++]<<24-d}m=t;t=l>>>32-m&~(-1<<m)|1<<m;l<<=m;d-=m}if(65536<=k+t)return-1;u=k-u&(r?65535:8191);do q[k++]=q[u++];while(0!=--t)}}}while(1);H=k;P=n;y=k-n;return 0}var H=0,O=new Uint8Array(65536),N=new Int32Array(8),P=0,y=0,ja=[6,6,6,7,
7,7,7,7,7,7,7,8,8,8,8,8,8,8,9,8,9,9,9,9,8,8,9,9,9,9,9,9,8,9,9,10,9,9,9,9,9,9,9,10,9,10,10,10,9,9,10,9,10,9,10,9,9,9,10,10,9,10,9,9,8,9,9,9,9,10,10,10,9,9,10,10,10,10,10,10,9,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,9,7,9,9,10,9,10,10,10,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,10,10,10,10,10,10,11,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,10,
10,10,10,9,10,10,10,10,10,9,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,8,9,9,10,9,10,10,10,9,10,10,10,9,9,8,7,13,13,7,7,10,7,7,6,6,6,6,5,6,6,6,5,6,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,8,5,6,7,7],ya=[123,65311,65293,65063,65024,65285,65303,65128,197,65031,65299,65216,65288,65048,65307,65203,65027,162,65090,65296,65035,65026,65169,65305,65152,233,65082,65301,65042,87,65239,65309,65294,65077,65129,65314,65304,65146,65025,65315,65300,65268,65204,65033,
65308,65220,65289,65120,65136,65298,65029,65170,65185,65306,65039,65287,65110,65302,65282,65240,65256,65310,65053,59,65535,65286,65535,65137,65161,65535,65535,65068,65067,65056,65535,65211,65231,65032,65535,65248,65037,65535,65177,65535,65028,65194,65097,65535,65047,65121,65247,65535,65279,65270,65100,65535,65535,65159,65535,65316,65535,65084,65138,65535,65535,65230,65535,65278,65535,65059,65212,65034,65193,65535,65041,65535,65154,65535,65030,65178,65269,65535,65058,65101,65119,65535,65283,65249,
65535,65226,65228,65535,65049,65535,65207,65535,65535,65155,65065,65535,65535,65535,65132,65535,65261,65535,65535,65094,65116,65045,65535,65243,65190,65535,65535,65092,65535,65036,65535,65173,65276,65535,65535,65208,5833,65535,65264,65535,65080,65535,65535,65133,65150,65535,65535,65535,65535,65115,65244,65535,65535,65260,65095,65055,65535,65151,65174,65535,65535,65189,65535,65040,65088,65074,65215,65535,65535,65236,65265,65535,65535,65535,65141,65535,65535,65165,65073,65535,65125,65051,65535,65252,
65275,65535,65535,65106,65535,65038,65535,65181,65199,65535,65535,65105,65235,65535,65312,65535,65071,65535,65535,65217,65164,65535,65535,65535,65087,65535,65535,65142,65535,65274,65107,65061,65535,65124,65253,65535,65535,65198,65535,65043,65535,65160,65182,65535,65091,65535,65535,65188,65171,65535,65535,65535,65085,65535,65535,65259,65241,65535,65044,65114,65535,65064,65149,65535,65535,65130,65535,65535,65281,65222,65224,65535,65535,65205,65535,65535,65535,65172,65144,65535,65535,65535,65187,65535,
65535,65242,65112,65535,65054,65093,65258,65535,65131,65535,65535,65079,65535,65535,65535,65148,65206,65535,65535,65272,65535,65535,65535,65223,65179,65535,65535,65535,65104,65535,65535,65197,65250,65535,65050,65123,65102,65535,65535,65273,65535,65139,65535,65535,65535,65072,65163,65535,65535,65213,65070,256,65535,65262,65234,65535,65535,65535,65196,65535,65535,65180,65156,65535,65060,65103,65271,65535,65535,65251,65122,65535,65535,65535,65535,65162,65140,65535,65535,65086,65535,65535,65535,65233,
65214,65535,65535,65069,65535,65098,65267,65535,65535,65245,65118,65046,65535,65096,65192,65535,65195,65175,65535,65535,65232,65535,65535,65229,65209,65535,65535,65535,65066,65535,65535,65158,65134,65535,65535,65535,65246,65535,65535,65117,65099,65057,65535,65263,65176,65535,65535,65153,65535,65535,65535,65191,65535,65210,65277,65535,65535,65535,65227,65535,65535,65135,65081,65535,65535,65535,65157,65535,268,65254,65127,65052,65535,65108,65202,65535,65535,65183,65535,65535,65535,65113,65201,65535,
65218,65535,65535,65078,65266,65535,65535,65238,65143,65535,65535,65535,65075,65535,65535,65167,65109,65062,266,65284,65255,65535,289,65126,65535,65535,65535,65200,65184,65535,271,65168,65535,65535,65237,65535,65535,65219,65076,65535,65535,65535,65166,65535,273,65145,65089,267],za=[511,0,508,448,494,347,486,482],h=[4,2,3,4,3,4,4,5,4,5,5,6,6,7,7,8,7,8,8,9,9,8,9,9,9,9,9,9,9,9,9,9],W=[4065,4064,4066,4072,14,4069,4068,4074,4081,4067,21,4071,4079,70,4080,4077,4095,4087,4091,25,4093,4084,300,4075,4094,
4086,4090,137,4092,4083,4088,4082],x=[0,4,10,19],t=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,32769,49153,65537],m=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,6,6,8,8,14,14],q=[2,3,4,5,6,7,8,9,10,12,14,16,18,22,26,30,34,42,50,58,66,82,98,114,130,194,258,514,2,2],e=new hi5.DataBuffer(O,0,1),n=hi5.Arrays.arraycopy,f=hi5.Arrays.fill;this.reset=function(){H=
0;O=new Uint8Array(65536);y=P=0;e=new hi5.DataBuffer(O,0,1)};this.release=function(){O=e=N=null};this.getArrayBuffer=function(){return O.buffer.slice(P,P+y)};this.getData=function(){e.setPosition(P);e.markEnd(P+y);return e};this.toPDU=function(){var a=new Uint8Array(65576);a[0]=29;a[2]=1;a[3]=2;a[4]=H;a[5]=H>>8;a[6]=H>>16;a[7]=H>>24;a.set(O,8);a.set(new Uint8Array(N.buffer),65544);return a};this.fromStream=function(a){H=a.getLittleEndian32();var d=a.getPosition();O.set(a.getData().subarray(d,d+65536));
a.skipPosition(65536);for(d=0;8>d;d++)N[d]=a.getLittleEndian32()};this.getDecompressedLength=function(){return y};this.dec5=function(a,f,e,l){return C(a,f,e,l)};this.dec=function(d,e,z,l){if(2==(l&15)){var p=O,r=N,k=H,w=0,R=e,A=0,u=0,D=0;y=0;P=k;0!=(l&64)&&(n(p,k-32768,p,0,32768),P=H=k=32768);0!=(l&128)&&(k=0,f(p,0,65536,0),f(r,0,r.length,0),P=0);if(32!=(l&32))n(d,0,p,k,z),k+=z,y=k-H;else{var G=0;for(var ia=e+z;R<ia&&!(D=d[R++],w|=D<<G,u+=8,G+=8,32<=G););w=v(w);R<ia?(A=v(d[R++])&255,z=8):z=0;for(;8<=
u;){e=0;for(G=5;13>=G;G++)if(12!=G){D=v(w&4294967295<<32-G);var c=ya[D&511^D>>>9^D>>>4^D>>>7];0!=(c^D)>>>9?D=c&511:(c=(D>>>8^D&255)>>>2&15,0!=D>>>9&&(c=~c),D=ya[za[(c&65535)%12]]);if(G==ja[D])break}w<<=G;u-=G;if(256>D)p[k++]=D&255;else if(256<D&&289>D){c=D-257;G=t[c];e=a[c]-1;0!=G&&(e+=v(w&4294967295<<32-G));c=r;var gb=e;var Ca=c[2]|c[3]<<16,Ca=Ca<<16;c[2]=Ca&65535;c[3]=Ca>>>16&65535;var db=c[0]|c[1]<<16,Ca=Ca|db>>>16;c[2]=Ca&65535;c[3]=Ca>>>16&65535;db=db<<16|gb;c[0]=db&65535;c[1]=db>>>16&65535;
w<<=G;u-=G}else if(288<D&&293>D)c=D-289,e=r[c],0!=c&&(G=r,gb=G[0],G[0]=G[c],G[c]=gb);else if(256==D)break;for(G=32-u;0<G;)if(z<G)D=A>>>8-z,w|=D<<32-u-z,u+=z,G-=z,R<ia?(A=v(d[R++])&255,z=8):z=G=0;else{z>G?(w|=A>>>8-G,A<<=G,A&=255,z-=G,u=32):(w|=A>>>8-G,u=32,R<ia?(A=v(d[R++])&255,z=8):z=0);break}if(0!=e){for(G=2;9>=G&&(D=v(w&4294967295<<32-G),c=W[D&31^D>>>5^D>>>9],0!=(c^D)>>>5?D=c&31:(D=D>>>4&15,D=W[x[(D^D>>>2^D>>>3)&3]]),G!=h[D]);G++);w<<=G;u-=G;G=m[D];c=q[D];0!=G&&(c+=v(w&4294967295<<32-G));w<<=G;
u-=G;gb=k-e;G=c>e?e:c;for(D=0;0<G;)p[k++]=p[gb++],G--;for(;c>e;)D=D>=e?0:D,p[k++]=p[gb+D++],c--;for(G=32-u;0<G;)if(z<G)D=A>>>8-z,w|=D<<32-u-z,u+=z,G-=z,R<ia?(A=v(d[R++])&255,z=8):z=G=0;else{z>G?(w|=A>>>8-G,A<<=G,A&=255,z-=G,u=32):(w|=A>>>8-G,u=32,R<ia?(A=v(d[R++])&255,z=8):z=0);break}}}y=0!=(l&128)?k:k-H}H=k;return 0}return C(d,e,z,l)}}
function Bulk61Data(){var v=0,C=new Uint8Array(2E6),H=0,O=0,N=new hi5.DataBuffer(C,0,1),P=hi5.Arrays.arraycopy;this.reset=function(){v=0;C=new Uint8Array(2E6);O=H=0;N=new hi5.DataBuffer(C,0,1)};this.release=function(){C=N=null};this.getArrayBuffer=function(){return C.buffer.slice(H,H+O)};this.getData=function(){N.setPosition(H);N.markEnd(H+O);return N};this.toPDU=function(){var y=new Uint8Array(2000008);y[0]=29;y[2]=1;y[3]=9;y[4]=v;y[5]=v>>8;y[6]=v>>16;y[7]=v>>24;y.set(C,8);return y};this.fromStream=
function(y){v=y.getLittleEndian32();var H=y.getPosition();C.set(y.getData().subarray(H,H+2E6))};this.getDecompressedLength=function(){return O};this.dec=function(y,N,ya,za){0!=(za&4)&&(v=0);H=v;O=0;var h=N;if(0==(za&2)){var W=y[h++]|y[h++]<<8;za=h+8*W;for(var x=0;x<W;x++){var t=y[h++]|y[h++]<<8,a=y[h++]|y[h++]<<8,m=y[h++]|y[h++]<<8|y[h++]<<16|y[h++]<<24;var q=a-O;P(y,za,C,v,q);v+=q;za+=q;O=a;for(q=0;q<t;q++)C[v++]=C[m++],O++}}else za=h;if(q=N+ya-za)P(y,za,C,v,q),O+=q,v+=q;return 0}}
var rdpBitmap=rdpcodecs.bitmap;
function MSGSMEncoder(){function v(c,a){return-32768==c&&-32768==a?32767:c*a>>15<<16>>16}function C(c,a){return-32768==c&&-32768==a?32767:c*a+16384>>15<<16>>16}function H(c,a){if(0>=c){if(0<=a)return c+a;var d=-(c+1)-(a+1);return 2147483647<=d?-2147483648:-d-2}if(0>=a)return c+a;d=c+a;return 2147483647<d?2147483647:d}function O(c){if(0>c){if(-1073741824>=c)return 0;c=~c}return(0!=(c&4294901760)?0!=(c&4278190080)?-1+B[255&c>>24]:7+B[255&c>>16]:0!=(c&65280)?15+B[255&c>>8]:23+B[255&c])<<16>>16}function N(c,
a){return 16<=a?0>c?-1:-0:-16>=a?0:0>a?c<<-a<<16>>16:c>>a<<16>>16}function P(c,a,d,l,f,p){c=v(c<<16>>16,f[p]);a=c+(a<<16>>16);a=(-32768>a?-32768:32767<a?32767:a)+256;c=(-32768>a?-32768:32767<a?32767:a)>>9<<16>>16;f[p]=(c>d?d-l:c<l?0:c-l)<<16>>16}function y(a,d){var c=ia[a+3*d]>>2<<16>>16;return c*c}function ja(a,d,l,f,p,e,k){a=a[l]+e;p=((-32768>a?-32768:32767<a?32767:a)<<26>>16)-(p<<17>>16);f=C(k,-32768>p?-32768:32767<p?32767:p);k=f+f;d[l]=-32768>k?-32768:32767<k?32767:k}function ya(a){for(var c,
d,l=0;8>l;l++)0>a[l]?(c=(-32768==a[l]?32767:-a[l])<<16>>16,d=(c>>2<<16>>16)+26112,a[l]=-(11059>c?c<<1:20070>c?c+11059:-32768>d?-32768:32767<d?32767:d)<<16>>16):(c=a[l],d=(c>>2<<16>>16)+26112,a[l]=(11059>c?c<<1:20070>c?c+11059:-32768>d?-32768:32767<d?32767:d)<<16>>16)}function za(a,d,l,f,p){for(var c=a.u,e,k,h,n,q,r;0!=l;){l--;e=n=f[p];for(r=0;8>r;r++)h=c[r],q=d[r],c[r]=n,k=C(q,e),n=h+k,n=-32768>n?-32768:32767<n?32767:n,k=C(q,h),e+=k,e=-32768>e?-32768:32767<e?32767:e;f[p++]=e}a.u=c}var h=[6554,16384,
26214,32767],W=[29128,26215,23832,21846,20165,18725,17476,16384],x=[18431,20479,22527,24575,26623,28671,30719,32767],t=new function(){this.dp0=new Int16Array(280);this.mp=this.l_z2=this.z1=0;this.u=new Int16Array(8);this.larpp=[new Int16Array(8),new Int16Array(8)];this.j=0;this.nrp=40;this.v=new Int16Array(9);this.msr=0},a=new Int16Array(8),m=new Int16Array(4),q=new Int16Array(4),e=new Int16Array(4),n=new Int16Array(4),f=new Int16Array(52),d=new Int16Array(160),r=new Uint8Array(33),z=0,l=hi5.Arrays.arraycopy;
this.encode=function(c,B,Ca,db){for(var gb=B,ka,Ma=0;160>Ma;Ma++)ka=c[gb++],d[Ma]=0>ka?32768*ka:32767*ka;p=!p;for(var E=0,xb=0,eb=0,Ka=0,yb=120,Pb=new Int16Array(50),I=new Int16Array(160),Zb=0,Jc=0,S=t.z1,hb=t.l_z2,Fb=t.mp,ic,Tb,kc,cb,zb,Mb,J=160;0!=J;){J--;cb=d[Zb++]>>3<<2<<16>>16;ic=cb-S<<16>>16;S=cb;zb=ic;zb<<=15;Tb=hb>>15<<16>>16;kc=hb-(Tb<<15)<<16>>16;zb+=C(kc,32735);Mb=32735*Tb;hb=H(Mb,zb);Mb=H(hb,16384);Tb=C(Fb,-28180);var Fb=Mb>>15<<16>>16,Va=Fb+Tb;I[Jc++]=-32768>Va?-32768:32767<Va?32767:
Va}t.z1=S;t.l_z2=hb;t.mp=Fb;var oa,M=0,ma=0,aa;for(aa=0;159>=aa;aa++){var ga=I[aa]+0;var sa=-32768>ga?-32768:32767<ga?32767:ga;sa>ma&&(ma=sa)}var ua=0==ma?0:4-O(ma<<16)<<16>>16;if(0<ua)switch(ua){case 1:for(aa=0;159>=aa;aa++)I[aa]=C(I[aa],16384);break;case 2:for(aa=0;159>=aa;aa++)I[aa]=C(I[aa],8192);break;case 3:for(aa=0;159>=aa;aa++)I[aa]=C(I[aa],4096);break;case 4:for(aa=0;159>=aa;aa++)I[aa]=C(I[aa],2048)}var K=I[M];l([0,0,0,0,0,0,0,0,0],0,k,0,k.length);k[0]+=K*I[M-0];K=I[++M];k[0]+=K*I[M-0];k[1]+=
K*I[M-1];K=I[++M];k[0]+=K*I[M-0];k[1]+=K*I[M-1];k[2]+=K*I[M-2];K=I[++M];k[0]+=K*I[M-0];k[1]+=K*I[M-1];k[2]+=K*I[M-2];k[3]+=K*I[M-3];K=I[++M];k[0]+=K*I[M-0];k[1]+=K*I[M-1];k[2]+=K*I[M-2];k[3]+=K*I[M-3];k[4]+=K*I[M-4];K=I[++M];k[0]+=K*I[M-0];k[1]+=K*I[M-1];k[2]+=K*I[M-2];k[3]+=K*I[M-3];k[4]+=K*I[M-4];k[5]+=K*I[M-5];K=I[++M];k[0]+=K*I[M-0];k[1]+=K*I[M-1];k[2]+=K*I[M-2];k[3]+=K*I[M-3];k[4]+=K*I[M-4];k[5]+=K*I[M-5];k[6]+=K*I[M-6];K=I[++M];k[0]+=K*I[M-0];k[1]+=K*I[M-1];k[2]+=K*I[M-2];k[3]+=K*I[M-3];k[4]+=
K*I[M-4];k[5]+=K*I[M-5];k[6]+=K*I[M-6];k[7]+=K*I[M-7];++M;for(oa=M;160>oa;++oa)K=I[oa],k[0]+=K*I[oa-0],k[1]+=K*I[oa-1],k[2]+=K*I[oa-2],k[3]+=K*I[oa-3],k[4]+=K*I[oa-4],k[5]+=K*I[oa-5],k[6]+=K*I[oa-6],k[7]+=K*I[oa-7],k[8]+=K*I[oa-8];for(aa=0;9>aa;aa++)k[aa]<<=1;if(0<ua)for(aa=0;160>aa;aa++)I[aa]<<=ua;var pa=new Int16Array(1),Da=0,Ea,Ob=new Int16Array(9),Na=new Int16Array(9),nb=new Int16Array(9);if(0==k[0])for(Ea=0;8>Ea;Ea++)a[Ea]=0;else{pa[0]=O(k[0]);for(Ea=0;8>=Ea;Ea++)Ob[Ea]=k[Ea]<<pa[0]>>16;l(Ob,
0,nb,0,7);l(Ob,0,Na,0,8);for(var Y=1;8>=Y;Y++,Da++){pa[0]=Na[1];pa[0]=(0>pa[0]?-32768==pa[0]?32767:-pa[0]:pa[0])<<16>>16;if(Na[0]<pa[0]){for(Ea=Y;8>Ea;Ea++)a[Ea]=0;break}var bb=Da;var Jb=pa[0],ca=Jb,ea=Na[0],da=0,fa=15;if(0==Jb)var lb=0;else{for(;0!=fa;)fa--,da=da<<17>>16,ca<<=1,ca>=ea&&(ca-=ea,da++);lb=da<<16>>16}a[bb]=lb;0<Na[1]&&(a[Da]=-a[Da]);if(8==Y)break;pa[0]=C(Na[1],a[Da]);var Aa=Na[0]+pa[0];Na[0]=-32768>Aa?-32768:32767<Aa?32767:Aa;for(var Fa=1;Fa<=8-Y;Fa++){pa[0]=C(nb[Fa],a[Da]);var Db=Na[Fa+
1]+pa[0];Na[Fa]=-32768>Db?-32768:32767<Db?32767:Db;pa[0]=C(Na[Fa+1],a[Da]);var bc=nb[Fa]+pa[0];nb[Fa]=-32768>bc?-32768:32767<bc?32767:bc}}}for(var ta,Ib=0;8>Ib;Ib++)ta=a[Ib],ta=(0>ta?-32768==ta?32767:-ta:ta)<<16>>16,22118>ta?ta>>=1:31130>ta?ta-=11059:(ta-=26112,ta<<=2),a[Ib]=0>a[Ib]?-ta:ta;var X=0;P(20480,0,31,-32,a,X++);P(20480,0,31,-32,a,X++);P(20480,2048,15,-16,a,X++);P(20480,-2560,15,-16,a,X++);P(13964,94,7,-8,a,X++);P(15360,-1792,7,-8,a,X++);P(8534,-341,3,-4,a,X++);P(9036,-1144,3,-4,a,X++);var na=
new Int16Array(8),Ga=t.j;var Eb=Ga^1;t.j=Eb;var Ha=t.larpp[Ga],wb=t.larpp[Eb],mb=0;ja(a,Ha,mb++,0,0,-32,13107);ja(a,Ha,mb++,0,0,-32,13107);ja(a,Ha,mb++,0,2048,-16,13107);ja(a,Ha,mb++,0,-2560,-16,13107);ja(a,Ha,mb++,0,94,-8,19223);ja(a,Ha,mb++,0,-1792,-8,17476);ja(a,Ha,mb++,0,-341,-4,31454);ja(a,Ha,mb++,0,-1144,-4,29708);for(var Gb=0;8>Gb;Gb++){var kb=(wb[Gb]>>2<<16>>16)+(Ha[Gb]>>2<<16>>16);na[Gb]=-32768>kb?-32768:32767<kb?32767:kb;var b=na[Gb]+(wb[Gb]>>1<<16>>16);na[Gb]=-32768>b?-32768:32767<b?32767:
b}ya(na);za(t,na,13,I,0);for(var fb=0;8>fb;fb++){var Lc=(wb[fb]>>1<<16>>16)+(Ha[fb]>>1<<16>>16);na[fb]=-32768>Lc?-32768:32767<Lc?32767:Lc}ya(na);za(t,na,14,I,13);for(var Nb=0;8>Nb;Nb++){var Mc=(wb[Nb]>>2<<16>>16)+(Ha[Nb]>>2<<16>>16);na[Nb]=-32768>Mc?-32768:32767<Mc?32767:Mc;var Nc=na[Nb]+(Ha[Nb]>>1<<16>>16);na[Nb]=-32768>Nc?-32768:32767<Nc?32767:Nc}ya(na);za(t,na,13,I,27);for(var pc=0;8>pc;pc++)na[pc]=Ha[pc];ya(na);za(t,na,120,I,40);for(var cc=t.dp0,vb,qc,Oc=0;3>=Oc;Oc++,xb+=13){for(var hd=I,id=40*
Oc,de=Pb,jd=cc,ee=cc,kd=yb,ld=m,md=e,Pc=eb++,Wa=void 0,Qc=void 0,nd=void 0,od=void 0,dc=void 0,Qb=void 0,rc=void 0,T=void 0,pd=hd,qd=id,Z=jd,L=kd,Rc=md,fe=ld,sc=Pc,Q=new Int16Array(40),tc=0,ob=0;39>=ob;ob++)Wa=pd[ob+qd],Wa=(0>Wa?-32768==Wa?32767:-Wa:Wa)<<16>>16,Wa>tc&&(tc=Wa);Wa=0;0!=tc&&(Wa=O(tc<<16));Qc=6<Wa?0:6-Wa<<16>>16;for(ob=0;39>=ob;ob++)Q[ob]=pd[ob+qd]>>Qc;Qb=0;for(T=rc=40;120>=T;T++){var F=1;var U=Q[0]*Z[L-T];U+=Q[1]*Z[F+L-T];F++;U+=Q[2]*Z[F+L-T];F++;U+=Q[3]*Z[F+L-T];F++;U+=Q[4]*Z[F+L-T];
F++;U+=Q[5]*Z[F+L-T];F++;U+=Q[6]*Z[F+L-T];F++;U+=Q[7]*Z[F+L-T];F++;U+=Q[8]*Z[F+L-T];F++;U+=Q[9]*Z[F+L-T];F++;U+=Q[10]*Z[F+L-T];F++;U+=Q[11]*Z[F+L-T];F++;U+=Q[12]*Z[F+L-T];F++;U+=Q[13]*Z[F+L-T];F++;U+=Q[14]*Z[F+L-T];F++;U+=Q[15]*Z[F+L-T];F++;U+=Q[16]*Z[F+L-T];F++;U+=Q[17]*Z[F+L-T];F++;U+=Q[18]*Z[F+L-T];F++;U+=Q[19]*Z[F+L-T];F++;U+=Q[20]*Z[F+L-T];F++;U+=Q[21]*Z[F+L-T];F++;U+=Q[22]*Z[F+L-T];F++;U+=Q[23]*Z[F+L-T];F++;U+=Q[24]*Z[F+L-T];F++;U+=Q[25]*Z[F+L-T];F++;U+=Q[26]*Z[F+L-T];F++;U+=Q[27]*Z[F+L-T];
F++;U+=Q[28]*Z[F+L-T];F++;U+=Q[29]*Z[F+L-T];F++;U+=Q[30]*Z[F+L-T];F++;U+=Q[31]*Z[F+L-T];F++;U+=Q[32]*Z[F+L-T];F++;U+=Q[33]*Z[F+L-T];F++;U+=Q[34]*Z[F+L-T];F++;U+=Q[35]*Z[F+L-T];F++;U+=Q[36]*Z[F+L-T];F++;U+=Q[37]*Z[F+L-T];F++;U+=Q[38]*Z[F+L-T];F++;U+=Q[39]*Z[F+L-T];U>Qb&&(rc=T<<16>>16,Qb=U)}fe[sc]=rc;Qb=Qb<<1>>6-Qc;for(ob=dc=0;39>=ob;ob++){var rd=Z[ob-rc+L]>>3<<16>>16;dc+=rd*rd}dc<<=1;if(0>=Qb)Rc[sc]=0;else if(Qb>=dc)Rc[sc]=3;else for(var Wa=O(dc),od=Qb<<Wa>>16<<16>>16,nd=dc<<Wa>>16<<16>>16,uc=0;2>=
uc&&!(od<=v(nd,h[uc]));uc++)Rc[sc]=uc;var Qa=void 0,V=void 0,Rb=void 0,vc=ld[Pc],wc=jd,xc=hd,yc=id,Sb=ee,zc=de,pb=kd;switch(md[Pc]){case 0:Rb=3277;for(V=0;39>=V;V++)Sb[V+pb]=C(Rb,wc[V-vc+pb]),Qa=xc[V+yc]-Sb[V+pb],zc[V+5]=-32768>Qa?-32768:32767<Qa?32767:Qa;break;case 1:Rb=11469;for(V=0;39>=V;V++)Sb[V+pb]=C(Rb,wc[V-vc+pb]),Qa=xc[V+yc]-Sb[V+pb],zc[V+5]=-32768>Qa?-32768:32767<Qa?32767:Qa;break;case 2:Rb=21299;for(V=0;39>=V;V++)Sb[V+pb]=C(Rb,wc[V-vc+pb]),Qa=xc[V+yc]-Sb[V+pb],zc[V+5]=-32768>Qa?-32768:32767<
Qa?32767:Qa;break;case 3:for(Rb=32767,V=0;39>=V;V++)Sb[V+pb]=C(Rb,wc[V-vc+pb]),Qa=xc[V+yc]-Sb[V+pb],zc[V+5]=-32768>Qa?-32768:32767<Qa?32767:Qa}for(var sd=Pb,ge=n,td=q,Sc=Ka++,ud=f,vd=xb,va=new Int16Array(13),wd=new Int16Array(13),$b=void 0,Pa=sd,Ia=0;39>=Ia;Ia++)$b=4096,$b+=-134*Pa[Ia+0]+-374*Pa[Ia+1]+2054*Pa[Ia+3]+5741*Pa[Ia+4]+8192*Pa[Ia+5]+5741*Pa[Ia+6]+2054*Pa[Ia+7]+-374*Pa[Ia+9]+-134*Pa[Ia+10],$b=$b>>13<<16>>16,ia[Ia]=-32768>$b?-32768:32767<$b?32767:$b;var xd=void 0,ec=void 0,La=void 0,he=va,
ie=td,je=Sc,jc=0,xd=La=0+(y(0,1)+y(0,2)+y(0,3)+y(0,4)+y(0,5)+y(0,6)+y(0,7)+y(0,8)+y(0,9)+y(0,10)+y(0,11)+y(0,12)),La=La+y(0,0),ec=La<<1,La=0+(y(1,0)+y(1,1)+y(1,2)+y(1,3)+y(1,4)+y(1,5)+y(1,6)+y(1,7)+y(1,8)+y(1,9)+y(1,10)+y(1,11)+y(1,12)),La=La<<1;La>ec&&(jc=1,ec=La);La=0+(y(2,0)+y(2,1)+y(2,2)+y(2,3)+y(2,4)+y(2,5)+y(2,6)+y(2,7)+y(2,8)+y(2,9)+y(2,10)+y(2,11)+y(2,12));La<<=1;La>ec&&(jc=2,ec=La);La=xd+y(3,12);La<<=1;La>ec&&(jc=3);for(var Ac=0;12>=Ac;Ac++)he[Ac]=ia[jc+3*Ac];ie[je]=jc;for(var Ja=void 0,
la=void 0,qb=void 0,rb=void 0,yd=void 0,zd=void 0,qa=void 0,Xa=void 0,ib=void 0,Ad=va,ke=ud,le=vd,Kb=ge,Ra=Sc,sb=0,la=0;12>=la;la++)qa=Ad[la],qa=0>qa?-32768==qa?32767:-qa:qa,qa>sb&&(sb=qa);rb=0;qa=sb>>9<<16>>16;for(la=ib=0;5>=la;la++)ib=0>=qa?ib|1:ib|0,qa=qa>>1<<16>>16,0==ib&&rb++;var Ub=(sb>>(rb+5<<16>>16)<<16>>16)+(rb<<3<<16>>16),Xa=-32768>Ub?-32768:32767<Ub?32767:Ub,jb=0;15<Xa&&(jb=(Xa>>3<<16>>16)-1<<16>>16);Ja=Xa-(jb<<3)<<16>>16;if(0==Ja)jb=-4,Ja=7;else{for(;7>=Ja;)Ja=(Ja<<1|1)<<16>>16,jb--;Ja-=
8}G==G?(w=jb,R=Ja):(A=jb,u=Ja);rb=w;qb=R;zd=6-rb<<16>>16;yd=W[qb];for(la=0;12>=la;la++)qa=Ad[la]<<zd<<16>>16,qa=v(qa,yd),qa=qa>>12<<16>>16,ke[la+le]=qa+4<<16>>16;R=qb;w=rb;Kb[Ra]=Xa;var Ab=void 0,Ya=void 0,Vb=void 0,Tc=void 0,Uc=void 0,Za=void 0,wa=ud,Wb=wd,me=vd;G==G?(Uc=x[R],Ya=6-w<<16>>16):(Uc=x[u],Ya=6-A<<16>>16);for(var Tc=-32768>Ya?-32768:32767<Ya?32767:Ya,Ya=Tc-1,Lb=-32768>Ya?-32768:32767<Ya?32767:Ya,Vb=16<=Lb?0:-16>=Lb?-0:0>Lb?N(1,-Lb):1<<Lb<<16>>16,Bd=D=0;13>Bd;Bd++)Za=(wa[me++]<<1)-7<<16>>
16,Za=Za<<28>>16,Za=C(Uc,Za),Ab=Za+Vb,Za=-32768>Ab?-32768:32767<Ab?32767:Ab,Wb[D++]=N(Za,Tc);var ra=void 0,$a=wd,ba=sd,tb=G,ab=13,Bb=0,ra=tb==G?5:0;switch(td[Sc]){case 3:ba[ra++]=0;do ba[ra++]=0,ba[ra++]=0,ba[ra++]=$a[Bb++],--ab;while(0!=ab);break;case 2:do ba[ra++]=0,ba[ra++]=0,ba[ra++]=$a[Bb++],--ab;while(0!=ab);break;case 1:do ba[ra++]=0,ba[ra++]=$a[Bb++],ba[ra++]=0,--ab;while(0!=ab);break;case 0:do ba[ra++]=$a[Bb++],ba[ra++]=0,ba[ra++]=0,--ab;while(0!=ab)}tb==G&&(ba[ra++]=0);for(vb=0;39>=vb;vb++)qc=
Pb[5+vb]+cc[vb+yb],cc[vb+yb]=-32768>qc?-32768:32767<qc?32767:qc;yb+=40}for(vb=0;120>vb;vb++)cc[vb]=cc[160+vb];if(p){var g=a[0]<<4|a[1]<<10;r[E++]=g>>4;g=g>>5|a[2]<<11;r[E++]=g>>7;g=g>>5|a[3]<<11;g=g>>4|a[4]<<12;r[E++]=g>>6;g=g>>4|a[5]<<12;g=g>>3|a[6]<<13;r[E++]=g>>7;g=g>>3|a[7]<<13;g=g>>7|m[0]<<9;r[E++]=g>>5;g=g>>2|e[0]<<14;g=g>>2|q[0]<<14;g=g>>6|n[0]<<10;r[E++]=g>>3;g=g>>3|f[0]<<13;r[E++]=g>>8;g=g>>3|f[1]<<13;g=g>>3|f[2]<<13;g=g>>3|f[3]<<13;r[E++]=g>>7;g=g>>3|f[4]<<13;g=g>>3|f[5]<<13;g=g>>3|f[6]<<
13;r[E++]=g>>6;g=g>>3|f[7]<<13;g=g>>3|f[8]<<13;r[E++]=g>>8;g=g>>3|f[9]<<13;g=g>>3|f[10]<<13;g=g>>3|f[11]<<13;r[E++]=g>>7;g=g>>3|f[12]<<13;g=g>>7|m[1]<<9;r[E++]=g>>5;g=g>>2|e[1]<<14;g=g>>2|q[1]<<14;g=g>>6|n[1]<<10;r[E++]=g>>3;g=g>>3|f[13]<<13;r[E++]=g>>8;g=g>>3|f[14]<<13;g=g>>3|f[15]<<13;g=g>>3|f[16]<<13;r[E++]=g>>7;g=g>>3|f[17]<<13;g=g>>3|f[18]<<13;g=g>>3|f[19]<<13;r[E++]=g>>6;g=g>>3|f[20]<<13;g=g>>3|f[21]<<13;r[E++]=g>>8;g=g>>3|f[22]<<13;g=g>>3|f[23]<<13;g=g>>3|f[24]<<13;r[E++]=g>>7;g=g>>3|f[25]<<
13;g=g>>7|m[2]<<9;r[E++]=g>>5;g=g>>2|e[2]<<14;g=g>>2|q[2]<<14;g=g>>6|n[2]<<10;r[E++]=g>>3;g=g>>3|f[26]<<13;r[E++]=g>>8;g=g>>3|f[27]<<13;g=g>>3|f[28]<<13;g=g>>3|f[29]<<13;r[E++]=g>>7;g=g>>3|f[30]<<13;g=g>>3|f[31]<<13;g=g>>3|f[32]<<13;r[E++]=g>>6;g=g>>3|f[33]<<13;g=g>>3|f[34]<<13;r[E++]=g>>8;g=g>>3|f[35]<<13;g=g>>3|f[36]<<13;g=g>>3|f[37]<<13;r[E++]=g>>7;g=g>>3|f[38]<<13;g=g>>7|m[3]<<9;r[E++]=g>>5;g=g>>2|e[3]<<14;g=g>>2|q[3]<<14;g=g>>6|n[3]<<10;r[E++]=g>>3;g=g>>3|f[39]<<13;r[E++]=g>>8;g=g>>3|f[40]<<
13;g=g>>3|f[41]<<13;g=g>>3|f[42]<<13;r[E++]=g>>7;g=g>>3|f[43]<<13;g=g>>3|f[44]<<13;g=g>>3|f[45]<<13;r[E++]=g>>6;g=g>>3|f[46]<<13;g=g>>3|f[47]<<13;r[E++]=g>>8;g=g>>3|f[48]<<13;g=g>>3|f[49]<<13;g=g>>3|f[50]<<13;r[E++]=g>>7;g=g>>3|f[51]<<13;r[E]=g>>12;z=r[E]}else g=z<<6|a[0]<<10,r[E++]=g>>6,g=g>>6|a[1]<<10,r[E++]=g>>8,g=g>>5|a[2]<<11,g=g>>5|a[3]<<11,r[E++]=g>>6,g=g>>4|a[4]<<12,g=g>>4|a[5]<<12,r[E++]=g>>6,g=g>>3|a[6]<<13,g=g>>3|a[7]<<13,r[E++]=g>>8,g=g>>7|m[0]<<9,g=g>>2|e[0]<<14,r[E++]=g>>7,g=g>>2|q[0]<<
14,g=g>>6|n[0]<<10,r[E++]=g>>7,g=g>>3|f[0]<<13,g=g>>3|f[1]<<13,g=g>>3|f[2]<<13,r[E++]=g>>6,g=g>>3|f[3]<<13,g=g>>3|f[4]<<13,r[E++]=g>>8,g=g>>3|f[5]<<13,g=g>>3|f[6]<<13,g=g>>3|f[7]<<13,r[E++]=g>>7,g=g>>3|f[8]<<13,g=g>>3|f[9]<<13,g=g>>3|f[10]<<13,r[E++]=g>>6,g=g>>3|f[11]<<13,g=g>>3|f[12]<<13,r[E++]=g>>8,g=g>>7|m[1]<<9,g=g>>2|e[1]<<14,r[E++]=g>>7,g=g>>2|q[1]<<14,g=g>>6|n[1]<<10,r[E++]=g>>7,g=g>>3|f[13]<<13,g=g>>3|f[14]<<13,g=g>>3|f[15]<<13,r[E++]=g>>6,g=g>>3|f[16]<<13,g=g>>3|f[17]<<13,r[E++]=g>>8,g=g>>
3|f[18]<<13,g=g>>3|f[19]<<13,g=g>>3|f[20]<<13,r[E++]=g>>7,g=g>>3|f[21]<<13,g=g>>3|f[22]<<13,g=g>>3|f[23]<<13,r[E++]=g>>6,g=g>>3|f[24]<<13,g=g>>3|f[25]<<13,r[E++]=g>>8,g=g>>7|m[2]<<9,g=g>>2|e[2]<<14,r[E++]=g>>7,g=g>>2|q[2]<<14,g=g>>6|n[2]<<10,r[E++]=g>>7,g=g>>3|f[26]<<13,g=g>>3|f[27]<<13,g=g>>3|f[28]<<13,r[E++]=g>>6,g=g>>3|f[29]<<13,g=g>>3|f[30]<<13,r[E++]=g>>8,g=g>>3|f[31]<<13,g=g>>3|f[32]<<13,g=g>>3|f[33]<<13,r[E++]=g>>7,g=g>>3|f[34]<<13,g=g>>3|f[35]<<13,g=g>>3|f[36]<<13,r[E++]=g>>6,g=g>>3|f[37]<<
13,g=g>>3|f[38]<<13,r[E++]=g>>8,g=g>>7|m[3]<<9,g=g>>2|e[3]<<14,r[E++]=g>>7,g=g>>2|q[3]<<14,g=g>>6|n[3]<<10,r[E++]=g>>7,g=g>>3|f[39]<<13,g=g>>3|f[40]<<13,g=g>>3|f[41]<<13,r[E++]=g>>6,g=g>>3|f[42]<<13,g=g>>3|f[43]<<13,r[E++]=g>>8,g=g>>3|f[44]<<13,g=g>>3|f[45]<<13,g=g>>3|f[46]<<13,r[E++]=g>>7,g=g>>3|f[47]<<13,g=g>>3|f[48]<<13,g=g>>3|f[49]<<13,r[E++]=g>>6,g=g>>3|f[50]<<13,g=g>>3|f[51]<<13,r[E++]=g>>8;var Cb,Xb=p?32:33;for(Cb=0;Cb<Xb;Cb++)Ca[Cb+db]=r[Cb];return Xb};var p=!1,B=[8,7,6,6,5,5,5,5,4,4,4,4,
4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],k=new Int32Array(9),
w=0,R=0,A=0,u=0,D=0,G=0,ia=new Int16Array(40)}
function MSGSM(){function v(a,p,e,k,q,v,A,u){var l=0;f(d,0,160,0);f(r,0,40,0);for(var w=0;3>=w;w++,l+=13){var ia=q[w],c=e[w],B=l,R=v,P=r,Oa=new Int32Array(13);Oa.buffer||f(Oa,0,13,0);var ka=0;15<ia&&(ka=(ia>>3)-1);ia-=ka<<3;if(0==ia)ka=-4,ia=7;else{for(;7>=ia;)ia=ia<<1|1,ka--;ia-=8}var Ma=Array(2);Ma[0]=ka;Ma[1]=ia;var ka=Oa,ia=B,B=ya[Ma[1]];Ma=y(6,Ma[0]);var E=y(Ma,1);E=16<=E?0:-16>=E?-0:0>E?ja(1,-E):1<<E;for(var xb=0,eb=0;13>eb;eb++){var Ka=(R[ia++]<<1)-7;Ka<<=12;Ka=N(B,Ka);Ka+=E;-32768>Ka?Ka=-32768:
32767<Ka&&(Ka=32767);ka[xb++]=ja(Ka,Ma)}R=13;B=ka=0;switch(c){case 3:P[B++]=0;case 2:P[B++]=0;case 1:P[B++]=0;case 0:P[B++]=Oa[ka++],R--}do P[B++]=0,P[B++]=0,P[B++]=Oa[ka++];while(0<--R);for(;4>++c;)P[B++]=0;Oa=p[w];c=k[w];P=r;t=Oa=40>Oa||120<Oa?t:Oa;R=za[c];for(ka=0;39>=ka;ka++)c=N(R,h[ka-Oa+120]),c+=P[ka],-32768>c?c=-32768:32767<c&&(c=32767),h[ka+120]=c;n(h,40,h,0,120);n(h,120,d,40*w,39)}p=W[x];e=W[x^=1];k=0;C(a,p,k++,0,0,-32,13107);C(a,p,k++,0,0,-32,13107);C(a,p,k++,0,2048,-16,13107);C(a,p,k++,
0,-2560,-16,13107);C(a,p,k++,0,94,-8,19223);C(a,p,k++,0,-1792,-8,17476);C(a,p,k++,0,-341,-4,31454);C(a,p,k++,0,-1144,-4,29708);a=z;for(q=0;8>q;q++)k=(e[q]>>2)+(p[q]>>2),-32768>k?k=-32768:32767<k&&(k=32767),k+=e[q]>>1,-32768>k?k=-32768:32767<k&&(k=32767),a[q]=k;H(z);O(z,13,d,A,0,u);a=z;for(q=0;8>q;q++)k=(e[q]>>1)+(p[q]>>1),-32768>k?k=-32768:32767<k&&(k=32767),a[q]=k;H(z);O(z,14,d,A,13,u);a=z;for(q=0;8>q;q++)k=(e[q]>>2)+(p[q]>>2),-32768>k?k=-32768:32767<k&&(k=32767),k+=p[q]>>1,-32768>k?k=-32768:32767<
k&&(k=32767),a[q]=k;H(z);O(z,13,d,A,27,u);a=z;for(e=0;8>e;e++)a[e]=p[e];H(z);O(z,120,d,A,40,u);p=u;for(e=u+160;e-- >u;p++)a=N(m,28180),m=A[p]+a,-32768>m?m=-32768:32767<m&&(m=32767),a=m<<1,-32768>a?a=-32768:32767<a&&(a=32767),A[p]=a}function C(a,d,f,e,h,n,q){e=a[f]+n;-32768>e?e=-32768:32767<e&&(e=32767);e=y(e<<10,h<<1);e=N(q,e);e+=e;-32768>e?e=-32768:32767<e&&(e=32767);d[f]=e}function H(a){for(var d,e=0;8>e;e++)0>a[e]?(d=-32768==a[e]?32767:-a[e],a[e]=-(11059>d?d<<1:20070>d?d+11059:P(d>>2,26112))):
(d=a[e],a[e]=11059>d?d<<1:20070>d?d+11059:P(d>>2,26112))}function O(d,e,f,k,h,n){for(var l,p,q;0!=e;){e--;l=f[h];for(var r=7;0<=r;r--)p=d[r],q=a[r],q=((-32768==p&&-32768==q?32767:65535&p*q+16384>>15)&65535)<<16>>16,l=y(l,q),p=((-32768==p&&-32768==l?32767:65535&p*l+16384>>15)&65535)<<16>>16,p=a[r]+p,-32768>p?p=-32768:32767<p&&(p=32767),a[r+1]=p;k[n+h++]=a[0]=l}}function N(a,d){return-32768==a&&-32768==d?32767:(a*d+16384>>15&65535)<<16>>16}function P(a,d){var e=a+d;return-32768>e?-32768:32767<e?32767:
e}function y(a,d){var e=a-d;return-32768>e?-32768:32767<e?32767:e}function ja(a,d){return 16<=d?0>a?-1:0:-16>=d?0:0>d?a<<-d:a>>d}var ya=[18431,20479,22527,24575,26623,28671,30719,32767],za=[3277,11469,21299,32767],h=new Int32Array(280),W=[new Int32Array(8),new Int32Array(8)],x=0,t=40,a=new Int32Array(9),m=0,q=new Int32Array(320);q[0]=0;var e=[.1],n=hi5.Arrays.arraycopy,f=hi5.Arrays.fill;this.decode=function(a,d,f){var k=0,h;f=d+f;for(var l=new Int32Array(8),n=new Int32Array(4),p=new Int32Array(4),
r=new Int32Array(4),t=new Int32Array(4),m=new Int32Array(52);d<f;){var c=a[d++]&255;l[0]=c&63;c>>>=6;c|=a[d++]<<2&1023;l[1]=c&63;c>>>=6;c|=a[d++]<<4&4095;l[2]=c&31;c>>>=5;l[3]=c&31;c>>>=5;c|=a[d++]<<2&1023;l[4]=c&15;c>>>=4;l[5]=c&15;c>>>=4;c|=a[d++]<<2&1023;l[6]=c&7;c>>>=3;l[7]=c&7;c>>>=3;c|=a[d++]<<4&4095;n[0]=c&127;c>>>=7;r[0]=c&3;c>>>=2;p[0]=c&3;c>>>=2;c|=a[d++]<<1&511;t[0]=c&63;c>>>=6;m[0]=c&7;c=a[d++]&255;m[1]=c&7;c>>>=3;m[2]=c&7;c>>>=3;c|=a[d++]<<2&1023;m[3]=c&7;c>>>=3;m[4]=c&7;c>>>=3;m[5]=
c&7;c>>>=3;c|=a[d++]<<1&511;m[6]=c&7;c>>>=3;m[7]=c&7;c>>>=3;m[8]=c&7;c=a[d++]&255;m[9]=c&7;c>>>=3;m[10]=c&7;c>>>=3;c|=a[d++]<<2&1023;m[11]=c&7;c>>>=3;m[12]=c&7;c>>>=3;c|=a[d++]<<4&4095;n[1]=c&127;c>>>=7;r[1]=c&3;c>>>=2;p[1]=c&3;c>>>=2;c|=a[d++]<<1&511;t[1]=c&63;c>>>=6;m[13]=c&7;c=a[d++]&255;m[14]=c&7;c>>>=3;m[15]=c&7;c>>>=3;c|=a[d++]<<2&1023;m[16]=c&7;c>>>=3;m[17]=c&7;c>>>=3;m[18]=c&7;c>>>=3;c|=a[d++]<<1&511;m[19]=c&7;c>>>=3;m[20]=c&7;c>>>=3;m[21]=c&7;c=a[d++]&255;m[22]=c&7;c>>>=3;m[23]=c&7;c>>>=
3;c|=a[d++]<<2&1023;m[24]=c&7;c>>>=3;m[25]=c&7;c>>>=3;c|=a[d++]<<4&4095;n[2]=c&127;c>>>=7;r[2]=c&3;c>>>=2;p[2]=c&3;c>>>=2;c|=a[d++]<<1&511;t[2]=c&63;c>>>=6;m[26]=c&7;c=a[d++]&255;m[27]=c&7;c>>>=3;m[28]=c&7;c>>>=3;c|=a[d++]<<2&1023;m[29]=c&7;c>>>=3;m[30]=c&7;c>>>=3;m[31]=c&7;c>>>=3;c|=a[d++]<<1&511;m[32]=c&7;c>>>=3;m[33]=c&7;c>>>=3;m[34]=c&7;c=a[d++]&255;m[35]=c&7;c>>>=3;m[36]=c&7;c>>>=3;c|=a[d++]<<2&1023;m[37]=c&7;c>>>=3;m[38]=c&7;c>>>=3;c|=a[d++]<<4&4095;n[3]=c&127;c>>>=7;r[3]=c&3;c>>>=2;p[3]=c&
3;c>>>=2;c|=a[d++]<<1&511;t[3]=c&63;c>>>=6;m[39]=c&7;c=a[d++]&255;m[40]=c&7;c>>>=3;m[41]=c&7;c>>>=3;c|=a[d++]<<2&1023;m[42]=c&7;c>>>=3;m[43]=c&7;c>>>=3;m[44]=c&7;c>>>=3;c|=a[d++]<<1&511;m[45]=c&7;c>>>=3;m[46]=c&7;c>>>=3;m[47]=c&7;c=a[d++]&255;m[48]=c&7;c>>>=3;m[49]=c&7;c>>>=3;c|=a[d++]<<2&1023;m[50]=c&7;c>>>=3;m[51]=c&7;c>>>=3;v(l,n,p,r,t,m,q,0);c&=15;c|=a[d++]<<4&4095;l[0]=c&63;c>>>=6;l[1]=c&63;c=a[d++]&255;l[2]=c&31;c>>>=5;c|=a[d++]<<3&2047;l[3]=c&31;c>>>=5;l[4]=c&15;c>>>=4;c|=a[d++]<<2&1023;l[5]=
c&15;c>>>=4;l[6]=c&7;c>>>=3;l[7]=c&7;c=a[d++]&255;n[0]=c&127;c>>>=7;c|=a[d++]<<1&511;r[0]=c&3;c>>>=2;p[0]=c&3;c>>>=2;c|=a[d++]<<5&8191;t[0]=c&63;c>>>=6;m[0]=c&7;c>>>=3;m[1]=c&7;c>>>=3;c|=a[d++]<<1&511;m[2]=c&7;c>>>=3;m[3]=c&7;c>>>=3;m[4]=c&7;c=a[d++]&255;m[5]=c&7;c>>>=3;m[6]=c&7;c>>>=3;c|=a[d++]<<2&1023;m[7]=c&7;c>>>=3;m[8]=c&7;c>>>=3;m[9]=c&7;c>>>=3;c|=a[d++]<<1&511;m[10]=c&7;c>>>=3;m[11]=c&7;c>>>=3;m[12]=c&7;c=a[d++]&255;n[1]=c&127;c>>>=7;c|=a[d++]<<1&511;r[1]=c&3;c>>>=2;p[1]=c&3;c>>>=2;c|=a[d++]<<
5&8191;t[1]=c&63;c>>>=6;m[13]=c&7;c>>>=3;m[14]=c&7;c>>>=3;c|=a[d++]<<1&511;m[15]=c&7;c>>>=3;m[16]=c&7;c>>>=3;m[17]=c&7;c=a[d++]&255;m[18]=c&7;c>>>=3;m[19]=c&7;c>>>=3;c|=a[d++]<<2&1023;m[20]=c&7;c>>>=3;m[21]=c&7;c>>>=3;m[22]=c&7;c>>>=3;c|=a[d++]<<1&511;m[23]=c&7;c>>>=3;m[24]=c&7;c>>>=3;m[25]=c&7;c=a[d++]&255;n[2]=c&127;c>>>=7;c|=a[d++]<<1&511;r[2]=c&3;c>>>=2;p[2]=c&3;c>>>=2;c|=a[d++]<<5&8191;t[2]=c&63;c>>>=6;m[26]=c&7;c>>>=3;m[27]=c&7;c>>>=3;c|=a[d++]<<1&511;m[28]=c&7;c>>>=3;m[29]=c&7;c>>>=3;m[30]=
c&7;c=a[d++]&255;m[31]=c&7;c>>>=3;m[32]=c&7;c>>>=3;c|=a[d++]<<2&1023;m[33]=c&7;c>>>=3;m[34]=c&7;c>>>=3;m[35]=c&7;c>>>=3;c|=a[d++]<<1&511;m[36]=c&7;c>>>=3;m[37]=c&7;c>>>=3;m[38]=c&7;c=a[d++]&255;n[3]=c&127;c>>>=7;c|=a[d++]<<1&511;r[3]=c&3;c>>>=2;p[3]=c&3;c>>>=2;c|=a[d++]<<5&8191;t[3]=c&63;c>>>=6;m[39]=c&7;c>>>=3;m[40]=c&7;c>>>=3;c|=a[d++]<<1&511;m[41]=c&7;c>>>=3;m[42]=c&7;c>>>=3;m[43]=c&7;c=a[d++]&255;m[44]=c&7;c>>>=3;m[45]=c&7;c>>>=3;c|=a[d++]<<2&1023;m[46]=c&7;c>>>=3;m[47]=c&7;c>>>=3;m[48]=c&7;c>>>=
3;c|=a[d++]<<1&511;m[49]=c&7;c>>>=3;m[50]=c&7;c>>>=3;m[51]=c&7;v(l,n,p,r,t,m,q,160);c=320*k++;for(h=0;320>h;h++)e[c++]=q[h]/32768}e.length=320*k;return e};var d=new Int32Array(160),r=new Int32Array(40),z=new Int32Array(8)};

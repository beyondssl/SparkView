var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(K,N,P){if(K==Array.prototype||K==Object.prototype)return K;K[N]=P.value;return K};
$jscomp.getGlobal=function(K){K=["object"==typeof globalThis&&globalThis,K,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var N=0;N<K.length;++N){var P=K[N];if(P&&P.Math==Math)return P}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(K,N){var P=$jscomp.propertyToPolyfillSymbol[N];if(null==P)return K[N];P=K[P];return void 0!==P?P:K[N]};$jscomp.polyfill=function(K,N,P,V){N&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(K,N,P,V):$jscomp.polyfillUnisolated(K,N,P,V))};
$jscomp.polyfillUnisolated=function(K,N,P,V){P=$jscomp.global;K=K.split(".");for(V=0;V<K.length-1;V++){var S=K[V];if(!(S in P))return;P=P[S]}K=K[K.length-1];V=P[K];N=N(V);N!=V&&null!=N&&$jscomp.defineProperty(P,K,{configurable:!0,writable:!0,value:N})};
$jscomp.polyfillIsolated=function(K,N,P,V){var S=K.split(".");K=1===S.length;V=S[0];V=!K&&V in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var xa=0;xa<S.length-1;xa++){var O=S[xa];if(!(O in V))return;V=V[O]}S=S[S.length-1];P=$jscomp.IS_SYMBOL_NATIVE&&"es6"===P?V[S]:null;N=N(P);null!=N&&(K?$jscomp.defineProperty($jscomp.polyfills,S,{configurable:!0,writable:!0,value:N}):N!==P&&($jscomp.propertyToPolyfillSymbol[S]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(S):$jscomp.POLYFILL_PREFIX+
S,S=$jscomp.propertyToPolyfillSymbol[S],$jscomp.defineProperty(V,S,{configurable:!0,writable:!0,value:N})))};$jscomp.polyfill("Array.prototype.fill",function(K){return K?K:function(N,P,V){var S=this.length||0;0>P&&(P=Math.max(0,S+P));if(null==V||V>S)V=S;V=Number(V);0>V&&(V=Math.max(0,S+V));for(P=Number(P||0);P<V;P++)this[P]=N;return this}},"es6","es3");$jscomp.typedArrayFill=function(K){return K?K:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
var rdpcodecs=rdpcodecs||new function(){function K(){var ba=new Uint32Array(10240),Z=0,u=new Uint8Array(10240),C=0,B=new Uint8Array(10240),t=0,d=new Uint8Array(10240),x=0,q=new Uint8Array(0),m=0;this.getData=function(){return ba};this.getDataSize=function(){return Z};this.resetData=function(l){ba.length<l&&(ba=new Uint32Array(l));Z=l;return ba};this.resetLumaPlane=function(l){u.length<l&&(u=new Uint8Array(l));C=l;return u};this.getLumaPlanceSize=function(){return C};this.resetOrangeChromaPlane=function(l){B.length<
l&&(B=new Uint8Array(l));t=l;return B};this.getOrangeChromaPlane=function(){return t};this.resetGreenChromaPlane=function(l){d.length<l&&(d=new Uint8Array(l));x=l;return d};this.getGreenChromaPlane=function(){return x};this.resetAlphaPlane=function(l){q.length<l&&(q=new Uint8Array(l));m=l;return q};this.getAlphaPlane=function(){return m}}function N(ba,Z,u){var C=ba,B=u,t=0,d=8,x=Z;this.attach=function(q,m,l){C=q;B=l;t=0;d=8;x=m};this.getBits=function(q){for(var m,l=0;t<B&&0<q;)m=q,m>d&&(m=d),0!=l&&
(l<<=m),l|=C[t+x]>>d-m&(1<<m)-1,d-=m,q-=m,0==d&&(d=8,t++);return l};this.putBits=function(q,m){for(var l;t<B&&0<m;)l=m,l>d&&(l=d),C[t+x]|=(q>>m-l&(1<<l)-1)<<d-l,d-=l,m-=l,0==d&&(d=8,t++)};this.eos=function(){return t>=B};this.left=function(){return t>=B?0:8*(B-t-1)+d};this.getProcessBytes=function(){return 8>d?t+1:t}}function P(){this.y=this.x=this.CrLen=this.CbLen=this.YLen=this.quantIdxCr=this.quantIdxCb=this.quantIdxY=0;this.data=new Uint32Array(4096)}function V(){function ba(C,B,t,d,x,q,m){t=
C.et;var l=4096,k=C.bitStream,e=1,p=e<<3,z=1,h=z<<3,f=0;for(null==k?k=new N(d,x,q):k.attach(d,x,q);!k.eos()&&0<l;)if(0!=e){for(;!k.eos();){x=k.getBits(1);if(0!=x)break;d=e=1<<e;d>l&&(d=l);0<d&&(Ca(m,f,f+d,0),f+=d);l-=e;p+=4;80<p&&(p=80);0>p&&(p=0);e=p>>3}d=e=k.getBits(e);d>l&&(d=l);0<d&&(Ca(m,f,f+d,0),f+=d);l-=e;e=k.getBits(1);d=0;do if(x=k.getBits(1),1==x)d++;else break;while(1);x=k.getBits(z);x|=d<<z;0==d?(h+=-2,80<h&&(h=80),0>h&&(h=0),z=h>>3):1!=d&&(h+=d,80<h&&(h=80),0>h&&(h=0),z=h>>3);d=x+1;0<
l&&(m[f++]=0!=e?-d:d);l--;p+=-6;80<p&&(p=80);0>p&&(p=0);e=p>>3}else{d=0;do if(x=k.getBits(1),1==x)d++;else break;while(1);x=k.getBits(z);x|=d<<z;0==d?(h+=-2,80<h&&(h=80),0>h&&(h=0),z=h>>3):1!=d&&(h+=d,80<h&&(h=80),0>h&&(h=0),z=h>>3);d=x;if(1!=t){q=d;for(x=0;0!=q;)q>>=1,x++;x=k.getBits(x);d-=x;0!=x&&0!=d?(p+=-6,80<p&&(p=80),0>p&&(p=0),e=p>>3):0==x&&0==d&&(p+=6,80<p&&(p=80),0>p&&(p=0),e=p>>3);0<l&&(m[f++]=0!=(x&1)?-1*(x+1>>1):x>>1);l--;0<l&&(m[f++]=0!=(d&1)?-1*(d+1>>1):d>>1);l--}else 0==d?(0<l&&(m[f++]=
0),l--,p+=3):(0<l&&(m[f++]=0!=(d&1)?-1*(d+1>>1):d>>1),l--,p+=-3),80<p&&(p=80),0>p&&(p=0),e=p>>3}t=64;l=4032;for(k=4033;1<t;l++,k++,t--)m[k]+=m[l];u(m,0,4096,5);u(m,0,1024,B[8]-6);u(m,1024,1024,B[7]-6);u(m,2048,1024,B[9]-6);u(m,3072,256,B[5]-6);u(m,3328,256,B[4]-6);u(m,3584,256,B[6]-6);u(m,3840,64,B[2]-6);u(m,3904,64,B[1]-6);u(m,3968,64,B[3]-6);u(m,4032,64,B[0]-6);C=C.dwtBuffer;Z(m,3840,C,8);Z(m,3072,C,16);Z(m,0,C,32)}function Z(C,B,t,d){var x,q;var m=d<<1;var l=B+d*d*3;var k=B;var e=0;var p=B+d*d;
var z=B+d*d*2;var h=d*d*2;for(x=0;x<d;x++){t[e]=C[l]-(C[k]+C[k]+1>>1)<<16>>16;t[h]=C[p]-(C[z]+C[z]+1>>1)<<16>>16;for(q=1;q<d;q++){var f=q<<1;t[e+f]=C[l+q]-(C[k+q-1]+C[k+q]+1>>1)<<16>>16;t[h+f]=C[p+q]-(C[z+q-1]+C[z+q]+1>>1)<<16>>16}for(q=0;q<d-1;q++)f=q<<1,t[e+f+1]=(C[k+q]<<1)+(t[e+f]+t[e+f+2]>>1)<<16>>16,t[h+f+1]=(C[z+q]<<1)+(t[h+f]+t[h+f+2]>>1)<<16>>16;f=q<<1;t[e+f+1]=(C[k+q]<<1)+t[e+f]<<16>>16;t[h+f+1]=(C[z+q]<<1)+t[h+f]<<16>>16;l+=d;k+=d;e+=m;p+=d;z+=d;h+=m}for(f=0;f<m;f++){for(q=0;q<d;q++)x=q<<
1,e=B+x*m+f,h=q*m+f,k=h+d*m,C[e]=t[h]-((0<q?t[k-m]:t[k])+t[k]+1>>1)<<16>>16;for(q=0;q<d;q++)x=q<<1,e=B+x*m+f,h=q*m+f,k=h+d*m,C[e+m]=(t[k]<<1)+(C[e]+C[e+(q<d-1?2*m:0)]>>1)<<16>>16}}function u(C,B,t,d){if(0!=d)for(;0<t;B++,t--)C[B]<<=d}this.decodeRgb=function(C,B,t,d,x,q,m,l,k,e){ba(C,t,x,B.getData(),B.getPosition(),d,C.yrBuffer);B.skipPosition(d);ba(C,t,m,B.getData(),B.getPosition(),q,C.cbgBuffer);B.skipPosition(q);ba(C,t,k,B.getData(),B.getPosition(),l,C.crbBuffer);B.skipPosition(l);B=C.yrBuffer;
t=C.cbgBuffer;d=C.crbBuffer;for(q=0;4096>q;q++)m=B[q],l=t[q],k=d[q],m=m+4096<<16,x=m+91947*k,k=m-22544*l-46792*k,m+=115998*l,x>>=21,k>>=21,m>>=21,B[q]=0>x?0:255<x?255:x,t[q]=0>k?0:255<k?255:k,d[q]=0>m?0:255<m?255:m;B=C.yrBuffer;t=C.cbgBuffer;C=C.crbBuffer;for(d=0;4096>d;d++)e[d]=4278190080|C[d]<<16|t[d]<<8|B[d]}}function S(ba){var Z=[new hi5.graphic.Rectangle],u=[new P],C=0,B=0;this.resetRects=function(t){if(Z.length<t){var d=Z.length;for(Z.length=t;d<t;d++)Z[d]=new hi5.graphic.Rectangle}C=t;return Z};
this.resetTiles=function(t){var d=0;if(ba){if(u.length<t)for(d=u.length,u.length=t;d<t;d++)u[d]=new P}else for(;d<t;d++)u[d]=new P;B=t;return u};this.getRectSize=function(){return C};this.getTileSize=function(){return B};this.getRects=function(){return Z};this.getTiles=function(){return u}}function xa(){this.ctxId=0;this.tileSize=64;this.qt=this.et=this.xft=this.cct=this.flags=0;this.yrBuffer=new Int32Array(4096);this.cbgBuffer=new Int32Array(4096);this.crbBuffer=new Int32Array(4096);this.dwtBuffer=
new Int32Array(4096);var ba=this;this.setProperties=function(Z){ba.flags=Z&7;ba.cct=Z>>3&3;ba.xft=Z>>5&15;ba.et=Z>>9&15};this.bitStream=new N}var O=hi5.Arrays.arraycopy,Ca=hi5.Arrays.fill;this.flipimage=function(ba,Z,u,C,B,t){t*=C;for(var d=0;d<B;d++)C=Z+(B-d-1)*t,O(ba,C,u,d*t,t)};this.Bitmap=function(ba,Z,u,C,B,t,d,x){this.data=ba;this.left=C;this.top=B;this.width=Z;this.height=u;this.bitsperpixel=t;this.bytesperpixel=Math.floor((t+7)/8);this.raw=d;this.codec=x||0};this.NSCodec=function(){function ba(u,
C,B,t,d){if(0==B)Ca(t,0,d,255);else if(B<d){var x=d;for(d=0;4<x;){var q=u[C++];5==x?(t[d++]=q,x--):q==u[C]?(C++,255>(u[C]&255)?(B=u[C++]&255,B+=2):(C++,B=(u[C+3]&255)<<24|(u[C+2]&255)<<16|(u[C+1]&255)<<8|u[C]&255,C+=4),Ca(t,d,d+B,q),d+=B,x-=B):(t[d++]=q,x--)}for(B=0;4>B;B++)t[d++]=u[C++]}else O(u,C,t,0,d)}var Z=new K;this.getData=function(){return Z.getData()};this.getDataSize=function(){return Z.getDataSize()};this.process=function(u,C,B,t){C=u.getLittleEndian32();var d=u.getLittleEndian32(),x=u.getLittleEndian32();
u.skipPosition(4);var q=u.getByte(),m=u.getByte();u.skipPosition(2);var l=u.getData(),k=u.getPosition(),e=Z.resetData(B*t),p=B+(~(B&7)+1&7),z=t+(~(t&1)+1&1);var h=p*z;var f=Z.resetLumaPlane(h),A=Z.resetOrangeChromaPlane(h);h=Z.resetGreenChromaPlane(h);var n=B*t;z=0<m?(p>>1)*(z>>1):n;var v=0<m?z:n;ba(l,k,C,f,0<m?p*t:n);k+=C;ba(l,k,d,A,z);ba(l,k+d,x,h,v);l=0;k=B+(~(B&7)+1&7);var L=q-1;for(p=0;p<t;p++)for(0<m?(n=p*k,z=(p>>1)*(k>>1),v=(p>>1)*(k>>1)):(n=p*B,z=p*B,v=p*B),q=0;q<B;q++){var D=f[n]&255;var w=
(A[z]&255)<<L<<24>>24;var G=h[v]<<L<<24>>24;var I=D+w-G;var E=D+G;D=D-w-G;D=0>D?0:255<D?255:D;E=0>E?0:255<E?255:E;I=0>I?0:255<I?255:I;e[l++]=4278190080|D<<16|E<<8|I;n++;z+=0<m?q%2:1;v+=0<m?q%2:1}u.skipPosition(C+d+x)}};this.RemoteFX=function(ba){var Z=new S(!ba);ba=new V;var u=new xa;this.decode=function(B,t){for(t=B.getPosition()+t;B.getPosition()<t;){var d=B.getLittleEndian16();var x=B.getLittleEndian32();if(0==x)break;x=B.getPosition()-6+x;switch(d){case 52416:d=B;d.getLittleEndian32();d.getLittleEndian16();
break;case 52417:B.skipPosition(4);break;case 52418:d=B;for(var q=d.getByte(),m=0;m<q;m++){var l=d.getByte(),k=d.getLittleEndian16(),e=d.getLittleEndian16();svGlobal.logger.info("Channel, id:"+l+" width:"+k+" height:"+e)}break;case 52419:d=B;d.skipPosition(2);u.ctxId=d.getByte();u.tileSize=d.getLittleEndian16();u.setProperties(d.getLittleEndian16());break;case 52420:B.skipPosition(10);break;case 52421:B.skipPosition(2);break;case 52422:d=B;d.skipPosition(2);d.skipPosition(1);q=d.getLittleEndian16();
m=Z.resetRects(q);for(l=0;l<q;l++)k=m[l],k.x=d.getLittleEndian16(),k.y=d.getLittleEndian16(),k.width=d.getLittleEndian16(),k.height=d.getLittleEndian16();d.skipPosition(4);break;case 52423:d=B;q=u;d.skipPosition(6);m=d.getLittleEndian16();q.cct=m>>>4&3;q.xft=m>>>6&15;q.et=m>>>10&15;q.qt=m>>>14&3;var p=d.getByte();d.skipPosition(1);l=d.getLittleEndian16();d.skipPosition(4);k=Array(10*p);var z=0;for(m=0;m<p;m++)e=d.getByte(),k[z++]=e&15,k[z++]=e>>>4,e=d.getByte(),k[z++]=e&15,k[z++]=e>>>4,e=d.getByte(),
k[z++]=e&15,k[z++]=e>>>4,e=d.getByte(),k[z++]=e&15,k[z++]=e>>>4,e=d.getByte(),k[z++]=e&15,k[z++]=e>>>4;e=Z.resetTiles(l);for(m=0;m<l;m++){p=e[m];z=d;var h=p;z.skipPosition(6);h.quantIdxY=z.getByte();h.quantIdxCb=z.getByte();h.quantIdxCr=z.getByte();h.x=64*z.getLittleEndian16();h.y=64*z.getLittleEndian16();h.YLen=z.getLittleEndian16();h.CbLen=z.getLittleEndian16();h.CrLen=z.getLittleEndian16();C(q,d,k,p.YLen,10*p.quantIdxY,p.CbLen,10*p.quantIdxCb,p.CrLen,10*p.quantIdxCr,p.data)}break;default:svGlobal.logger.warn("unknown blockType 0x%X"+
d)}B.setPosition(x)}return Z};var C=ba.decodeRgb;this.getResult=function(){return Z}};this.RDP8BulkData=function(){function ba(f){for(;m<f;)q<<=8,B<t&&(q+=C[B++]),m+=8;x-=f;m-=f;d=q>>m;q&=(1<<m)-1}function Z(f,A,n){if(!(0>=n)){if(25E5<n){var v=n-25E5;n=25E5;A+=v;p=(p+v)%25E5}25E5>=p+n?(h(f,A,e,p,n),25E5==(p+=n)&&(p=0)):(v=25E5-p,h(f,A,e,p,v),h(f,A+v,e,0,n-v),p=n-v)}}var u=[[1,0,8,0,0],[5,17,5,1,0],[5,18,7,1,32],[5,19,9,1,160],[5,20,10,1,672],[5,21,12,1,1696],[5,24,0,0,0],[5,25,0,0,1],[6,44,14,1,5792],
[6,45,15,1,22176],[6,52,0,0,2],[6,53,0,0,3],[6,54,0,0,255],[7,92,18,1,54944],[7,93,20,1,317088],[7,110,0,0,4],[7,111,0,0,5],[7,112,0,0,6],[7,113,0,0,7],[7,114,0,0,8],[7,115,0,0,9],[7,116,0,0,10],[7,117,0,0,11],[7,118,0,0,58],[7,119,0,0,59],[7,120,0,0,60],[7,121,0,0,61],[7,122,0,0,62],[7,123,0,0,63],[7,124,0,0,64],[7,125,0,0,128],[8,188,20,1,1365664],[8,189,21,1,2414240],[8,252,0,0,12],[8,253,0,0,56],[8,254,0,0,57],[8,255,0,0,102],[9,380,22,1,4511392],[9,381,23,1,8705696],[9,382,24,1,17094304],[0]],
C=[],B=0,t=0,d=0,x=0,q=0,m=0,l=new Uint8Array(65536),k=0,e=new Uint8Array(25E5),p=0,z=new hi5.DataBuffer(l,0,65536);this.resetHistory=function(){p=d=0};this.release=function(){z=e=l=C=l=null};var h=hi5.Arrays.arraycopy;this.decompress=function(f,A,n){if(1>n)return null;var v=f[A++];n--;k=0;if(v&32)for(C=f,B=A,t=A+n-1,x=8*(n-1)-(C[t]&7),q=m=0;x;)for(f=n=A=0;0!=u[f][0];f++){for(;A<u[f][0];)ba(1),n=(n<<1)+d,A++;if(n==u[f][1]){if(0==u[f][3])ba(u[f][2]),f=u[f][4]+d,e[p]=f,25E5==++p&&(p=0),l[k++]=f;else{ba(u[f][2]);
var L=u[f][4]+d;if(0!=L){ba(1);if(0==d)f=3;else{f=4;A=2;for(ba(1);1==d;)f*=2,A++,ba(1);ba(A);f+=d}A=l;n=k;var D=n;if(!(0>=f)){v=f;var w=(p+25E5-L)%25E5;L=Math.min(v,L);if(25E5>=w+L)h(e,w,A,D,L);else{var G=25E5-w;h(e,w,A,D,G);h(e,0,A,D+G,L-G)}if(0!=(v-=L)){D+=L;w=L;do L=w,L>v&&(L=v),h(A,n,A,D,L),D+=L,w<<=1;while(0<(v-=L))}}Z(l,k,f)}else ba(15),f=d,x-=m,q=m=0,h(C,B,l,k,f),Z(C,B,f),B+=f,x-=8*f;k+=f}break}}else Z(f,A,n),h(f,A,l,0,n),k=n;z.setPosition(0);z.markEnd(k);return z}};this.bitmap=new function(){function ba(u,
C,B,t,d,x){for(var q,m=0,l,k,e,p,z=0,h,f=C,A=x;m<t;){x=A+B*t*4-(m+1)*B*4;e=0;h=x;q=0;if(0==z)for(;q<B;){l=u[C++];k=l&15;l=l>>4&15;p=k<<4|l;47>=p&&16<=p&&(k=p,l=0);for(;0<l;)e=u[C++],d[x]=e,x+=4,q++,l--;for(;0<k;)d[x]=e,x+=4,q++,k--}else for(;q<B;){l=u[C++];k=l&15;l=l>>4&15;p=k<<4|l;47>=p&&16<=p&&(k=p,l=0);for(;0<l;)p=u[C++],0!=(p&1)?(p>>=1,p+=1,e=-p):e=p>>=1,p=d[z+4*q]+e,d[x]=p,x+=4,q++,l--;for(;0<k;)p=d[z+4*q]+e,d[x]=p,x+=4,q++,k--}m++;z=h}return C-f}function Z(u,C,B,t,d,x){var q,m;for(m=0;m<t;m++)for(q=
0;q<B;q++)d[x+4*((t-m-1)*B+q)]=u[C+(m*B+q)]}this.decompressInt16=function(u,C,B,t,d){var x=-1,q=-1;B=d+B;for(var m,l,k,e=u,p=-1,z,h=0,f=0,A=0,n=4294967295,v,L=!1,D=!1,w=new Uint32Array(u*C);d<B;){z=0;l=t[d++];m=l>>4;switch(m){case 12:case 13:case 14:m-=6;l&=15;k=16;break;case 15:m=l&15;9>m?(l=t[d++],l|=t[d++]<<8):l=11>m?8:1;k=0;break;default:m>>=1,l&=31,k=32}0!=k&&(v=2==m||7==m,0==l?l=v?t[d++]+1:t[d++]+k:v&&(l<<=3));switch(m){case 0:p!=m||e==u&&-1==x||(L=!0);break;case 8:v=t[d++]|t[d++]<<8,h=4278190080|
v>>8&248|v>>13&7|(v>>3&252|v>>9&3)<<8|(v<<3&248|v>>2&7)<<16;case 3:v=t[d++]|t[d++]<<8;f=4278190080|v>>8&248|v>>13&7|(v>>3&252|v>>9&3)<<8|(v<<3&248|v>>2&7)<<16;break;case 6:case 7:v=t[d++]|t[d++]<<8;n=4278190080|v>>8&248|v>>13&7|(v>>3&252|v>>9&3)<<8|(v<<3&248|v>>2&7)<<16;m-=5;break;case 9:A=3;m=2;z=3;break;case 10:A=5,m=2,z=5}p=m;for(k=0;0<l;)switch(e>=u&&(e=0,C--,x=q,q=C*u),m){case 0:L&&(w[q+e]=-1==x?n:w[x+e]^n|4278190080,L=!1,l--,e++);if(-1==x){for(;0!=(l&-8)&&e+8<u;)for(var G=0;8>G;G++)w[q+e]=4278190080,
l--,e++;for(;0<l&&e<u;)w[q+e]=4278190080,l--,e++}else{for(;0!=(l&-8)&&e+8<u;)for(G=0;8>G;G++)w[q+e]=w[x+e],l--,e++;for(;0<l&&e<u;)w[q+e]=w[x+e],l--,e++}break;case 1:if(-1==x){for(;0!=(l&-8)&&e+8<u;)for(G=0;8>G;G++)w[q+e]=n,l--,e++;for(;0<l&&e<u;)w[q+e]=n,l--,e++}else{for(;0!=(l&-8)&&e+8<u;)for(G=0;8>G;G++)w[q+e]=w[x+e]^n|4278190080,l--,e++;for(;0<l&&e<u;)w[q+e]=w[x+e]^n|4278190080,l--,e++}break;case 2:if(-1==x){for(;0!=(l&-8)&&e+8<u;)for(G=0;8>G;G++)k<<=1,k&=255,0==k&&(A=0!=z?z&255:t[d++],k=1),w[q+
e]=0!=(A&k)?n:4278190080,l--,e++;for(;0<l&&e<u;)k<<=1,k&=255,0==k&&(A=0!=z?z&255:t[d++],k=1),w[q+e]=0!=(A&k)?n:4278190080,l--,e++}else{for(;0!=(l&-8)&&e+8<u;)for(G=0;8>G;G++)k<<=1,k&=255,0==k&&(A=0!=z?z&255:t[d++],k=1),w[q+e]=0!=(A&k)?w[x+e]^n|4278190080:w[x+e],l--,e++;for(;0<l&&e<u;)k<<=1,k&=255,0==k&&(A=0!=z?z&255:t[d++],k=1),w[q+e]=0!=(A&k)?w[x+e]^n|4278190080:w[x+e],l--,e++}break;case 3:for(;0!=(l&-8)&&e+8<u;)for(G=0;8>G;G++)w[q+e]=f,l--,e++;for(;0<l&&e<u;)w[q+e]=f,l--,e++;break;case 4:for(;0!=
(l&-8)&&e+8<u;)for(G=0;8>G;G++)v=t[d++]|t[d++]<<8,w[q+e]=4278190080|v>>8&248|v>>13&7|(v>>3&252|v>>9&3)<<8|(v<<3&248|v>>2&7)<<16,l--,e++;for(;0<l&&e<u;)v=t[d++]|t[d++]<<8,w[q+e]=4278190080|v>>8&248|v>>13&7|(v>>3&252|v>>9&3)<<8|(v<<3&248|v>>2&7)<<16,l--,e++;break;case 8:for(;0!=(l&-8)&&e+8<u;)for(G=0;8>G;G++)D?(w[q+e]=f,D=!1):(w[q+e]=h,D=!0,l++),l--,e++;for(;0<l&&e<u;)D?(w[q+e]=f,D=!1):(w[q+e]=h,D=!0,l++),l--,e++;break;case 13:for(;0!=(l&-8)&&e+8<u;)for(G=0;8>G;G++)w[q+e]=4294967295,l--,e++;for(;0<
l&&e<u;)w[q+e]=4294967295,l--,e++;break;case 14:for(;0!=(l&-8)&&e+8<u;)for(G=0;8>G;G++)w[q+e]=4278190080,l--,e++;for(;0<l&&e<u;)w[q+e]=4278190080,l--,e++;break;default:l--,e++}}return w};this.byte2int=function(u,C,B){C||(C=u.length);B||(B=0);C=Math.floor(C/4);for(var t=new Uint32Array(C),d,x=0;x<C;x++)d=(x<<2)+B,t[x]=(u[d+3]&255)<<24|u[d+2]&255|(u[d+1]&255)<<8|(u[d+0]&255)<<16;return t};this.decompressInt32=function(u,C,B,t,d){B=t[d];d+=1;var x=u*C,q=new Uint32Array(4*x);if(0==(B&32)){for(var m=d,
l,k,e=0,p,z,h,f=m,A=3;e<C;){l=A+u*C*4-(e+1)*u*4;for(k=0;k<u;){p=t[m++];z=p&15;p=p>>4&15;h=z<<4|p;47>=h&&16<=h&&(z=h,p=0);for(;0<p;)m++,q[l]=255,l+=4,k++,p--;for(;0<z;)q[l]=255,l+=4,k++,z--}e++}d+=m-f}else for(l=0;l<x;l++)m=l<<2,q[m+3]=255;0!=(B&16)?(B=ba(t,d,u,C,q,2),d+=B,B=ba(t,d,u,C,q,1),ba(t,d+B,u,C,q,0)):(Z(t,d,u,C,q,2),d+=x,Z(t,d,u,C,q,1),Z(t,d+x,u,C,q,0));return rdpBitmap.byte2int(q)};this.decompressInt24=function(u,C,B,t,d){var x=-1,q=-1;B=d+B;for(var m,l,k,e=u,p=-1,z,h=0,f=0,A=0,n=4294967295,
v=!1,L=!1,D,w=new Uint32Array(u*C);d<B;){z=0;l=t[d++];m=l>>4;switch(m){case 12:case 13:case 14:m-=6;l&=15;k=16;break;case 15:m=l&15;9>m?(l=t[d++],l|=t[d++]<<8):l=11>m?8:1;k=0;break;default:m>>=1,l&=31,k=32}0!=k&&(D=2==m||7==m,0==l?l=D?t[d++]+1:t[d++]+k:D&&(l<<=3));switch(m){case 0:p!=m||e==u&&-1==x||(v=!0);break;case 8:h=4278190080|t[d++]<<16|t[d++]<<8|t[d++];case 3:f=4278190080|t[d++]<<16|t[d++]<<8|t[d++];break;case 6:case 7:n=4278190080|t[d++]<<16|t[d++]<<8|t[d++];m-=5;break;case 9:A=3;m=2;z=3;
break;case 10:A=5,m=2,z=5}p=m;for(k=0;0<l;)switch(e>=u&&(e=0,C--,x=q,q=C*u),m){case 0:v&&(w[q+e]=-1==x?n:w[x+e]^n|4278190080,v=!1,l--,e++);if(-1==x){for(;0!=(l&-8)&&e+8<u;)for(D=0;8>D;D++)w[q+e]=4278190080,l--,e++;for(;0<l&&e<u;)w[q+e]=4278190080,l--,e++}else{for(;0!=(l&-8)&&e+8<u;)for(D=0;8>D;D++)w[q+e]=w[x+e],l--,e++;for(;0<l&&e<u;)w[q+e]=w[x+e],l--,e++}break;case 1:if(-1==x){for(;0!=(l&-8)&&e+8<u;)for(D=0;8>D;D++)w[q+e]=n,l--,e++;for(;0<l&&e<u;)w[q+e]=n,l--,e++}else{for(;0!=(l&-8)&&e+8<u;)for(D=
0;8>D;D++)w[q+e]=w[x+e]^n|4278190080,l--,e++;for(;0<l&&e<u;)w[q+e]=w[x+e]^n|4278190080,l--,e++}break;case 2:if(-1==x){for(;0!=(l&-8)&&e+8<u;)for(D=0;8>D;D++)k<<=1,k&=255,0==k&&(A=0!=z?z&255:t[d++],k=1),w[q+e]=0!=(A&k)?n:4278190080,l--,e++;for(;0<l&&e<u;)k<<=1,k&=255,0==k&&(A=0!=z?z&255:t[d++],k=1),w[q+e]=0!=(A&k)?n:4278190080,l--,e++}else{for(;0!=(l&-8)&&e+8<u;)for(D=0;8>D;D++)k<<=1,k&=255,0==k&&(A=0!=z?z&255:t[d++],k=1),w[q+e]=0!=(A&k)?w[x+e]^n|4278190080:w[x+e],l--,e++;for(;0<l&&e<u;)k<<=1,k&=255,
0==k&&(A=0!=z?z&255:t[d++],k=1),w[q+e]=0!=(A&k)?w[x+e]^n|4278190080:w[x+e],l--,e++}break;case 3:for(;0!=(l&-8)&&e+8<u;)for(D=0;8>D;D++)w[q+e]=f,l--,e++;for(;0<l&&e<u;)w[q+e]=f,l--,e++;break;case 4:for(;0!=(l&-8)&&e+8<u;)for(D=0;8>D;D++)w[q+e]=4278190080|t[d++]<<16|t[d++]<<8|t[d++],l--,e++;for(;0<l&&e<u;)w[q+e]=4278190080|t[d++]<<16|t[d++]<<8|t[d++],l--,e++;break;case 8:for(;0!=(l&-8)&&e+8<u;)for(D=0;8>D;D++)L?(w[q+e]=f,L=!1):(w[q+e]=h,L=!0,l++),l--,e++;for(;0<l&&e<u;)L?(w[q+e]=f,L=!1):(w[q+e]=h,L=
!0,l++),l--,e++;break;case 13:for(;0!=(l&-8)&&e+8<u;)for(D=0;8>D;D++)w[q+e]=4294967295,l--,e++;for(;0<l&&e<u;)w[q+e]=4294967295,l--,e++;break;case 14:for(;0!=(l&-8)&&e+8<u;)for(D=0;8>D;D++)w[q+e]=4278190080,l--,e++;for(;0<l&&e<u;)w[q+e]=4278190080,l--,e++}}return w};this.decompress=function(u,C,B,t,d){var x=-1,q=0;B+=d;var m=u,l=-1,k=0,e=0,p=0,z=4294967295,h=!1,f=!1,A=new Uint8Array(u*C);for(A[0]=0;d<B;){var n=0;var v=t[d++];var L=v>>4;switch(L){case 12:case 13:case 14:L-=6;v&=15;var D=16;break;case 15:L=
v&15;9>L?(v=t[d++],v|=t[d++]<<8):v=11>L?8:1;D=0;break;default:L>>=1,v&=31,D=32}if(0!=D){var w=2==L||7==L;0==v?v=w?t[d++]+1:t[d++]+D:w&&(v<<=3)}switch(L){case 0:l!=L||m==u&&-1==x||(h=!0);break;case 8:k=t[d++];case 3:e=t[d++];break;case 6:case 7:z=t[d++];L-=5;break;case 9:p=3;L=2;n=3;break;case 10:p=5,L=2,n=5}l=L;for(D=0;0<v;)switch(m>=u&&(m=0,C--,x=q,q=C*u),L){case 0:h&&(A[q+m]=-1==x?z:A[x+m]^z,h=!1,v--,m++);if(-1==x){for(;0!=(v&-8)&&m+8<u;)for(w=0;8>w;w++)A[q+m]=0,v--,m++;for(;0<v&&m<u;)A[q+m]=0,
v--,m++}else{for(;0!=(v&-8)&&m+8<u;)for(w=0;8>w;w++)A[q+m]=A[x+m],v--,m++;for(;0<v&&m<u;)A[q+m]=A[x+m],v--,m++}break;case 1:if(-1==x){for(;0!=(v&-8)&&m+8<u;)for(w=0;8>w;w++)A[q+m]=z,v--,m++;for(;0<v&&m<u;)A[q+m]=z,v--,m++}else{for(;0!=(v&-8)&&m+8<u;)for(w=0;8>w;w++)A[q+m]=A[x+m]^z,v--,m++;for(;0<v&&m<u;)A[q+m]=A[x+m]^z,v--,m++}break;case 2:if(-1==x){for(;0!=(v&-8)&&m+8<u;)for(w=0;8>w;w++)D<<=1,D&=255,0==D&&(p=0!=n?n:t[d++],D=1),A[q+m]=0!=(p&D)?z:0,v--,m++;for(;0<v&&m<u;)D<<=1,D&=255,0==D&&(p=0!=n?
n:t[d++],D=1),A[q+m]=0!=(p&D)?z:0,v--,m++}else{for(;0!=(v&-8)&&m+8<u;)for(w=0;8>w;w++)D<<=1,D&=255,0==D&&(p=0!=n?n:t[d++],D=1),A[q+m]=0!=(p&D)?A[x+m]^z:A[x+m],v--,m++;for(;0<v&&m<u;)D<<=1,D&=255,0==D&&(p=0!=n?n:t[d++],D=1),A[q+m]=0!=(p&D)?A[x+m]^z:A[x+m],v--,m++}break;case 3:for(;0!=(v&-8)&&m+8<u;)for(w=0;8>w;w++)A[q+m]=e,v--,m++;for(;0<v&&m<u;)A[q+m]=e,v--,m++;break;case 4:for(;0!=(v&-8)&&m+8<u;)for(w=0;8>w;w++)A[q+m]=t[d++],v--,m++;for(;0<v&&m<u;)A[q+m]=t[d++],v--,m++;break;case 8:for(;0!=(v&-8)&&
m+8<u;)for(w=0;8>w;w++)f?(A[q+m]=e,f=!1):(A[q+m]=k,f=!0,v++),v--,m++;for(;0<v&&m<u;)f?(A[q+m]=e,f=!1):(A[q+m]=k,f=!0,v++),v--,m++;break;case 13:for(;0!=(v&-8)&&m+8<u;)for(w=0;8>w;w++)A[q+m]=255,v--,m++;for(;0<v&&m<u;)A[q+m]=255,v--,m++;break;case 14:for(;0!=(v&-8)&&m+8<u;)for(w=0;8>w;w++)A[q+m]=0,v--,m++;for(;0<v&&m<u;)A[q+m]=0,v--,m++;break;default:v--,m++}}return A}}};
function RdpGeneral(K,N,P,V,S,xa,O){function Ca(a){return"on"==a||"true"==a}function ba(){return Ka.displayName||Ka.server||Ka.symlink||Ka.id||"undefined"}function Z(a){return 4278190080|(a<<3&248|a>>2&7)<<16|(a>>3&252|a>>9&3)<<8|a>>8&248|a>>13&7}function u(a){return 4278190080|na.paletteRdp[2][a]<<16|na.paletteRdp[1][a]<<8|na.paletteRdp[0][a]}function C(a){return 4278190080|a}function B(a){return 4278190080|a}function t(a,g){switch(a){case 16:Va=Z;Xb=rdpBitmap.decompressInt16;break;case 8:Va=u;break;
case 24:Va=B;Xb=rdpBitmap.decompressInt24;break;case 32:Va=C;Xb=rdpBitmap.decompressInt32;break;case 15:return Ka.invitation||console.log("15 bit color is not supported anymore."),!1;default:return!1}V=a;oc=(a+7)/8>>0;if(g&&X.onColorChange)X.onColorChange(a);return!0}function d(a,g,r){N=a;P=g;sa=qa=0;ra=N-1;ta=P-1;if(X.onresolutionchange&&r)X.onresolutionchange(a,g)}function x(a){da||Nb&&ua.send(a)}function q(){this.style=this.yOrigin=this.xOrigin=0;this.pattern=Array(8);this.toStream=function(a){a.setByte(this.xOrigin);
a.setByte(this.yOrigin);a.setByte(this.style);a.setBytes(this.pattern)};this.fromStream=function(a){this.xOrigin=a.getByte();this.yOrigin=a.getByte();this.style=a.getByte();this.pattern=a.getBytes(8)};this.byteLength=function(){return 11}}function m(){this.bottom=this.top=this.right=this.left=0;this.toStream=function(a){a.setLittleEndian16(this.left);a.setLittleEndian16(this.right);a.setLittleEndian16(this.top);a.setLittleEndian16(this.bottom)};this.fromStream=function(a){this.left=a.getLittleEndian16();
this.right=a.getLittleEndian16();this.top=a.getLittleEndian16();this.bottom=a.getLittleEndian16()};this.byteLength=function(){return 8}}function l(){this.action=this.offset=this.bottom=this.top=this.right=this.left=0;this.toStream=function(a){a.setLittleEndian16(this.left);a.setLittleEndian16(this.right);a.setLittleEndian16(this.top);a.setLittleEndian16(this.bottom);a.setLittleEndian32(this.offset);a.setByte(this.action)};this.fromStream=function(a){this.left=a.getLittleEndian16();this.right=a.getLittleEndian16();
this.top=a.getLittleEndian16();this.bottom=a.getLittleEndian16();this.offset=a.getLittleEndian32();this.action=a.getByte()};this.byteLength=function(){return 13}}function k(){this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=
a.getLittleEndian16();this.opcode=a.getByte()};this.byteLength=function(){return 9}}function e(a,g,r,y,F){this.offset=a;this.baseLine=g;this.width=r;this.height=y;this.fontData=F}function p(){this.opcode=this.backgroundColor=this.endY=this.endX=this.startY=this.startX=this.mixmode=0;this.pen=new f;this.toStream=function(a){a.setLittleEndian16(this.mixmode);a.setLittleEndian16(this.startX);a.setLittleEndian16(this.startY);a.setLittleEndian16(this.endX);a.setLittleEndian16(this.endY);a.setLittleEndian32(this.backgroundColor);
a.setByte(this.opcode);this.pen.toStream(a)};this.fromStream=function(a){this.mixmode=a.getLittleEndian16();this.startX=a.getLittleEndian16();this.startY=a.getLittleEndian16();this.endX=a.getLittleEndian16();this.endY=a.getLittleEndian16();this.backgroundColor=a.getLittleEndian32();this.opcode=a.getByte();this.pen.fromStream(a)};this.byteLength=function(){return 15+this.pen.byteLength()}}function z(){this.cacheIDX=this.cacheID=this.colorTable=this.srcY=this.srcX=this.opcode=this.cy=this.cx=this.y=
this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian16(this.srcX);a.setLittleEndian16(this.srcY);a.setByte(this.cacheID);a.setByte(this.colorTable);a.setLittleEndian16(this.cacheIDX)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.srcX=
a.getLittleEndian16();this.srcY=a.getLittleEndian16();this.cacheID=a.getByte();this.colorTable=a.getByte();this.cacheIDX=a.getLittleEndian16()};this.byteLength=function(){return 17}}function h(){this.foregroundColor=this.backgroundColor=this.opcode=this.cy=this.cx=this.y=this.x=0;this.brush=new q;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian32(this.backgroundColor);
a.setLittleEndian32(this.foregroundColor);this.brush.toStream(a)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.backgroundColor=a.getLittleEndian32();this.foregroundColor=a.getLittleEndian32();this.brush.fromStream(a)};this.byteLength=function(){return 17+this.brush.byteLength()}}function f(){this.color=this.width=this.style=0;this.toStream=function(a){a.setByte(this.style);
a.setByte(this.width);a.setLittleEndian32(this.color)};this.fromStream=function(a){this.style=a.getByte();this.width=a.getByte();this.color=a.getLittleEndian32()};this.byteLength=function(){return 6}}function A(){this.dataSize=this.opcode=this.lines=this.foregroundColor=this.flags=this.y=this.x=0;this.data=[];this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setByte(this.opcode);a.setLittleEndian32(this.foregroundColor);a.setByte(this.lines);a.setByte(this.dataSize);
this.dataSize&&a.setBytes(this.data)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.opcode=a.getByte();this.foregroundColor=a.getLittleEndian32();this.lines=a.getByte();if(this.dataSize=a.getByte())this.data=a.getBytes(this.dataSize)};this.byteLength=function(){return 11+this.dataSize}}function n(){this.color=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);
a.setLittleEndian32(this.color)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.color=a.getLittleEndian32()};this.byteLength=function(){return 12}}function v(){this.srcY=this.srcX=this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian16(this.srcX);
a.setLittleEndian16(this.srcY)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.srcX=a.getLittleEndian16();this.srcY=a.getLittleEndian16()};this.byteLength=function(){return 13}}function L(){this.length=this.opcode=this.boxBottom=this.boxRight=this.boxTop=this.boxLeft=this.clipBottom=this.clipRight=this.clipTop=this.clipLeft=this.font=this.unknown=this.y=this.x=this.backgroundColor=
this.foregroundColor=this.mixmode=this.flags=0;this.text=null;this.toStream=function(a){a.setByte(this.font);a.setByte(this.flags);a.setByte(this.opcode);a.setByte(this.mixmode);a.setLittleEndian32(this.foregroundColor);a.setLittleEndian32(this.backgroundColor);a.setLittleEndian16(this.clipLeft);a.setLittleEndian16(this.clipTop);a.setLittleEndian16(this.clipRight);a.setLittleEndian16(this.clipBottom);a.setLittleEndian16(this.boxLeft);a.setLittleEndian16(this.boxTop);a.setLittleEndian16(this.boxRight);
a.setLittleEndian16(this.boxBottom);a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setByte(this.length);this.length&&a.setBytes(this.text)};this.fromStream=function(a){this.font=a.getByte();this.flags=a.getByte();this.opcode=a.getByte();this.mixmode=a.getByte();this.foregroundColor=a.getLittleEndian32();this.backgroundColor=a.getLittleEndian32();this.clipLeft=a.getLittleEndian16();this.clipTop=a.getLittleEndian16();this.clipRight=a.getLittleEndian16();this.clipBottom=a.getLittleEndian16();
this.boxLeft=a.getLittleEndian16();this.boxTop=a.getLittleEndian16();this.boxRight=a.getLittleEndian16();this.boxBottom=a.getLittleEndian16();this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();if(this.length=a.getByte())this.text=a.getBytes(this.length)};this.byteLength=function(){return 33+this.length}}function D(){this.orderType=0;this.bounds=new m;this.destBlt=new k;this.patBlt=new h;this.screenBlt=new v;this.line=new p;this.rectangle=new n;this.deskSave=new l;this.memBlt=new z;this.polyLine=
new A;this.text2=new L;this._line=new hi5.graphic.Line;this.paletteRdp=null;this.toPDU=function(){var a=4+this.bounds.byteLength()+this.destBlt.byteLength()+this.patBlt.byteLength()+this.screenBlt.byteLength()+this.line.byteLength()+this.rectangle.byteLength()+this.deskSave.byteLength()+this.memBlt.byteLength()+this.polyLine.byteLength()+this.text2.byteLength()+14+10,g=new Uint8Array(a);g[0]=29;g[2]=1;g[3]=3;a=new hi5.DataBuffer(g,0,a);a.skipPosition(4);this.bounds.toStream(a);this.destBlt.toStream(a);
this.patBlt.toStream(a);this.screenBlt.toStream(a);this.line.toStream(a);this.rectangle.toStream(a);this.deskSave.toStream(a);this.memBlt.toStream(a);this.polyLine.toStream(a);this.text2.toStream(a);a.setLittleEndian16(qa);a.setLittleEndian16(sa);a.setLittleEndian16(ra);a.setLittleEndian16(ta);a.setLittleEndian32(Ha);a.setByte(this.orderType);a.setByte(V);Ra.toStream(a);return g};this.fromStream=function(a){this.bounds.fromStream(a);this.destBlt.fromStream(a);this.patBlt.fromStream(a);this.screenBlt.fromStream(a);
this.line.fromStream(a);this.rectangle.fromStream(a);this.deskSave.fromStream(a);this.memBlt.fromStream(a);this.polyLine.fromStream(a);this.text2.fromStream(a);qa=a.getLittleEndian16();sa=a.getLittleEndian16();ra=a.getLittleEndian16();ta=a.getLittleEndian16();Ha=a.getLittleEndian32();this.orderType=a.getByte();t(a.getByte(),!0);Ra.fromStream(a)}}function w(){var a=Nb;Dc=Nb=!1;ad();na=new D;Ha=0;Sa&&Sa.reset();Pa&&Pa.reset();a&&(Nb=a)}function G(){if(!Nb){Dc=!1;if(da)ua=da;else{if(X.oncreatewebsocket)ua=
X.oncreatewebsocket(K);else{var a=0==X.mode&&O?K.substring(0,K.indexOf("?"))+"?_METHOD=post":K;ua=new WebSocket(a,"rdp")}"binaryType"in ua&&(ua.binaryType="arraybuffer")}ua.onopen=function(g){Nb=!0;if(!O&&X.onopen)X.onopen()};"on"==Ka.recording&&(wb=new RecordingManager,wb.setHeader({name:"rec",width:N,height:P,color:V,namesuffix:".rdpv",filetag:"RDPV",duration:0}));ua.onmessage=I;ua.onclose=pc;ua.onerror=X.onerror}}function I(a){var g=a.data;if("string"!=typeof g){var r=new Uint8Array(g);null!=wb&&
wb.add(new RecordingObj(r,0,g.byteLength,-1));xb.attach(r,0,g.byteLength);r=xb.getLittleEndian16();switch(r){case 29:b(xb);break;case 48:if(X.onSlowPath)X.onSlowPath();r=xb;r.getLittleEndian16();a=r.getByte();var y=r.getByte();g=r.getLittleEndian16();var F=0!=(y&32);F&&(g-=18);F&&(3==(y&15)?(y=r.getByte(),F=r.getByte(),g-=2,0!=(y&16)&&0!=(F&32)?(Sa.dec5(r.getData(),r.getPosition(),g,F),r=Sa.getData(),g=Sa.getDecompressedLength(),Pa.dec(r.getData(),r.getPosition(),g,y)):Pa.dec(r.getData(),r.getPosition(),
g,y),r=Pa.getData()):(Sa.dec(r.getData(),r.getPosition(),g,y),r=Sa.getData()));W(a,r);break;case 49:if(X.onFastPath)X.onFastPath();a:{g=xb;y=g.getByte();r=y&15;a=y>>4&3;F=0;2==(y>>6&3)&&(F=g.getByte());var H=0!=(F&32);y=g.getLittleEndian16();H&&(3==(F&15)?(F=g.getByte(),H=g.getByte(),y-=2,0!=(F&16)&&0!=(H&32)?(Sa.dec5(g.getData(),g.getPosition(),y,H),g=Sa.getData(),y=Sa.getDecompressedLength(),Pa.dec(g.getData(),g.getPosition(),y,F)):Pa.dec(g.getData(),g.getPosition(),y,F),g=Pa.getData(),y=Pa.getDecompressedLength()):
(Sa.dec(g.getData(),g.getPosition(),y,F),g=Sa.getData(),y=Sa.getDecompressedLength()));if(0!=a)switch(a){case 2:case 3:Ec.addFragement(g,y);break a;case 1:Ec.addFragement(g,y),g=Ec.clearFragements()}a=g;za&&za.begin("decodeFastPath");switch(r){case 0:r=a.getLittleEndian16();nd(a,r);break;case 1:a.skipPosition(2);Fc(a);break;case 2:a.skipPosition(2);T(a);break;case 3:break;case 4:for(r=a.getEnd();a.getPosition()<r;)switch(g=a.getLittleEndian16(),g){case 1:case 6:y=a.getLittleEndian16();F=a.getLittleEndian16();
a.getLittleEndian16();a.getBigEndian16();g=a;var M=g.getByte();g.skipPosition(2);var J=g.getByte();var U=g.getLittleEndian16(),ca=g.getLittleEndian16(),la=g.getLittleEndian32();H=g.getPosition()+la;switch(J){case 0:J=rdpBitmap.byte2int(g.getData(),la,g.getPosition());M=new Uint32Array(J.length);rdpcodecs.flipimage(J,0,M,U,ca,1);S.setRGBs(y,F,U,ca,M,0,U);break;case 1:Fb(g,M,U,ca);J=Ob.getData();M=Ob.getDataSize();M=new Uint32Array(M);rdpcodecs.flipimage(J,0,M,U,ca,1);S.setRGBs(y,F,U,ca,M,0,U);break;
case 3:J=fb.decode(g,la);U=J.getRects();ca=J.getTiles();M=J.getTileSize();for(var Da=(la=J.getRectSize())?new bd(0,0,0,0):null,Aa=0;Aa<M;Aa++){var ma=ca[Aa];if(la)for(var wa=0;wa<la;wa++)U[wa].intersection(ma.x,ma.y,64,64,Da),Da.isEmpty()||(J=64*(Da.y-ma.y)+(Da.x-ma.x),Da.x+=y,Da.y+=F,S.setRGBs(Da.x,Da.y,Da.width,Da.height,ma.data,J,64));else S.setRGBs(ma.x,ma.y,64,64,ma.data,0,64)}}g.setPosition(H);break;case 4:y=a;g=y.getLittleEndian16();y=y.getLittleEndian32();1==g&&x("91"+y);break;default:svGlobal.logger.warn("Invalid surface cmd:"+
g)}break;case 5:break;case 6:break;case 8:break;case 9:Wa(a,24);break;case 10:S.setCursor(a.getLittleEndian16());break;case 11:r=a.getLittleEndian16();Wa(a,r);break;default:svGlobal.logger.warn("XXX RDP5 opcode "+r)}za&&za.end("decodeFastPath")}break;case 65:a=xb;r=a.getPosition();g=a.getByte();y=a.getByte();seqNoLow=a.getByte();seqNoHigh=a.getByte();reqType=a.getLittleEndian16;out=null;payloadLen=0;payload=null;averageRTT=bandwidth=baseRTT=0;if(0!=y)svGlobal.logger.warn("invalid msg channel data");
else switch(reqType){case 1:case 4097:out=new Uint8Array(7);out[0]=65;out.set(a.getData().subarray(r,r+4),1);out[5]=0;out[6]=0;x(out.buffer);break;case 20:case 276:case 4116:break;case 2:8==g?(payloadLen=a.getLittleEndian16(),payload=a.getByte(payloadLen)):svGlobal.logger.warn("Invalid payload");break;case 43:8==g?(payloadLen=a.getLittleEndian16(),payload=a.getByte(payloadLen)):svGlobal.logger.warn("Invalid payload");break;case 1065:case 1577:break;case 2112:baseRTT=a.getLittleEndian32();averageRTT=
a.getLittleEndian32();break;case 2176:bandwidth=a.getLittleEndian32();averageRTT=a.getLittleEndian32();break;case 2240:baseRTT=a.getLittleEndian32();bandwidth=a.getLittleEndian32();averageRTT=a.getLittleEndian32();break;default:svGlobal.logger.warn("Invalid msg channel type:"+reqType)}break;case 62:E(xb.getUnicodeString(xb.getEnd()-xb.getPosition(),!1));default:if(X.onmessage)X.onmessage(a)}}else{r=parseInt(g.substring(0,2),16);g=g.substring(2);switch(r){case 0:r=K.substring(K.indexOf("?")+1);x("00"+
r);if(O&&X.onopen)X.onopen();break;case 15:if(X&&(gb=Gb=!1,na=new D,g&&(r=JSON.parse(g),r.capability&&X&&(X.sessionInfo.suppressOutput=!!r.capability.suppressOutput)),!aa&&X&&X.onready))X.onready();break;case 26:Gb=!0;break;case 56:X.sessionInfo.appInfo=JSON.parse(g);break;case 62:E(g)}X.onmessage(a)}}function E(a){var g=parseInt(a.substring(0,1),16);a=a.substring(1);switch(g){case 0:a=JSON.parse(a),w(),g=a.width,a=a.height,g==N&&a==P||d(g,a,!1,!1)}}function b(a){var g=a.getByte();if(0==g){svGlobal.logger.info("Send history...");
var r=new Uint8Array(4);r[0]=29;r[2]=1;r[3]=1;ua.send(r.buffer);S.getHistory(x,function(){za&&za.begin("his_mppc");(r=Sa.toPDU())&&ua.send(r.buffer);za&&za.end("his_mppc");if(Pa){za&&za.begin("his_mppc61");var y=Pa.toPDU();y&&ua.send(y.buffer);za&&za.end("his_mppc61")}za&&za.begin("his_order");ua.send(na.toPDU().buffer);za&&za.end("his_order");r=new Uint8Array(5);r[0]=29;r[2]=1;r[3]=0;r[4]=1;ua.send(r.buffer)})}else switch(g=a.getByte(),g){case 0:svGlobal.logger.warn("Received history");X.sessionInfo.suppressOutput&&
Ka.monitorDef&&524292==X.sessionInfo.appInfo.protocolVersion?(X.suppressOutput(!0),X.suppressOutput(!1)):X.refreshOutput(0,0,N-1,P-1);if(X.onHistoryReceived)X.onHistoryReceived();break;case 1:break;case 2:za&&za.begin("his_mppc_dec");Sa.fromStream(a);za&&za.end("his_mppc_dec");break;case 3:za&&za.begin("his_order_dec");na.fromStream(a);za&&za.end("his_order_dec");break;case 9:Pa||(Pa=new Bulk61Data);za&&za.begin("his_mppc_dec61");Pa.fromStream(a);za&&za.end("his_mppc_dec61");break;default:S.setHistory(g,
a)}if(X.onReqHistory)X.onReqHistory()}function W(a,g){switch(a){case 2:Ba(g);break;case 20:break;case 31:Gb=!1;break;case 27:Ea(g);break;case 34:break;case 38:Q(g);Gb=!1;break;case 40:setTimeout(function(){X&&!0!==Ka.kbdSynced&&(X.sendKeyboardSynchronize(Ca(Ka.scrollLock),Ca(Ka.numLock),Ca(Ka.capsLock)),Ka.kbdSynced=!0)},500);Gb=!1;break;case 41:ya(g);break;case 47:Yb(g);break;case 50:g.skipPosition(4);break;case 54:Ia(g);break;case 55:oa(g);break;default:svGlobal.logger.warn("Unimplemented Data PDU type "+
a)}}function ya(a){a.skipPosition(2);var g=a.getLittleEndian16();a=0!=(g&4);var r=0!=(g&2),y=0!=(g&1);g=0!=(g&8);if(X.onLockKeyState)X.onLockKeyState({capsLock:a,numLock:r,scrollLock:y,kanaLock:g});svGlobal.logger.info("LED state, capsLock:"+a+" numLock:"+r+" scrollLock:"+y+" kanaLock:"+g)}function oa(a){for(var g=a.getLittleEndian32(),r,y,F,H,M=0,J=0,U=0,ca=0,la=0;la<g;la++)r=a.getLittleEndian32(),y=a.getLittleEndian32(),F=a.getLittleEndian32(),H=a.getLittleEndian32(),a.skipPosition(4),M=Math.min(r,
M),J=Math.max(J,F),U=Math.min(y,U),ca=Math.max(ca,H);r=J-M+1;y=ca-U+1;svGlobal.logger.warn("monitor, count:"+g+" w:"+r+" h:"+y);d(r,y,!0)}function Ia(a){a=a.getLittleEndian32().toString(16).toUpperCase();svGlobal.logger.warn("server status code:"+a)}function Ba(a){var g=a.getLittleEndian16();switch(g){case 0:a.skipPosition(2);g=a.getLittleEndian16();a.skipPosition(2);nd(a,g);break;case 1:Fc(a);break;case 2:T(a);break;case 3:break;default:svGlobal.logger.warn("Unimplemented Update type "+g)}}function Ea(a){var g=
a.getLittleEndian16();a.skipPosition(2);switch(g){case 3:g=a.getLittleEndian16();a=a.getLittleEndian16();X.onMoveCursor(g,a,!0);break;case 6:Wa(a,24);break;case 7:S.setCursor(a.getLittleEndian16());break;case 1:a=a.getLittleEndian16();switch(a){case 0:break;default:svGlobal.logger.warn("XXX system pointer message "+a)}break;case 8:g=a.getLittleEndian16(),Wa(a,g)}}function Q(a){var g=a.getLittleEndian32(),r=X.sessionInfo;if(3>g){var y=X.sessionInfo;switch(g){case 0:a.skipPosition(4);y.domain=a.getUnicodeString(52,
!0);a.skipPosition(4);y.userName=a.getUnicodeString(512,!0);y.sessionId=a.getLittleEndian32();break;case 1:y.version=a.getLittleEndian16();a.skipPosition(4);y.sessionId=a.getLittleEndian32();g=a.getLittleEndian32();var F=a.getLittleEndian32();a.skipPosition(558);y.domain=a.getUnicodeString(g,!0);y.userName=a.getUnicodeString(F,!0)}}else if(3==g){a.skipPosition(2);var H=a.getLittleEndian32();a.skipPosition(4);if(2==H)return;a.getLittleEndian32();a.skipPosition(4);r.sessionId=a.getLittleEndian32();
H=a.getBytes(16);a=Array(16);for(y=0;16>y;y++)a[y]=H[y]&255}if(!Dc&&X.onloggedin)X.onloggedin(X.sessionInfo);Dc=!0;a="8D";r.sessionId&&(a+=r.sessionId+"\t"+(H?hi5.Base64.enc(H):0)+"\t"+r.userName+"\t"+r.domain);aa||x(a)}function Yb(a){Gb=!0;a=a.getLittleEndian32();svGlobal.logger.info("Disconnect:"+a);var g=11==a&&Gc;if(g)X.onCloseSurface();if(!(1>a||g)&&(!aa&&Nb&&x("85"+a),a=a.toString(16).toUpperCase(),X.onerror))X.onerror(a)}function sb(a,g,r,y,F,H,M,J){this.x=a;this.y=g;this.width=r;this.height=
y;this.mask=F;this.pixel=H;this.bpp=M;this.cache_idx=J}function Wa(a,g){if(!yb){var r=a.getLittleEndian16();var y=a.getLittleEndian16();var F=a.getLittleEndian16();var H=a.getLittleEndian16();var M=a.getLittleEndian16();var J=a.getLittleEndian16();var U=a.getLittleEndian16();var ca=a.getBytes(U);a=a.getBytes(J);if(0>y||y>=H-1)y=0;0>F?F=0:F>=M&&(F=M-1);for(J=0;J<U&&0==ca[J];J++);a=new sb(y,F,H,M,a,ca,g,r);g=a.x;y=a.y;F=a.width;H=a.height;M=a.mask;U=a.pixel;ca=a.bpp;a=a.cache_idx;J=new Uint32Array(F*
H);for(var la=J[0]=0,Da=!0,Aa=M.length,ma=0;ma<Aa;ma++)if(0!=M[ma]){Da=!1;break}for(ma=0;ma<H;ma++)for(Aa=0;Aa<F;Aa++){J[la]=zb(Aa,ma,F,H,ca,U);if(!Da){var wa=ma;1!=ca&&(wa=H-wa-1);wa=8*wa*((F+7)/8|0)+Aa;wa=0==(M[wa/8>>0]&128>>wa%8)?1:0;if(0==wa&&0!=J[la])J[la]=~J[la],J[la]|=4278190080;else if(1==wa||0!=J[la])J[la]|=4278190080;32==ca&&-1==J[la]&&0==wa&&(J[la]=0)}la++}g=new cd(a,J,g,y,F,H,ca,U.length,M.length);S.putCursor(a,g);S.setCursor(r)}}function zb(a,g,r,y,F,H){1!=F&&(g=y-g-1);g=(g*r+a)*F;r=
g/8>>0;a=H[r]&255;switch(F){case 1:return 0==(a&128>>g%8)?0:4294967295;case 8:return 0==a?0:4294967295;case 15:return a|=(H[r+1]&255)<<8,F=Array(4),Hc(a,15,F,0),F[0]<<16|F[1]<<8|F[2];case 16:return a|=(H[r+1]&255)<<8,F=Array(4),Hc(a,16,F,0),F[0]<<16|F[1]<<8|F[2];case 24:return(H[r+2]&255)<<16|(H[r+1]&255)<<8|a;case 32:return(H[r+3]&255)<<24|(H[r+2]&255)<<16|(H[r+1]&255)<<8|a}svGlobal.logger.warn("invalid bpp value for Xor Mask.");return 0}function cd(a,g,r,y,F,H,M,J,U){function ca(){var Aa=0;if(g)for(var ma=
0,wa=g.length;ma<wa;ma++)0!=g[ma]&&(Aa+=ma%F+(ma/F|0));return Aa}function la(Aa){switch(Aa){case 0:return"none";case 507:return"text";case 2046:case 4359:return"default";default:return""}}this.cache_idx=a;this.rawData=g;this.none=!g;this.hotX=r;this.hotY=y;this.width=F;this.height=H;this.xorSize=J;this.andSize=U;this.result="";this.distance=0;this.bpp=M;this.system="";g&&(this.distance||(this.distance=ca()),this.system||(this.system=la(this.distance),"none"==this.system&&(g=null)));a="";if(!this.system&&
g){M=F*H*4;a=62+M+J+U;var Da=new Uint8Array(a);a=new hi5.DataBuffer(Da,0,a);a.setLittleEndian16(0);a.setLittleEndian16(2);a.setLittleEndian16(1);a.setByte(F);a.setByte(H);a.setByte(0);a.setByte(0);a.setLittleEndian16(r);a.setLittleEndian16(y);a.setLittleEndian32(40+M+J+U);a.setLittleEndian32(22);a.setLittleEndian32(40);a.setLittleEndian32(F);a.setLittleEndian32(2*H);a.setLittleEndian16(1);a.setLittleEndian16(32);a.setLittleEndian32(0);a.setLittleEndian32(J+U);a.setLittleEndian32(0);a.setLittleEndian32(0);
a.setLittleEndian32(0);a.setLittleEndian32(0);for(r=H-1;0<=r;r--)for(y=0;y<F;y++)H=g[F*r+y],a.setByte(H&255),a.setByte(H>>8&255),a.setByte(H>>16&255),a.setByte(H>>24&255);a="data:image/x-icon;base64,"+hi5.Base64.enc(a.getData())}this.url=a}function T(a){var g=0;a.skipPosition(2);var r=a.getLittleEndian16();a.skipPosition(2);var y=Array(r);var F=Array(r);var H=Array(r);a=a.getBytes(3*r);for(var M=0;M<r;M++)y[M]=a[g],F[M]=a[g+1],H[M]=a[g+2],g+=3;256==r&&(na.paletteRdp||(na.paletteRdp=Array(3)),na.paletteRdp[0]=
y,na.paletteRdp[1]=F,na.paletteRdp[2]=H)}function nd(a,g){for(var r=0,y,F;r<g;){y=a.getByte();F=y&3;switch(F){case 1:var H=a,M=y;0!=(M&8)&&(na.orderType=H.getByte());var J=void 0,U=H,ca=Zb[na.orderType],la=0;0!=(M&64)&&ca--;0!=(M&128)&&(ca=2>ca?0:ca-2);for(var Da=0;Da<ca;Da++)J=U.getByte(),la|=J<<8*Da;var Aa=la;if(0!=(M&4)){if(0==(M&32)){var ma=H,wa=na.bounds,$b=ma.getByte();0!=($b&1)?wa.left=ia(ma,wa.left,!1):0!=($b&16)&&(wa.left=ia(ma,wa.left,!0));0!=($b&2)?wa.top=ia(ma,wa.top,!1):0!=($b&32)&&(wa.top=
ia(ma,wa.top,!0));0!=($b&4)?wa.right=ia(ma,wa.right,!1):0!=($b&64)&&(wa.right=ia(ma,wa.right,!0));0!=($b&8)?wa.bottom=ia(ma,wa.bottom,!1):0!=($b&128)&&(wa.bottom=ia(ma,wa.bottom,!0))}var Ic=na.bounds;qa=Ic.left;0>qa&&(qa=0);sa=Ic.top;0>sa&&(sa=0);ra=Ic.right;ra>=N&&(ra=N-1);ta=Ic.bottom;ta>=P&&(ta=P-1)}var Pb=0!=(M&16);switch(na.orderType){case 0:var qc=H,$a=na.destBlt,Ta=Aa,rc=Pb;0!=(Ta&1)&&($a.x=ia(qc,$a.x,rc));0!=(Ta&2)&&($a.y=ia(qc,$a.y,rc));0!=(Ta&4)&&($a.cx=ia(qc,$a.cx,rc));0!=(Ta&8)&&($a.cy=
ia(qc,$a.cy,rc));0!=(Ta&16)&&($a.opcode=qc.getByte()&15);var gc=$a.x,hc=$a.y,Hb=$a.cx,tb=$a.cy,Mc=$a.opcode;if(!(gc>N||hc>P)){gc<qa&&(Hb-=qa-gc,gc=qa);var fa=gc+Hb-1;fa>ra&&(Hb-=fa-ra);hc<sa&&(tb-=sa-hc,hc=sa);var dd=hc+tb-1;dd>ta&&(tb-=dd-ta);1>Hb||1>tb||S.bitBlt(Mc,N,gc,hc,Hb,tb,null,0,0,0)}break;case 1:var ac=void 0,ea=H,Y=na.patBlt,Ib=Aa,Nc=Pb;0!=(Ib&1)&&(Y.x=ia(ea,Y.x,Nc));0!=(Ib&2)&&(Y.y=ia(ea,Y.y,Nc));0!=(Ib&4)&&(Y.cx=ia(ea,Y.cx,Nc));0!=(Ib&8)&&(Y.cy=ia(ea,Y.cy,Nc));0!=(Ib&16)&&(Y.opcode=ea.getByte(),
Y.opcode=Y.opcode&3|(Y.opcode&48)>>2);0!=(Ib&32)&&(Y.backgroundColor=Ab(ea));0!=(Ib&64)&&(Y.foregroundColor=Ab(ea));var bc=Y.brush,ha=Ib>>7;0!=(ha&1)&&(bc.xOrigin=ea.getByte());0!=(ha&2)&&(bc.yOrigin=ea.getByte());0!=(ha&4)&&(bc.style=ea.getByte());var sc=bc.pattern;0!=(ha&8)&&(sc[0]=ea.getByte());if(0!=(ha&16))for(var hb=1;8>hb;hb++)sc[hb]=ea.getByte();bc.pattern=sc;var R=Y.x,ja=Y.y;if(!(R>ra||ja>ta)){var ed=Y.opcode,Jb=R,La=ja,ka=Y.cx,ab=Y.cy,ic=Y.foregroundColor,tc=Y.backgroundColor,Oc=Y.brush.xOrigin,
Pc=Y.brush.yOrigin,Qb=Y.brush.style,Qc=Y.brush.pattern;ic=Va(ic);tc=Va(tc);if(!(Jb>N||La>P)){Jb<qa&&(ka-=qa-Jb,Jb=qa);var mb=Jb+ka-1;mb>ra&&(ka-=mb-ra);La<sa&&(ab-=sa-La,La=sa);var fd=La+ab-1;fd>ta&&(ab-=fd-ta);if(!(1>ka||1>ab))switch(Qb){case 0:ac=new Uint32Array(ka*ab);for(var jc=0;jc<ac.length;jc++)ac[jc]=ic;S.bitBlt(ed,N,Jb,La,ka,ab,ac,ka,0,0);break;case 2:svGlobal.logger.warn("hatch");break;case 3:ac=new Uint32Array(ka*ab);var gd=0;for(jc=0;jc<ab;jc++)for(var Jc=0;Jc<ka;Jc++)ac[gd]=0==(Qc[(jc+
Pc)%8]&1<<(Jc+Oc)%8)?ic:tc,gd++;S.bitBlt(ed,N,Jb,La,ka,ab,ac,ka,0,0);break;default:svGlobal.logger.warn("Unsupported brush style "+Qb)}}}break;case 2:var Bb=void 0,cc=H,Ma=na.screenBlt,dc=Aa,ub=Pb;0!=(dc&1)&&(Ma.x=ia(cc,Ma.x,ub));0!=(dc&2)&&(Ma.y=ia(cc,Ma.y,ub));0!=(dc&4)&&(Ma.cx=ia(cc,Ma.cx,ub));0!=(dc&8)&&(Ma.cy=ia(cc,Ma.cy,ub));0!=(dc&16)&&(Ma.opcode=cc.getByte()&15);0!=(dc&32)&&(Ma.srcX=ia(cc,Ma.srcX,ub));0!=(dc&64)&&(Ma.srcY=ia(cc,Ma.srcY,ub));var cb=Ma.x,Xa=Ma.y;if(!(cb>ra||Xa>ta)){var Rb=Ma.cx,
Cb=Ma.cy,db=Ma.opcode,Rc=Ma.srcX,Sc=Ma.srcY;cb<qa&&(Bb=qa-cb,cb=qa,Rc+=Bb,Rb-=Bb);var od=cb+Rb-1;od>ra&&(Bb=od-ra,Rb-=Bb);Xa<sa&&(Bb=sa-Xa,Xa=sa,Sc+=Bb,Cb-=Bb);var uc=Xa+Cb-1;uc>ta&&(Bb=uc-ta,Cb-=Bb);1>Rb||1>Cb||(12==db?S.moveArea(Rc,Sc,Rb,Cb,cb-Rc,Xa-Sc):S.bitBlt(db,Rb,cb,Xa,Rb,Cb,null,Rb,Rc,Sc))}break;case 9:var nb=H,Fa=na.line,Ua=Aa,vc=Pb;0!=(Ua&1)&&(Fa.mixmode=nb.getLittleEndian16());0!=(Ua&2)&&(Fa.startX=ia(nb,Fa.startX,vc));0!=(Ua&4)&&(Fa.startY=ia(nb,Fa.startY,vc));0!=(Ua&8)&&(Fa.endX=ia(nb,
Fa.endX,vc));0!=(Ua&16)&&(Fa.endY=ia(nb,Fa.endY,vc));0!=(Ua&32)&&(Fa.backgroundColor=Ab(nb));0!=(Ua&64)&&(Fa.opcode=nb.getByte());var Sb=Fa.pen,Tc=Ua>>7;0!=(Tc&1)&&(Sb.style=nb.getByte());0!=(Tc&2)&&(Sb.width=nb.getByte());0!=(Tc&4)&&(Sb.color=Ab(nb));var ec=Fa.startX,Ga=Fa.startY,Db=Fa.endX,Tb=Fa.endY,pd=Fa.pen.color,Ad=Fa.opcode-1;if(Ga==Tb){if(ec>Db){var hd=ec;ec=Db;Db=hd}ec<qa&&(ec=qa);Db>ra&&(Db=ra)}else ec==Db&&(Ga>Tb&&(hd=Ga,Ga=Tb,Tb=hd),Ga<sa&&(Ga=sa),Ga>ta&&(Ga=ta));wc(ec,Ga,Db,Tb,pd,Ad);
break;case 10:var kc=H,ib=na.rectangle,Kb=Aa,xc=Pb;0!=(Kb&1)&&(ib.x=ia(kc,ib.x,xc));0!=(Kb&2)&&(ib.y=ia(kc,ib.y,xc));0!=(Kb&4)&&(ib.cx=ia(kc,ib.cx,xc));0!=(Kb&8)&&(ib.cy=ia(kc,ib.cy,xc));0!=(Kb&16)&&(Ha=Ha&4294967040|kc.getByte());0!=(Kb&32)&&(Ha=Ha&4294902015|kc.getByte()<<8);0!=(Kb&64)&&(Ha=Ha&4278255615|kc.getByte()<<16);ib.color=Ha;var Eb=ib.x,Ub=ib.y,ob=ib.cx,yc=ib.cy;if(!(Eb>ra||Ub>ta)){Eb<qa&&(ob-=qa-Eb,Eb=qa);var Uc=Eb+ob-1;Uc>ra&&(ob-=Uc-ra);Ub<sa&&(yc-=sa-Ub,Ub=sa);var Vc=Ub+yc-1;Vc>ta&&
(yc-=Vc-ta);1>ob||1>yc||S.fillRect(Eb,Ub,ob,yc,Va(ib.color))}break;case 11:var pb=H,Na=na.deskSave,zc=Aa,Wc=Pb;0!=(zc&1)&&(Na.offset=pb.getLittleEndian32());0!=(zc&2)&&(Na.left=ia(pb,Na.left,Wc));0!=(zc&4)&&(Na.top=ia(pb,Na.top,Wc));0!=(zc&8)&&(Na.right=ia(pb,Na.right,Wc));0!=(zc&16)&&(Na.bottom=ia(pb,Na.bottom,Wc));0!=(zc&32)&&(Na.action=pb.getByte());var lc=Na.right-Na.left+1,Xc=Na.bottom-Na.top+1;0==Na.action?1>lc||1>Xc||S.saveDesktop(Na.left,Na.top,lc,Xc,Na.offset):S.restoreDesktop(Na.left,Na.top,
lc,Xc,Na.offset);break;case 13:var Ja=void 0,qb=H,pa=na.memBlt,Lb=Aa,rb=Pb;0!=(Lb&1)&&(pa.cacheID=qb.getByte(),pa.colorTable=qb.getByte());0!=(Lb&2)&&(pa.x=ia(qb,pa.x,rb));0!=(Lb&4)&&(pa.y=ia(qb,pa.y,rb));0!=(Lb&8)&&(pa.cx=ia(qb,pa.cx,rb));0!=(Lb&16)&&(pa.cy=ia(qb,pa.cy,rb));0!=(Lb&32)&&(pa.opcode=qb.getByte()&15);0!=(Lb&64)&&(pa.srcX=ia(qb,pa.srcX,rb));0!=(Lb&128)&&(pa.srcY=ia(qb,pa.srcY,rb));0!=(Lb&256)&&(pa.cacheIDX=qb.getLittleEndian16());var Vb=pa.x,c=pa.y;if(!(Vb>ra||c>ta)){var Wb=pa.cx,Ac=
pa.cy,Od=pa.srcX,Pd=pa.srcY;Vb<qa&&(Ja=qa-Vb,Vb=qa,Od+=Ja,Wb-=Ja);var Qd=Vb+Wb-1;Qd>ra&&(Ja=Qd-ra,Wb-=Ja);c<sa&&(Ja=sa-c,c=sa,Pd+=Ja,Ac-=Ja);var Rd=c+Ac-1;Rd>ta&&(Ja=Rd-ta,Ac-=Ja);1>Wb||1>Ac||S.drawBitmap(pa.cacheID,pa.cacheIDX,Vb,c,Wb,Ac,Od,Pd,pa.opcode)}break;case 22:var Kc=H,jb=na.polyLine,Yc=Aa,Sd=Pb;0!=(Yc&1)&&(jb.x=ia(Kc,jb.x,Sd));0!=(Yc&2)&&(jb.y=ia(Kc,jb.y,Sd));0!=(Yc&4)&&(jb.opcode=Kc.getByte());0!=(Yc&16)&&(jb.foregroundColor=Ab(Kc));0!=(Yc&32)&&(jb.lines=Kc.getByte());if(0!=(Yc&64)){var Td=
Kc.getByte();jb.dataSize=Td;jb.data=Kc.getBytes(Td)}var Bd=jb.x,Cd=jb.y,se=jb.foregroundColor,Ud=jb.lines,te=jb.dataSize,Dd=jb.data,qd=Array(1);qd[0]=Math.floor((Ud-1)/4)+1;for(var Zc=0,ue=0,ve=jb.opcode-1,Ed=0;Ed<Ud&&qd[0]<te;Ed++){var we=Bd,xe=Cd;0==Ed%4&&(Zc=Dd[ue++]);0==(Zc&192)&&(Zc|=192);0!=(Zc&64)&&(Bd+=id(Dd,qd));0!=(Zc&128)&&(Cd+=id(Dd,qd));wc(we,xe,Bd,Cd,se,ve);Zc<<=2}break;case 27:var Oa=H,Ya=na.text2,Qa=Aa;0!=(Qa&1)&&(Ya.font=Oa.getByte());0!=(Qa&2)&&(Ya.flags=Oa.getByte());0!=(Qa&4)&&
(Ya.opcode=Oa.getByte());0!=(Qa&8)&&(Ya.mixmode=Oa.getByte());0!=(Qa&16)&&(Ya.foregroundColor=Ab(Oa));0!=(Qa&32)&&(Ya.backgroundColor=Ab(Oa));0!=(Qa&64)&&(Ya.clipLeft=Oa.getLittleEndian16());0!=(Qa&128)&&(Ya.clipTop=Oa.getLittleEndian16());0!=(Qa&256)&&(Ya.clipRight=Oa.getLittleEndian16());0!=(Qa&512)&&(Ya.clipBottom=Oa.getLittleEndian16());0!=(Qa&1024)&&(Ya.boxLeft=Oa.getLittleEndian16());0!=(Qa&2048)&&(Ya.boxTop=Oa.getLittleEndian16());0!=(Qa&4096)&&(Ya.boxRight=Oa.getLittleEndian16());0!=(Qa&8192)&&
(Ya.boxBottom=Oa.getLittleEndian16());0!=(Qa&16384)&&Oa.skipPosition(1);0!=(Qa&32768)&&Oa.skipPosition(1);0!=(Qa&65536)&&Oa.skipPosition(1);0!=(Qa&131072)&&Oa.skipPosition(1);0!=(Qa&262144)&&Oa.skipPosition(7);0!=(Qa&524288)&&(Ya.x=Oa.getLittleEndian16());0!=(Qa&1048576)&&(Ya.y=Oa.getLittleEndian16());if(0!=(Qa&2097152)){var Vd=Oa.getByte();Ya.length=Vd;Ya.text=Oa.getBytes(Vd)}var eb=Ya,ye=eb.font,ze=eb.flags,Ae=eb.mixmode,Be=Va(eb.foregroundColor),Ce=Va(eb.backgroundColor),Wd=eb.clipLeft,Xd=eb.clipTop,
De=eb.clipRight,Ee=eb.clipBottom,rd=eb.boxLeft,Yd=eb.boxTop,Fe=eb.boxBottom,Ge=eb.x,He=eb.y,Ie=eb.length,Je=eb.text,Fd=eb.boxRight-rd;rd+Fd>N&&(Fd=N-rd);S.drawText(ye,ze,Ae,Be,Ce,Wd,Xd,De-Wd,Ee-Xd,rd,Yd,Fd,Fe-Yd,Ge,He,Ie,Je,qa,sa,ra,ta);break;default:svGlobal.logger.warn("XXX Order type "+na.orderType)}0!=(M&4)&&ad();break;case 2:var Zd=a,$d=y>>2;switch($d){case 11:var sd=Zd,ae=sd.getLittleEndian16()-3,Ke=sd.getPosition()+ae;X.onAltSecWindows(sd,ae);sd.setPosition(Ke);break;case 13:Zd.getLittleEndian32();
break;default:svGlobal.logger.warn("Alt Sec order:"+$d)}break;case 3:var Mb=a;var be=Mb.getLittleEndian16();var td=Mb.getLittleEndian16();var ce=Mb.getByte();var Le=Mb.getPosition()+be+7;if(Mb.has(be+7)){switch(ce){case 0:var de=void 0,fc=Mb,Me=fc.getByte();fc.skipPosition(1);var Gd=fc.getByte(),ud=fc.getByte(),vd=fc.getByte(),wd=Math.floor((vd+7)/8),Ne=fc.getLittleEndian16(),Oe=fc.getLittleEndian16(),Pe=fc.getPosition();fc.skipPosition(Ne);V!=vd&&(svGlobal.logger.warn("Server limited colour depth to "+
vd+" bits"),t(vd,!0));var Hd=Array(Gd*ud*wd);Hd[0]=0;for(var Id=Gd*wd,xd=0;xd<ud;xd++)de=Pe+(ud-xd-1)*Id,fc.copyToByteArray(Hd,xd*Id,de,Id);var Qe=mc(Hd,wd);S.putBitmap(Me,Oe,new rdpcodecs.Bitmap(Qe,Gd,ud,0,0,8*wd,null,0));break;case 1:svGlobal.logger.info("TODO: color cache");break;case 2:var ee=void 0,jd=void 0,kb=Mb,Re=td,Se=kb.getByte();kb.getByte();var Jd=kb.getByte(),Kd=kb.getByte(),kd=kb.getByte(),Te=Math.floor((kd+7)/8),Ue=kb.getLittleEndian16(),Ve=kb.getLittleEndian16();V!=kd&&(svGlobal.logger.warn("Server limited colour depth to "+
kd+" bits"),t(kd,!0));0!=(Re&1024)?jd=Ue:(kb.skipPosition(2),jd=kb.getLittleEndian16(),kb.skipPosition(2),kb.skipPosition(2));ee=1!=Te?Xb(Jd,Kd,jd,kb.getData(),kb.getPosition()):Lc(Jd,Kd,jd,kb.getData(),kb.getPosition());var We=kb.getBytes(jd);S.putBitmap(Se,Ve,new rdpcodecs.Bitmap(ee,Jd,Kd,0,0,kd,We,1));break;case 3:var fe=void 0,Ld=void 0,Md=void 0,ge=void 0,he=void 0,ie=void 0,je=void 0,ke=void 0,le=void 0,Bc=Mb;ke=Bc.getByte();je=Bc.getByte();for(var me=0;me<je;me++)ie=Bc.getLittleEndian16(),
he=Bc.getLittleEndian16(),ge=Bc.getLittleEndian16(),Md=Bc.getLittleEndian16(),Ld=Bc.getLittleEndian16(),fe=Ld*Math.floor((Md+7)/8)+3&-4,le=new e(he,ge,Md,Ld,Bc.getBytes(fe)),S.putFont(ke,ie,le);break;case 4:yd(Mb,td,!1);break;case 5:yd(Mb,td,!0);break;case 7:svGlobal.logger.info("CacheBrush...=");break;case 8:var $c=void 0,lb=Mb,ne=td&7,oe=lb.getLittleEndian16();lb.skipPosition(8);var zd=lb.getByte();V!=zd&&(svGlobal.logger.warn("Server limited colour depth to "+zd+" bits"),t(zd,!0));lb.skipPosition(2);
var Nd=lb.getByte(),ld=lb.getLittleEndian16(),md=lb.getLittleEndian16(),pe=lb.getLittleEndian32(),qe=lb.getPosition();if(1==Nd){Fb(lb,zd,ld,md);var Xe=Ob.getData(),Ye=Ob.getDataSize();$c=new Uint32Array(Ye);rdpcodecs.flipimage(Xe,0,$c,ld,md,1);var Ze=lb.getPosition()-qe;lb.setPosition(qe);var $e=lb.getBytes(Ze);S.putBitmap(ne,oe,new rdpcodecs.Bitmap($c,ld,md,0,0,32,$e,2))}else if(0==Nd){var re=rdpBitmap.byte2int(lb.getData(),pe,lb.getPosition());$c=new Uint32Array(re.length);rdpcodecs.flipimage(re,
0,$c,ld,md,1);S.putBitmap(ne,oe,new rdpcodecs.Bitmap($c,ld,md,0,0,32,null,0))}else svGlobal.logger.warn("XXX invalid codec id:"+Nd);lb.skipPosition(pe);break;default:svGlobal.logger.warn("invalid second Order, type="+ce)}Mb.setPosition(Le)}}r++}}function yd(a,g,r){var y;var F=g&7;var H=((g&120)>>3)-2;g=(g&65408)>>7;oc!=H&&(t(8*H,!0),svGlobal.logger.warn("Server limited colour depth to "+H+" bytes"));0!=(g&2)&&a.skipPosition(8);if(0!=(g&1))var M=y=nc.readVar2Bytes(a);else y=nc.readVar2Bytes(a),M=nc.readVar2Bytes(a);
var J=nc.readVar4Bytes(a);var U=nc.readVar2Bytes(a);r&&0==(g&8)&&a.skipPosition(8);if(r){r=1!=H?Xb(y,M,J,a.getData(),a.getPosition()):Lc(y,M,J,a.getData(),a.getPosition());a=a.getBytes(J);if(!r){svGlobal.logger.warn("Failed to decompress bitmap data");return}y=new rdpcodecs.Bitmap(r,y,M,0,0,8*H,a,1)}else{r=Array(y*M*H);r[0]=0;var ca=a.getPosition(),la=y*H;for(J=0;J<M;J++){var Da=ca+(M-J-1)*la;a.copyToByteArray(r,J*la,Da,la)}a=mc(r,H);y=new rdpcodecs.Bitmap(a,y,M,0,0,8*H,null,0)}S.putBitmap(F,U,y);
0!=(g&2)&&svGlobal.logger.warn("XXX:TODO, persistent")}function ia(a,g,r){return r?(a=a.getByte()<<24>>24,g+a):g=a.getLittleEndian16()<<16>>16}function Ab(a){var g;var r=g=a.getByte();g=a.getByte();r|=g<<8;g=a.getByte();return r|g<<16}function Fc(a){for(var g,r,y,F,H,M,J,U,ca,la=a.getLittleEndian16(),Da=0;Da<la;Da++)if(g=a.getLittleEndian16(),r=a.getLittleEndian16(),y=a.getLittleEndian16(),F=a.getLittleEndian16(),H=a.getLittleEndian16(),M=a.getLittleEndian16(),J=a.getLittleEndian16(),U=a.getLittleEndian16(),
ca=a.getLittleEndian16(),y=y-g+1,F=F-r+1,V!=J&&(svGlobal.logger.warn("Server limited colour depth to "+J+" bits"),t(J,!0)),0==U){U=H*oc;ca=M*U;J=new Uint8Array(ca);for(var Aa=a.getPosition(),ma=0;ma<M;ma++)va(a.getData(),Aa,J,(M-ma-1)*U,U),Aa+=U;a.skipPosition(ca);J=mc(J,oc);S.setRGBs(g,r,y,F,J,0,H)}else 0!=(U&1024)?J=ca:(a.skipPosition(2),J=a.getLittleEndian16(),a.skipPosition(4)),U=a.getData(),ca=J,Aa=a.getPosition(),ma=r,r=F,F=oc,1>y*r*H*M||(1!=F?S.setRGBs(g,ma,y,r,Xb(H,M,ca,U,Aa),0,H):(M=Lc(H,
M,ca,U,Aa),U=ma,F=mc(M,F),S.setRGBs(g,U,y,r,F,0,H))),a.skipPosition(J)}function ad(){qa=0;ra=N-1;sa=0;ta=P-1}function wc(a,g,r,y,F,H){var M=Math.min(a,r),J=Math.max(a,r),U=Math.min(g,y),ca=Math.max(g,y);F=Va(F);if(!(M>=qa&&J<=ra&&U>=sa&&ca<=ta)){if(M>ra||J<qa||U>ta||ca<sa)return;if(a==r)g>y&&(M=g,g=y,y=M),g<sa&&(g=sa),y>ta&&(y=ta);else if(g==y)a>r&&(M=a,a=r,r=M),a<qa&&(a=qa),r>ra&&(r=ra);else{M=na._line;M.set(a,g,r,y);J=M.intersection(qa,sa,ra,sa);U=[];J&&U.push(J.x,J.y);(J=M.intersection(ra,sa,ra,
ta))&&U.push(J.x,J.y);(J=M.intersection(qa,ta,ra,ta))&&U.push(J.x,J.y);(J=M.intersection(qa,sa,qa,ta))&&U.push(J.x,J.y);2==U.length&&(a>=qa&&a<=ra&&g>=sa&&g<=ta?U.push(a,g):r>=qa&&r<=ra&&y>=sa&&y<=ta&&U.push(r,y));if(4!=U.length)return;a=U[0];g=U[1];r=U[2];y=U[3]}}12==H?S.drawLine(a,g,r,y,F):S.drawLineExt(a,g,r,y,F,H)}function id(a,g){var r=a[g[0]++]&255,y=r&128;r=0!=(r&64)?r|-64:r&63;0!=y&&(r=r<<8|a[g[0]++]&255);return r}function pc(a){if(X)if(svGlobal.logger.warn("closed "+(X.sessionInfo.appInfo?
X.sessionInfo.appInfo.numericId:0)),X&&(Nb=!1),gb)svGlobal.logger.info("Req credential");else{na=null;"undefined"!=typeof rdp8bulkData&&rdp8bulkData.release();Ob=Fb=fb=K=null;try{if(null!=wb&&(wb.exit(),wb=null),X.onclose)X.onclose(Gb);else svGlobal.logger.info("onclose: null")}catch(g){}xb=null;ua&&(ua.onopen=null,ua.onmessage=null,ua.onclose=null,ua=ua.onerror=null);Ec=null;Sa&&(Sa.release(),Sa=null);Pa&&(Pa.release(),Pa=null);X=null}}function Hc(a,g,r,y){switch(g){case 16:g=a>>8&248;var F=a>>3&
252;a=a<<3&255;r[y]=g|g>>5;r[y+1]=F|F>>6;r[y+2]=a|a>>5;r[y+3]=255;break;case 15:g=a>>7&248;F=a>>2&248;a=a<<3&255;r[y]=g|g>>5;r[y+1]=F|F>>5;r[y+2]=a|a>>5;r[y+3]=255;break;case 8:r[y]=na.paletteRdp[0][a];r[y+1]=na.paletteRdp[1][a];r[y+2]=na.paletteRdp[2][a];r[y+3]=255;break;case 32:r[y]=a&255,r[y+1]=a>>8&255,r[y+2]=a>>16&255,r[y+3]=a>>24&255;default:r[y]=a&255,r[y+1]=a>>8&255,r[y+2]=a>>16&255,r[y+3]=255}}function mc(a,g){var r=a.length/g>>0,y=new Uint32Array(r),F=Va;switch(g){case 1:for(var H=0;H<r;H++)y[H]=
F(a[H]);break;case 2:for(H=0;H<r;H++)y[H]=F(a[2*H+1]<<8|a[2*H]);break;default:for(H=0;H<r;H++)y[H]=F(a[H*g+2]<<16)|a[H*g+1]<<8|a[H*g]}return y}this.sessionInfo={domain:"",userName:"",sessionId:0,joinedSessions:[],suppressOutput:!1,appInfo:null};this.mode=0;this.remoteAppLogin=!0;var X=this,Gb=!1,gb=!1,da="object"==typeof K?K:null,Ka=da?{}:hi5.string.queryToObj(K.substring(K.indexOf("?")+1)),va=hi5.Arrays.arraycopy,za=null,Sa=new BulkData,Pa=Ca(Ka.decompressingRDP61)?new Bulk61Data:null;this.protocol=
da?"":K.substring(0,K.indexOf("://")).toLowerCase();this.setProfiler=function(a){za=a};this.getProfiler=function(){return za};this.gateway=function(){if(da)return"";var a=K.lastIndexOf("/RDP?");-1==a&&(a=K.lastIndexOf("/JOIN?"));-1==a&&(a=K.lastIndexOf("/PLAY?"));return K.substring(0,a).replace(/wss:\/\//ig,"https://").replace(/ws:\/\//ig,"http://")}();this.getGatewayAddr=function(){var a=X.gateway;X.ongetgatewayaddress&&(a=X.ongetgatewayaddress(a));return a};var aa="object"==typeof K||0<K.indexOf("/PLAY?"),
Za=!aa&&0<K.indexOf("invitation=");if(Za){var vb=decodeURIComponent(K),bb=vb.indexOf(' USERNAME="');0<bb&&(bb+=11,vb=vb.substring(bb,vb.indexOf('"',bb)),K+="&novice="+vb+"&server="+vb);K+="&mapClipboard=on"}if(aa)this.mode=1,da?K="":(N=640,P=480);else if(0<K.indexOf("/JOIN?")||Za)this.mode=2;Ka.symlink&&Ka.parameters&&hi5.string.queryToObj(Ka.parameters,Ka);Ka.gateway||(K+="&gateway="+encodeURIComponent(X.gateway));"useSSL"in Ka||(K+="&useSSL="+("wss"==X.protocol));this.getDisplayName=ba;this.server=
ba();this.port=parseInt(Ka.port,10);this.getURL=function(){return K};this.getColor=function(){return V};var bd=hi5.graphic.Rectangle,yb=0<K.indexOf("nocurosr=on"),Gc=0<K.indexOf("startProgram=app");K.indexOf("mapDisk=on");this.isRemoteApp=function(){return Gc};var ua=null,Nb=!1,Dc=!1,qa=0,sa=0,ra=N-1,ta=P-1,oc=0,wb=null,Va=Z,Xb=rdpBitmap.decompressInt16,Lc=rdpBitmap.decompress;t(V,!0);this.setColor=function(a){t(a,!1)};this.setResolution=function(a,g){d(a,g,!1)};var Ra={tag:0,channels:0,bitsPerSample:0,
samplePerSec:22050,toStream:function(a){a.setLittleEndian16(this.tag);a.setLittleEndian16(this.channels);a.setLittleEndian16(this.bitsPerSample);a.setLittleEndian32(this.samplePerSec)},fromStream:function(a){this.tag=a.getLittleEndian16();this.channels=a.getLittleEndian16();this.bitsPerSample=a.getLittleEndian16();this.samplePerSec=a.getLittleEndian32()}};this.setAudioFormat=function(a){Ra.tag=a.tag;Ra.channels=a.channels;Ra.samplePerSec=a.samplePerSec;Ra.bitsPerSample=a.bitsPerSample};this.running=
function(){return Nb};this.setJoinMode=function(a){x("8E1"+a)};this.setJoinCloseMode=function(a){x("8EB3\t"+a)};this.refuseControl=function(a){x("8E3"+a)};this.giveControl=function(a){x("8E4"+a)};this.pauseSession=function(a,g){x("8EB"+(g?1:0)+"\t"+a)};this.closeSession=function(a){x("8EB2\t"+a)};this.requestControl=function(){x("8E2")};this.saveSession=function(a){x("8E9"+(a.save?1:0)+"\t"+(a.timeout||0)+"\t"+(a.id||0))};this.allowJoin=function(a,g){x("8EA"+a+"\t"+(g?1:0))};var Cc=new function(){function a(){if(r&&
0<r.length){var F=r.shift();Cc.sendSingleKey(F.down,F.key);0<r.length?setTimeout(a,y):r=null}}var g={" ":57,space:57,pgup:201,pageup:201,pgdn:209,pagedown:209,end:207,home:199,left:203,up:200,right:205,down:208,printscreen:183,insert:210,del:211,"delete":211,altgr:184,windows:219,windowsright:220,context:221,esc:1,backspace:14,tab:15,enter:28,meta:29,command:29,ctrl:29,shift:42,alt:56,capslock:58,f1:59,f2:60,f3:61,f4:62,f5:63,f6:64,f7:65,f8:66,f9:67,f10:68,f11:87,f12:88,numlock:69,scrolllock:70,add:78};
this.sendSingleKey=function(F,H){var M=g[H.toLowerCase()];M?X.writeScancode(F,M):(M=H.length,0!=M&&(1==M?X.writeKeyCode(F,H.toUpperCase().charCodeAt(0)):F&&X.writeText(H)))};var r=null,y=0;this.sendKeyComb=function(F,H){F=F.split("+");var M=F.length,J;if(0!=M){var U=null,ca=[];for(J=0;J<M;J++){var la=F[J];""==la&&""==U&&(la="Add");""!=la&&ca.push({key:la,down:!0});U=la}M=ca.length;for(J=M-1;0<=J;J--)ca.push({key:ca[J].key,down:!1});if(H)r=ca,y=H,a();else for(J=0,M=ca.length;J<M;J++)Cc.sendSingleKey(ca[J].down,
ca[J].key)}}};this.writeRawInput=function(a){x(a);if(X.onactivity)X.onactivity(a);if(wb&&a.substring){var g=a.substring(0,2);a=a.substring(2);if("80"==g||"81"==g||"82"==g||"83"==g){a=a.split("\t");var r=new Uint8Array(7),y=0;var F=parseInt(a[0]);var H=parseInt(a[1]);switch(parseInt(g,16)){case 128:y=("0"==a[2]?4096:8192)|32768;break;case 129:y="0"==a[2]?4096:8192;break;case 130:y=2048;break;case 131:y="0"==a[2]?33408:33664}r[0]=32;r[1]=y&255;r[2]=y>>8;r[3]=F&255;r[4]=F>>8;r[5]=H&255;r[6]=H>>8;wb.add(new RecordingObj(r,
0,7,60))}}};var na=new D,Ha=0;this.resetStatus=w;this.notify=function(a,g){a="8E6"+a;g&&(a+="\t"+g.join(";"));x(a)};this.run=function(){G()};this.getDesktop=function(){return S};var xb=new hi5.DataBuffer([],0,0);this.suppressOutput=function(a){if(!X.sessionInfo.suppressOutput)return!1;void 0==a&&(a=!0);var g=new Uint8Array(a?3:11);g[0]=146;g[1]=3;g[2]=a?1:0;a||(g[3]=0,g[4]=0,g[5]=0,g[6]=0,g[7]=N-1,g[8]=N-1>>8,g[9]=P-1,g[10]=P-1>>8);ua.send(g.buffer);return!0};this.refreshOutput=function(a,g,r,y){var F=
new Uint8Array(r?11:3);F[0]=146;F[1]=3;F[2]=2;r&&(F[3]=a,F[4]=a>>8,F[5]=g,F[6]=g>>8,F[7]=r,F[8]=r>>8,F[9]=y,F[10]=y>>8);ua.send(F.buffer)};this.sendKeyboardSynchronize=function(a,g,r){var y=0;r&&(y|=4);g&&(y|=2);a&&(y|=1);x("8E5"+y);svGlobal.logger.info("keyboard sync, capital:"+r+" numlock:"+g+" scroll:"+a)};var Ec=new function(){var a=0,g=0,r=[0],y=new hi5.DataBuffer(r,0,0);this.addFragement=function(F,H){va(F.getData(),F.getPosition(),r,g,H);g+=H;a+=H};this.clearFragements=function(){y.setPosition(0);
y.markEnd(a);g=a=0;return y}},fb=new rdpcodecs.RemoteFX(xa),Ob=new rdpcodecs.NSCodec,Fb=Ob.process,Zb=[1,2,1,0,0,0,0,1,1,2,1,1,0,2,3,1,2,2,2,2,1,2,1,0,2,1,2,3],nc={readVar4Bytes:function(a){var g=a.getByte(),r=0;switch((g&192)>>6){case 0:r=g&63;break;case 1:r=(g&63)<<8|a.getByte();break;case 2:r=(g&63)<<16;g=a.getByte();r|=g<<8;g=a.getByte();r|=g;break;case 3:r=(g&63)<<24,g=a.getByte(),r|=g<<16,g=a.getByte(),r|=g<<8,g=a.getByte(),r|=g}return r},readVar2Bytes:function(a){var g=a.getByte();return 0!=
(g&128)?(g&127)<<8|a.getByte():g}};this._unload=pc;this.close=function(){Gb=!0;svGlobal.logger.info("closing...");if(ua&&ua.readyState!=WebSocket.CLOSING&&ua.readyState!=WebSocket.CLOSED)try{for(;ua&&ua.readyState!=WebSocket.CLOSING&&ua.readyState!=WebSocket.CLOSED;)aa||ua.readyState!=WebSocket.OPEN||x("85-1"),ua.close()}finally{pc()}else pc()}}
function BulkData(){function K(e){e=(e&1431655765)<<1|e>>>1&1431655765;e=(e&858993459)<<2|e>>>2&858993459;e=(e&252645135)<<4|e>>>4&252645135;if(0==e>>>8)return e;e=(e&16711935)<<8|e>>>8&16711935;return 0==e>>>16?e:(e&65535)<<16|e>>>16&65535}function N(e,p,z,h){var f=0,A=0,n,v,L=0!=(h&1),D=V;if(0==(h&32))return xa=0,O=z,0;0!=(h&64)&&(P=0);if(0!=(h&128)){for(h=65536;0<=--h;)D[h]=0;P=0}O=xa=0;xa=v=n=h=P;if(0==z)return 0;z+=A;do{if(0==f){if(A>=z)break;h=e[p+A++]<<24;f=8}if(0<=h){if(8>f){if(A>=z){if(0!=
h)return-1;break}h|=e[p+A++]<<24-f;f+=8}if(65536<=n)return-1;D[n++]=h>>>24&255;h<<=8;f-=8}else{h<<=1;if(0==--f){if(A>=z)return-1;h=e[p+A++]<<24;f=8}if(0<=h){if(8>f){if(A>=z)return-1;h|=e[p+A++]<<24-f;f+=8}if(65536<=n)return-1;D[n++]=(h>>>24|128)&255;h<<=8;f-=8}else{h<<=1;if(--f<(L?3:2)){if(A>=z)return-1;h|=e[p+A++]<<24-f;f+=8}if(L)switch(h>>>29){case 7:for(;9>f;f+=8){if(A>=z)return-1;h|=e[p+A++]<<24-f}h<<=3;var w=h>>>26;h<<=6;f-=9;break;case 6:for(;11>f;f+=8){if(A>=z)return-1;h|=e[p+A++]<<24-f}h<<=
3;w=(h>>>24)+64;h<<=8;f-=11;break;case 5:case 4:for(;13>f;f+=8){if(A>=z)return-1;h|=e[p+A++]<<24-f}h<<=2;w=(h>>>21)+320;h<<=11;f-=13;break;default:for(;17>f;f+=8){if(A>=z)return-1;h|=e[p+A++]<<24-f}h<<=1;w=(h>>>16)+2368;h<<=16;f-=17}else switch(h>>>30){case 3:if(8>f){if(A>=z)return-1;h|=e[p+A++]<<24-f;f+=8}h<<=2;w=h>>>26;h<<=6;f-=8;break;case 2:for(;10>f;f+=8){if(A>=z)return-1;h|=e[p+A++]<<24-f}h<<=2;w=(h>>>24)+64;h<<=8;f-=10;break;default:for(;14>f;f+=8){if(A>=z)return-1;h|=e[p+A++]<<24-f}w=(h>>>
18)+320;h<<=14;f-=14}if(0==f){if(A>=z)return-1;h=e[p+A++]<<24;f=8}if(0<=h){var G=3;h<<=1;f--}else{var I=L?14:11;do{h<<=1;if(0==--f){if(A>=z)return-1;h=e[p+A++]<<24;f=8}if(0<=h)break;if(0==--I)return-1}while(1);G=(L?16:13)-I;h<<=1;if(--f<G)for(;f<G;f+=8){if(A>=z)return-1;h|=e[p+A++]<<24-f}I=G;G=h>>>32-I&~(-1<<I)|1<<I;h<<=I;f-=I}if(65536<=n+G)return-1;w=n-w&(L?65535:8191);do D[n++]=D[w++];while(0!=--G)}}}while(1);P=n;xa=v;O=n-v;return 0}var P=0,V=new Uint8Array(65536),S=new Int32Array(8),xa=0,O=0,Ca=
[6,6,6,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,9,8,9,9,9,9,8,8,9,9,9,9,9,9,8,9,9,10,9,9,9,9,9,9,9,10,9,10,10,10,9,9,10,9,10,9,10,9,9,9,10,10,9,10,9,9,8,9,9,9,9,10,10,10,9,9,10,10,10,10,10,10,9,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,9,7,9,9,10,9,10,10,10,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,10,10,10,10,10,10,11,10,10,10,10,10,10,10,10,10,10,10,10,
10,9,10,10,10,10,10,9,10,10,10,10,10,9,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,8,9,9,10,9,10,10,10,9,10,10,10,9,9,8,7,13,13,7,7,10,7,7,6,6,6,6,5,6,6,6,5,6,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,8,5,6,7,7],ba=[123,65311,65293,65063,65024,65285,65303,65128,197,65031,65299,65216,65288,65048,65307,65203,65027,162,65090,65296,65035,65026,65169,65305,65152,233,65082,65301,65042,87,65239,65309,65294,65077,65129,65314,65304,65146,65025,65315,65300,65268,
65204,65033,65308,65220,65289,65120,65136,65298,65029,65170,65185,65306,65039,65287,65110,65302,65282,65240,65256,65310,65053,59,65535,65286,65535,65137,65161,65535,65535,65068,65067,65056,65535,65211,65231,65032,65535,65248,65037,65535,65177,65535,65028,65194,65097,65535,65047,65121,65247,65535,65279,65270,65100,65535,65535,65159,65535,65316,65535,65084,65138,65535,65535,65230,65535,65278,65535,65059,65212,65034,65193,65535,65041,65535,65154,65535,65030,65178,65269,65535,65058,65101,65119,65535,
65283,65249,65535,65226,65228,65535,65049,65535,65207,65535,65535,65155,65065,65535,65535,65535,65132,65535,65261,65535,65535,65094,65116,65045,65535,65243,65190,65535,65535,65092,65535,65036,65535,65173,65276,65535,65535,65208,5833,65535,65264,65535,65080,65535,65535,65133,65150,65535,65535,65535,65535,65115,65244,65535,65535,65260,65095,65055,65535,65151,65174,65535,65535,65189,65535,65040,65088,65074,65215,65535,65535,65236,65265,65535,65535,65535,65141,65535,65535,65165,65073,65535,65125,65051,
65535,65252,65275,65535,65535,65106,65535,65038,65535,65181,65199,65535,65535,65105,65235,65535,65312,65535,65071,65535,65535,65217,65164,65535,65535,65535,65087,65535,65535,65142,65535,65274,65107,65061,65535,65124,65253,65535,65535,65198,65535,65043,65535,65160,65182,65535,65091,65535,65535,65188,65171,65535,65535,65535,65085,65535,65535,65259,65241,65535,65044,65114,65535,65064,65149,65535,65535,65130,65535,65535,65281,65222,65224,65535,65535,65205,65535,65535,65535,65172,65144,65535,65535,65535,
65187,65535,65535,65242,65112,65535,65054,65093,65258,65535,65131,65535,65535,65079,65535,65535,65535,65148,65206,65535,65535,65272,65535,65535,65535,65223,65179,65535,65535,65535,65104,65535,65535,65197,65250,65535,65050,65123,65102,65535,65535,65273,65535,65139,65535,65535,65535,65072,65163,65535,65535,65213,65070,256,65535,65262,65234,65535,65535,65535,65196,65535,65535,65180,65156,65535,65060,65103,65271,65535,65535,65251,65122,65535,65535,65535,65535,65162,65140,65535,65535,65086,65535,65535,
65535,65233,65214,65535,65535,65069,65535,65098,65267,65535,65535,65245,65118,65046,65535,65096,65192,65535,65195,65175,65535,65535,65232,65535,65535,65229,65209,65535,65535,65535,65066,65535,65535,65158,65134,65535,65535,65535,65246,65535,65535,65117,65099,65057,65535,65263,65176,65535,65535,65153,65535,65535,65535,65191,65535,65210,65277,65535,65535,65535,65227,65535,65535,65135,65081,65535,65535,65535,65157,65535,268,65254,65127,65052,65535,65108,65202,65535,65535,65183,65535,65535,65535,65113,
65201,65535,65218,65535,65535,65078,65266,65535,65535,65238,65143,65535,65535,65535,65075,65535,65535,65167,65109,65062,266,65284,65255,65535,289,65126,65535,65535,65535,65200,65184,65535,271,65168,65535,65535,65237,65535,65535,65219,65076,65535,65535,65535,65166,65535,273,65145,65089,267],Z=[511,0,508,448,494,347,486,482],u=[4,2,3,4,3,4,4,5,4,5,5,6,6,7,7,8,7,8,8,9,9,8,9,9,9,9,9,9,9,9,9,9],C=[4065,4064,4066,4072,14,4069,4068,4074,4081,4067,21,4071,4079,70,4080,4077,4095,4087,4091,25,4093,4084,300,
4075,4094,4086,4090,137,4092,4083,4088,4082],B=[0,4,10,19],t=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,32769,49153,65537],x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,6,6,8,8,14,14],q=[2,3,4,5,6,7,8,9,10,12,14,16,18,22,26,30,34,42,50,58,66,82,98,114,130,194,258,514,2,2],m=new hi5.DataBuffer(V,0,1),l=hi5.Arrays.arraycopy,k=hi5.Arrays.fill;this.reset=
function(){P=0;V=new Uint8Array(65536);O=xa=0;m=new hi5.DataBuffer(V,0,1)};this.release=function(){V=m=S=null};this.getArrayBuffer=function(){return V.buffer.slice(xa,xa+O)};this.getData=function(){m.setPosition(xa);m.markEnd(xa+O);return m};this.toPDU=function(){var e=new Uint8Array(65576);e[0]=29;e[2]=1;e[3]=2;e[4]=P;e[5]=P>>8;e[6]=P>>16;e[7]=P>>24;e.set(V,8);e.set(new Uint8Array(S.buffer),65544);return e};this.fromStream=function(e){P=e.getLittleEndian32();var p=e.getPosition();V.set(e.getData().subarray(p,
p+65536));e.skipPosition(65536);for(p=0;8>p;p++)S[p]=e.getLittleEndian32()};this.getDecompressedLength=function(){return O};this.dec5=function(e,p,z,h){return N(e,p,z,h)};this.dec=function(e,p,z,h){if(2==(h&15)){var f=V,A=S,n=P,v=0,L=p,D=0,w=0,G=0;O=0;xa=n;0!=(h&64)&&(l(f,n-32768,f,0,32768),xa=P=n=32768);0!=(h&128)&&(n=0,k(f,0,65536,0),k(A,0,A.length,0),xa=0);if(32!=(h&32))l(e,0,f,n,z),n+=z,O=n-P;else{var I=0;for(var E=p+z;L<E&&!(G=e[L++],v|=G<<I,w+=8,I+=8,32<=I););v=K(v);L<E?(D=K(e[L++])&255,z=8):
z=0;for(;8<=w;){p=0;for(I=5;13>=I;I++)if(12!=I){G=K(v&4294967295<<32-I);var b=ba[G&511^G>>>9^G>>>4^G>>>7];0!=(b^G)>>>9?G=b&511:(b=(G>>>8^G&255)>>>2&15,0!=G>>>9&&(b=~b),G=ba[Z[(b&65535)%12]]);if(I==Ca[G])break}v<<=I;w-=I;if(256>G)f[n++]=G&255;else if(256<G&&289>G){b=G-257;I=t[b];p=d[b]-1;0!=I&&(p+=K(v&4294967295<<32-I));b=A;var W=p;var ya=b[2]|b[3]<<16;ya<<=16;b[2]=ya&65535;b[3]=ya>>>16&65535;var oa=b[0]|b[1]<<16;ya|=oa>>>16;b[2]=ya&65535;b[3]=ya>>>16&65535;oa=oa<<16|W;b[0]=oa&65535;b[1]=oa>>>16&65535;
v<<=I;w-=I}else if(288<G&&293>G)b=G-289,p=A[b],0!=b&&(I=A,W=I[0],I[0]=I[b],I[b]=W);else if(256==G)break;for(I=32-w;0<I;)if(z<I)G=D>>>8-z,v|=G<<32-w-z,w+=z,I-=z,L<E?(D=K(e[L++])&255,z=8):z=I=0;else{z>I?(v|=D>>>8-I,D<<=I,D&=255,z-=I,w=32):(v|=D>>>8-I,w=32,L<E?(D=K(e[L++])&255,z=8):z=0);break}if(0!=p){for(I=2;9>=I&&(G=K(v&4294967295<<32-I),b=C[G&31^G>>>5^G>>>9],0!=(b^G)>>>5?G=b&31:(G=G>>>4&15,G=C[B[(G^G>>>2^G>>>3)&3]]),I!=u[G]);I++);v<<=I;w-=I;I=x[G];b=q[G];0!=I&&(b+=K(v&4294967295<<32-I));v<<=I;w-=
I;W=n-p;I=b>p?p:b;for(G=0;0<I;)f[n++]=f[W++],I--;for(;b>p;)G=G>=p?0:G,f[n++]=f[W+G++],b--;for(I=32-w;0<I;)if(z<I)G=D>>>8-z,v|=G<<32-w-z,w+=z,I-=z,L<E?(D=K(e[L++])&255,z=8):z=I=0;else{z>I?(v|=D>>>8-I,D<<=I,D&=255,z-=I,w=32):(v|=D>>>8-I,w=32,L<E?(D=K(e[L++])&255,z=8):z=0);break}}}O=0!=(h&128)?n:n-P}P=n;return 0}return N(e,p,z,h)}}
function Bulk61Data(){var K=0,N=new Uint8Array(2E6),P=0,V=0,S=new hi5.DataBuffer(N,0,1),xa=hi5.Arrays.arraycopy;this.reset=function(){K=0;N=new Uint8Array(2E6);V=P=0;S=new hi5.DataBuffer(N,0,1)};this.release=function(){N=S=null};this.getArrayBuffer=function(){return N.buffer.slice(P,P+V)};this.getData=function(){S.setPosition(P);S.markEnd(P+V);return S};this.toPDU=function(){var O=new Uint8Array(2000008);O[0]=29;O[2]=1;O[3]=9;O[4]=K;O[5]=K>>8;O[6]=K>>16;O[7]=K>>24;O.set(N,8);return O};this.fromStream=
function(O){K=O.getLittleEndian32();var Ca=O.getPosition();N.set(O.getData().subarray(Ca,Ca+2E6))};this.getDecompressedLength=function(){return V};this.dec=function(O,Ca,ba,Z){0!=(Z&4)&&(K=0);P=K;V=0;var u=Ca;if(0==(Z&2)){var C=O[u++]|O[u++]<<8;Z=u+8*C;for(var B=0;B<C;B++){var t=O[u++]|O[u++]<<8,d=O[u++]|O[u++]<<8,x=O[u++]|O[u++]<<8|O[u++]<<16|O[u++]<<24;var q=d-V;xa(O,Z,N,K,q);K+=q;Z+=q;V=d;for(q=0;q<t;q++)N[K++]=N[x++],V++}}else Z=u;if(q=Ca+ba-Z)xa(O,Z,N,K,q),V+=q,K+=q;return 0}}var rdpBitmap=rdpcodecs.bitmap;
function MSGSMEncoder(){function K(b,W){return-32768==b&&-32768==W?32767:b*W>>15<<16>>16}function N(b,W){return-32768==b&&-32768==W?32767:b*W+16384>>15<<16>>16}function P(b,W){if(0>=b){if(0<=W)return b+W;b=-(b+1)-(W+1);return 2147483647<=b?-2147483648:-b-2}if(0>=W)return b+W;b+=W;return 2147483647<b?2147483647:b}function V(b){if(0>b){if(-1073741824>=b)return 0;b=~b}return(0!=(b&4294901760)?0!=(b&4278190080)?-1+A[255&b>>24]:7+A[255&b>>16]:0!=(b&65280)?15+A[255&b>>8]:23+A[255&b])<<16>>16}function S(b,
W){return 16<=W?0>b?-1:-0:-16>=W?0:0>W?b<<-W<<16>>16:b>>W<<16>>16}function xa(b,W,ya,oa,Ia,Ba){b=K(b<<16>>16,Ia[Ba]);W=b+(W<<16>>16);W=(-32768>W?-32768:32767<W?32767:W)+256;b=(-32768>W?-32768:32767<W?32767:W)>>9<<16>>16;Ia[Ba]=(b>ya?ya-oa:b<oa?0:b-oa)<<16>>16}function O(b,W){b=E[b+3*W]>>2<<16>>16;return b*b}function Ca(b,W,ya,oa,Ia,Ba,Ea){b=b[ya]+Ba;Ia=((-32768>b?-32768:32767<b?32767:b)<<26>>16)-(Ia<<17>>16);oa=N(Ea,-32768>Ia?-32768:32767<Ia?32767:Ia);Ea=oa+oa;W[ya]=-32768>Ea?-32768:32767<Ea?32767:
Ea}function ba(b){for(var W,ya,oa=0;8>oa;oa++)0>b[oa]?(W=(-32768==b[oa]?32767:-b[oa])<<16>>16,ya=(W>>2<<16>>16)+26112,b[oa]=-(11059>W?W<<1:20070>W?W+11059:-32768>ya?-32768:32767<ya?32767:ya)<<16>>16):(W=b[oa],ya=(W>>2<<16>>16)+26112,b[oa]=(11059>W?W<<1:20070>W?W+11059:-32768>ya?-32768:32767<ya?32767:ya)<<16>>16)}function Z(b,W,ya,oa,Ia){for(var Ba=b.u,Ea,Q,Yb,sb,Wa,zb;0!=ya;){ya--;Ea=sb=oa[Ia];for(zb=0;8>zb;zb++)Yb=Ba[zb],Wa=W[zb],Ba[zb]=sb,Q=N(Wa,Ea),sb=Yb+Q,sb=-32768>sb?-32768:32767<sb?32767:sb,
Q=N(Wa,Yb),Ea+=Q,Ea=-32768>Ea?-32768:32767<Ea?32767:Ea;oa[Ia++]=Ea}b.u=Ba}var u=[6554,16384,26214,32767],C=[29128,26215,23832,21846,20165,18725,17476,16384],B=[18431,20479,22527,24575,26623,28671,30719,32767],t=new function(){this.dp0=new Int16Array(280);this.mp=this.l_z2=this.z1=0;this.u=new Int16Array(8);this.larpp=[new Int16Array(8),new Int16Array(8)];this.j=0;this.nrp=40;this.v=new Int16Array(9);this.msr=0},d=new Int16Array(8),x=new Int16Array(4),q=new Int16Array(4),m=new Int16Array(4),l=new Int16Array(4),
k=new Int16Array(52),e=new Int16Array(160),p=new Uint8Array(33),z=0,h=hi5.Arrays.arraycopy;this.encode=function(b,W,ya,oa){for(var Ia=W,Ba,Ea=0;160>Ea;Ea++)Ba=b[Ia++],e[Ea]=0>Ba?32768*Ba:32767*Ba;f=!f;for(var Q=0,Yb=0,sb=0,Wa=0,zb=120,cd=new Int16Array(50),T=new Int16Array(160),nd=0,yd=0,ia=t.z1,Ab=t.l_z2,Fc=t.mp,ad,wc,id,pc,Hc,mc,X=160;0!=X;){X--;pc=e[nd++]>>3<<2<<16>>16;ad=pc-ia<<16>>16;ia=pc;Hc=ad;Hc<<=15;wc=Ab>>15<<16>>16;id=Ab-(wc<<15)<<16>>16;Hc+=N(id,32735);mc=32735*wc;Ab=P(mc,Hc);mc=P(Ab,
16384);wc=N(Fc,-28180);Fc=mc>>15<<16>>16;var Gb=Fc+wc;T[yd++]=-32768>Gb?-32768:32767<Gb?32767:Gb}t.z1=ia;t.l_z2=Ab;t.mp=Fc;var gb,da=0,Ka=0,va;for(va=0;159>=va;va++){var za=T[va]+0;var Sa=-32768>za?-32768:32767<za?32767:za;Sa>Ka&&(Ka=Sa)}var Pa=0==Ka?0:4-V(Ka<<16)<<16>>16;if(0<Pa)switch(Pa){case 1:for(va=0;159>=va;va++)T[va]=N(T[va],16384);break;case 2:for(va=0;159>=va;va++)T[va]=N(T[va],8192);break;case 3:for(va=0;159>=va;va++)T[va]=N(T[va],4096);break;case 4:for(va=0;159>=va;va++)T[va]=N(T[va],
2048)}var aa=T[da];h([0,0,0,0,0,0,0,0,0],0,n,0,n.length);n[0]+=aa*T[da-0];aa=T[++da];n[0]+=aa*T[da-0];n[1]+=aa*T[da-1];aa=T[++da];n[0]+=aa*T[da-0];n[1]+=aa*T[da-1];n[2]+=aa*T[da-2];aa=T[++da];n[0]+=aa*T[da-0];n[1]+=aa*T[da-1];n[2]+=aa*T[da-2];n[3]+=aa*T[da-3];aa=T[++da];n[0]+=aa*T[da-0];n[1]+=aa*T[da-1];n[2]+=aa*T[da-2];n[3]+=aa*T[da-3];n[4]+=aa*T[da-4];aa=T[++da];n[0]+=aa*T[da-0];n[1]+=aa*T[da-1];n[2]+=aa*T[da-2];n[3]+=aa*T[da-3];n[4]+=aa*T[da-4];n[5]+=aa*T[da-5];aa=T[++da];n[0]+=aa*T[da-0];n[1]+=
aa*T[da-1];n[2]+=aa*T[da-2];n[3]+=aa*T[da-3];n[4]+=aa*T[da-4];n[5]+=aa*T[da-5];n[6]+=aa*T[da-6];aa=T[++da];n[0]+=aa*T[da-0];n[1]+=aa*T[da-1];n[2]+=aa*T[da-2];n[3]+=aa*T[da-3];n[4]+=aa*T[da-4];n[5]+=aa*T[da-5];n[6]+=aa*T[da-6];n[7]+=aa*T[da-7];++da;for(gb=da;160>gb;++gb)aa=T[gb],n[0]+=aa*T[gb-0],n[1]+=aa*T[gb-1],n[2]+=aa*T[gb-2],n[3]+=aa*T[gb-3],n[4]+=aa*T[gb-4],n[5]+=aa*T[gb-5],n[6]+=aa*T[gb-6],n[7]+=aa*T[gb-7],n[8]+=aa*T[gb-8];for(va=0;9>va;va++)n[va]<<=1;if(0<Pa)for(va=0;160>va;va++)T[va]<<=Pa;
var Za=new Int16Array(1),vb=0,bb,bd=new Int16Array(9),yb=new Int16Array(9),Gc=new Int16Array(9);if(0==n[0])for(bb=0;8>bb;bb++)d[bb]=0;else{Za[0]=V(n[0]);for(bb=0;8>=bb;bb++)bd[bb]=n[bb]<<Za[0]>>16;h(bd,0,Gc,0,7);h(bd,0,yb,0,8);for(var ua=1;8>=ua;ua++,vb++){Za[0]=yb[1];Za[0]=(0>Za[0]?-32768==Za[0]?32767:-Za[0]:Za[0])<<16>>16;if(yb[0]<Za[0]){for(bb=ua;8>bb;bb++)d[bb]=0;break}var Nb=vb;var Dc=Za[0],qa=Dc,sa=yb[0],ra=0,ta=15;if(0==Dc)var oc=0;else{for(;0!=ta;)ta--,ra=ra<<17>>16,qa<<=1,qa>=sa&&(qa-=sa,
ra++);oc=ra<<16>>16}d[Nb]=oc;0<yb[1]&&(d[vb]=-d[vb]);if(8==ua)break;Za[0]=N(yb[1],d[vb]);var wb=yb[0]+Za[0];yb[0]=-32768>wb?-32768:32767<wb?32767:wb;for(var Va=1;Va<=8-ua;Va++){Za[0]=N(Gc[Va],d[vb]);var Xb=yb[Va+1]+Za[0];yb[Va]=-32768>Xb?-32768:32767<Xb?32767:Xb;Za[0]=N(yb[Va+1],d[vb]);var Lc=Gc[Va]+Za[0];Gc[Va]=-32768>Lc?-32768:32767<Lc?32767:Lc}}}for(var Ra,Cc=0;8>Cc;Cc++)Ra=d[Cc],Ra=(0>Ra?-32768==Ra?32767:-Ra:Ra)<<16>>16,22118>Ra?Ra>>=1:31130>Ra?Ra-=11059:(Ra-=26112,Ra<<=2),d[Cc]=0>d[Cc]?-Ra:Ra;
var na=0;xa(20480,0,31,-32,d,na++);xa(20480,0,31,-32,d,na++);xa(20480,2048,15,-16,d,na++);xa(20480,-2560,15,-16,d,na++);xa(13964,94,7,-8,d,na++);xa(15360,-1792,7,-8,d,na++);xa(8534,-341,3,-4,d,na++);xa(9036,-1144,3,-4,d,na++);var Ha=new Int16Array(8),xb=t.j;var Ec=xb^1;t.j=Ec;var fb=t.larpp[xb],Ob=t.larpp[Ec],Fb=0;Ca(d,fb,Fb++,0,0,-32,13107);Ca(d,fb,Fb++,0,0,-32,13107);Ca(d,fb,Fb++,0,2048,-16,13107);Ca(d,fb,Fb++,0,-2560,-16,13107);Ca(d,fb,Fb++,0,94,-8,19223);Ca(d,fb,Fb++,0,-1792,-8,17476);Ca(d,fb,
Fb++,0,-341,-4,31454);Ca(d,fb,Fb++,0,-1144,-4,29708);for(var Zb=0;8>Zb;Zb++){var nc=(Ob[Zb]>>2<<16>>16)+(fb[Zb]>>2<<16>>16);Ha[Zb]=-32768>nc?-32768:32767<nc?32767:nc;var a=Ha[Zb]+(Ob[Zb]>>1<<16>>16);Ha[Zb]=-32768>a?-32768:32767<a?32767:a}ba(Ha);Z(t,Ha,13,T,0);for(var g=0;8>g;g++){var r=(Ob[g]>>1<<16>>16)+(fb[g]>>1<<16>>16);Ha[g]=-32768>r?-32768:32767<r?32767:r}ba(Ha);Z(t,Ha,14,T,13);for(var y=0;8>y;y++){var F=(Ob[y]>>2<<16>>16)+(fb[y]>>2<<16>>16);Ha[y]=-32768>F?-32768:32767<F?32767:F;var H=Ha[y]+
(fb[y]>>1<<16>>16);Ha[y]=-32768>H?-32768:32767<H?32767:H}ba(Ha);Z(t,Ha,13,T,27);for(var M=0;8>M;M++)Ha[M]=fb[M];ba(Ha);Z(t,Ha,120,T,40);for(var J=t.dp0,U,ca,la=0;3>=la;la++,Yb+=13){for(var Da=T,Aa=40*la,ma=cd,wa=J,$b=J,Ic=zb,Pb=x,qc=m,$a=sb++,Ta=void 0,rc=void 0,gc=void 0,hc=void 0,Hb=void 0,tb=void 0,Mc=void 0,fa=void 0,dd=Da,ac=Aa,ea=wa,Y=Ic,Ib=qc,Nc=Pb,bc=$a,ha=new Int16Array(40),sc=0,hb=0;39>=hb;hb++)Ta=dd[hb+ac],Ta=(0>Ta?-32768==Ta?32767:-Ta:Ta)<<16>>16,Ta>sc&&(sc=Ta);Ta=0;0!=sc&&(Ta=V(sc<<16));
rc=6<Ta?0:6-Ta<<16>>16;for(hb=0;39>=hb;hb++)ha[hb]=dd[hb+ac]>>rc;tb=0;for(fa=Mc=40;120>=fa;fa++){var R=1;var ja=ha[0]*ea[Y-fa];ja+=ha[1]*ea[R+Y-fa];R++;ja+=ha[2]*ea[R+Y-fa];R++;ja+=ha[3]*ea[R+Y-fa];R++;ja+=ha[4]*ea[R+Y-fa];R++;ja+=ha[5]*ea[R+Y-fa];R++;ja+=ha[6]*ea[R+Y-fa];R++;ja+=ha[7]*ea[R+Y-fa];R++;ja+=ha[8]*ea[R+Y-fa];R++;ja+=ha[9]*ea[R+Y-fa];R++;ja+=ha[10]*ea[R+Y-fa];R++;ja+=ha[11]*ea[R+Y-fa];R++;ja+=ha[12]*ea[R+Y-fa];R++;ja+=ha[13]*ea[R+Y-fa];R++;ja+=ha[14]*ea[R+Y-fa];R++;ja+=ha[15]*ea[R+Y-fa];
R++;ja+=ha[16]*ea[R+Y-fa];R++;ja+=ha[17]*ea[R+Y-fa];R++;ja+=ha[18]*ea[R+Y-fa];R++;ja+=ha[19]*ea[R+Y-fa];R++;ja+=ha[20]*ea[R+Y-fa];R++;ja+=ha[21]*ea[R+Y-fa];R++;ja+=ha[22]*ea[R+Y-fa];R++;ja+=ha[23]*ea[R+Y-fa];R++;ja+=ha[24]*ea[R+Y-fa];R++;ja+=ha[25]*ea[R+Y-fa];R++;ja+=ha[26]*ea[R+Y-fa];R++;ja+=ha[27]*ea[R+Y-fa];R++;ja+=ha[28]*ea[R+Y-fa];R++;ja+=ha[29]*ea[R+Y-fa];R++;ja+=ha[30]*ea[R+Y-fa];R++;ja+=ha[31]*ea[R+Y-fa];R++;ja+=ha[32]*ea[R+Y-fa];R++;ja+=ha[33]*ea[R+Y-fa];R++;ja+=ha[34]*ea[R+Y-fa];R++;ja+=
ha[35]*ea[R+Y-fa];R++;ja+=ha[36]*ea[R+Y-fa];R++;ja+=ha[37]*ea[R+Y-fa];R++;ja+=ha[38]*ea[R+Y-fa];R++;ja+=ha[39]*ea[R+Y-fa];ja>tb&&(Mc=fa<<16>>16,tb=ja)}Nc[bc]=Mc;tb=tb<<1>>6-rc;for(hb=Hb=0;39>=hb;hb++){var ed=ea[hb-Mc+Y]>>3<<16>>16;Hb+=ed*ed}Hb<<=1;if(0>=tb)Ib[bc]=0;else if(tb>=Hb)Ib[bc]=3;else{Ta=V(Hb);hc=tb<<Ta>>16<<16>>16;gc=Hb<<Ta>>16<<16>>16;for(var Jb=0;2>=Jb&&!(hc<=K(gc,u[Jb]));Jb++)Ib[bc]=Jb}var La=void 0,ka=void 0,ab=void 0,ic=Pb[$a],tc=wa,Oc=Da,Pc=Aa,Qb=$b,Qc=ma,mb=Ic;switch(qc[$a]){case 0:ab=
3277;for(ka=0;39>=ka;ka++)Qb[ka+mb]=N(ab,tc[ka-ic+mb]),La=Oc[ka+Pc]-Qb[ka+mb],Qc[ka+5]=-32768>La?-32768:32767<La?32767:La;break;case 1:ab=11469;for(ka=0;39>=ka;ka++)Qb[ka+mb]=N(ab,tc[ka-ic+mb]),La=Oc[ka+Pc]-Qb[ka+mb],Qc[ka+5]=-32768>La?-32768:32767<La?32767:La;break;case 2:ab=21299;for(ka=0;39>=ka;ka++)Qb[ka+mb]=N(ab,tc[ka-ic+mb]),La=Oc[ka+Pc]-Qb[ka+mb],Qc[ka+5]=-32768>La?-32768:32767<La?32767:La;break;case 3:for(ab=32767,ka=0;39>=ka;ka++)Qb[ka+mb]=N(ab,tc[ka-ic+mb]),La=Oc[ka+Pc]-Qb[ka+mb],Qc[ka+
5]=-32768>La?-32768:32767<La?32767:La}for(var fd=cd,jc=l,gd=q,Jc=Wa++,Bb=k,cc=Yb,Ma=new Int16Array(13),dc=new Int16Array(13),ub=void 0,cb=fd,Xa=0;39>=Xa;Xa++)ub=4096,ub+=-134*cb[Xa+0]+-374*cb[Xa+1]+2054*cb[Xa+3]+5741*cb[Xa+4]+8192*cb[Xa+5]+5741*cb[Xa+6]+2054*cb[Xa+7]+-374*cb[Xa+9]+-134*cb[Xa+10],ub=ub>>13<<16>>16,E[Xa]=-32768>ub?-32768:32767<ub?32767:ub;var Rb=void 0,Cb=void 0,db=void 0,Rc=Ma,Sc=gd,od=Jc,uc=0;Rb=db=0+(O(0,1)+O(0,2)+O(0,3)+O(0,4)+O(0,5)+O(0,6)+O(0,7)+O(0,8)+O(0,9)+O(0,10)+O(0,11)+
O(0,12));db+=O(0,0);Cb=db<<1;db=0+(O(1,0)+O(1,1)+O(1,2)+O(1,3)+O(1,4)+O(1,5)+O(1,6)+O(1,7)+O(1,8)+O(1,9)+O(1,10)+O(1,11)+O(1,12));db<<=1;db>Cb&&(uc=1,Cb=db);db=0+(O(2,0)+O(2,1)+O(2,2)+O(2,3)+O(2,4)+O(2,5)+O(2,6)+O(2,7)+O(2,8)+O(2,9)+O(2,10)+O(2,11)+O(2,12));db<<=1;db>Cb&&(uc=2,Cb=db);db=Rb+O(3,12);db<<=1;db>Cb&&(uc=3);for(var nb=0;12>=nb;nb++)Rc[nb]=E[uc+3*nb];Sc[od]=uc;var Fa=void 0,Ua=void 0,vc=void 0,Sb=void 0,Tc=void 0,ec=void 0,Ga=void 0,Db=void 0,Tb=void 0,pd=Ma,Ad=Bb,hd=cc,kc=jc,ib=Jc,Kb=0;
for(Ua=0;12>=Ua;Ua++)Ga=pd[Ua],Ga=0>Ga?-32768==Ga?32767:-Ga:Ga,Ga>Kb&&(Kb=Ga);Sb=0;Ga=Kb>>9<<16>>16;for(Ua=Tb=0;5>=Ua;Ua++)Tb=0>=Ga?Tb|1:Tb|0,Ga=Ga>>1<<16>>16,0==Tb&&Sb++;var xc=(Kb>>(Sb+5<<16>>16)<<16>>16)+(Sb<<3<<16>>16);Db=-32768>xc?-32768:32767<xc?32767:xc;var Eb=0;15<Db&&(Eb=(Db>>3<<16>>16)-1<<16>>16);Fa=Db-(Eb<<3)<<16>>16;if(0==Fa)Eb=-4,Fa=7;else{for(;7>=Fa;)Fa=(Fa<<1|1)<<16>>16,Eb--;Fa-=8}I==I?(v=Eb,L=Fa):(D=Eb,w=Fa);Sb=v;vc=L;ec=6-Sb<<16>>16;Tc=C[vc];for(Ua=0;12>=Ua;Ua++)Ga=pd[Ua]<<ec<<16>>
16,Ga=K(Ga,Tc),Ga=Ga>>12<<16>>16,Ad[Ua+hd]=Ga+4<<16>>16;L=vc;v=Sb;kc[ib]=Db;var Ub=void 0,ob=void 0,yc=void 0,Uc=void 0,Vc=void 0,pb=void 0,Na=Bb,zc=dc,Wc=cc;I==I?(Vc=B[L],ob=6-v<<16>>16):(Vc=B[w],ob=6-D<<16>>16);Uc=-32768>ob?-32768:32767<ob?32767:ob;ob=Uc-1;var lc=-32768>ob?-32768:32767<ob?32767:ob;yc=16<=lc?0:-16>=lc?-0:0>lc?S(1,-lc):1<<lc<<16>>16;for(var Xc=G=0;13>Xc;Xc++)pb=(Na[Wc++]<<1)-7<<16>>16,pb=pb<<28>>16,pb=N(Vc,pb),Ub=pb+yc,pb=-32768>Ub?-32768:32767<Ub?32767:Ub,zc[G++]=S(pb,Uc);var Ja=
void 0,qb=dc,pa=fd,Lb=I,rb=13,Vb=0;Ja=Lb==I?5:0;switch(gd[Jc]){case 3:pa[Ja++]=0;do pa[Ja++]=0,pa[Ja++]=0,pa[Ja++]=qb[Vb++],--rb;while(0!=rb);break;case 2:do pa[Ja++]=0,pa[Ja++]=0,pa[Ja++]=qb[Vb++],--rb;while(0!=rb);break;case 1:do pa[Ja++]=0,pa[Ja++]=qb[Vb++],pa[Ja++]=0,--rb;while(0!=rb);break;case 0:do pa[Ja++]=qb[Vb++],pa[Ja++]=0,pa[Ja++]=0,--rb;while(0!=rb)}Lb==I&&(pa[Ja++]=0);for(U=0;39>=U;U++)ca=cd[5+U]+J[U+zb],J[U+zb]=-32768>ca?-32768:32767<ca?32767:ca;zb+=40}for(U=0;120>U;U++)J[U]=J[160+U];
if(f){var c=d[0]<<4|d[1]<<10;p[Q++]=c>>4;c=c>>5|d[2]<<11;p[Q++]=c>>7;c=c>>5|d[3]<<11;c=c>>4|d[4]<<12;p[Q++]=c>>6;c=c>>4|d[5]<<12;c=c>>3|d[6]<<13;p[Q++]=c>>7;c=c>>3|d[7]<<13;c=c>>7|x[0]<<9;p[Q++]=c>>5;c=c>>2|m[0]<<14;c=c>>2|q[0]<<14;c=c>>6|l[0]<<10;p[Q++]=c>>3;c=c>>3|k[0]<<13;p[Q++]=c>>8;c=c>>3|k[1]<<13;c=c>>3|k[2]<<13;c=c>>3|k[3]<<13;p[Q++]=c>>7;c=c>>3|k[4]<<13;c=c>>3|k[5]<<13;c=c>>3|k[6]<<13;p[Q++]=c>>6;c=c>>3|k[7]<<13;c=c>>3|k[8]<<13;p[Q++]=c>>8;c=c>>3|k[9]<<13;c=c>>3|k[10]<<13;c=c>>3|k[11]<<13;
p[Q++]=c>>7;c=c>>3|k[12]<<13;c=c>>7|x[1]<<9;p[Q++]=c>>5;c=c>>2|m[1]<<14;c=c>>2|q[1]<<14;c=c>>6|l[1]<<10;p[Q++]=c>>3;c=c>>3|k[13]<<13;p[Q++]=c>>8;c=c>>3|k[14]<<13;c=c>>3|k[15]<<13;c=c>>3|k[16]<<13;p[Q++]=c>>7;c=c>>3|k[17]<<13;c=c>>3|k[18]<<13;c=c>>3|k[19]<<13;p[Q++]=c>>6;c=c>>3|k[20]<<13;c=c>>3|k[21]<<13;p[Q++]=c>>8;c=c>>3|k[22]<<13;c=c>>3|k[23]<<13;c=c>>3|k[24]<<13;p[Q++]=c>>7;c=c>>3|k[25]<<13;c=c>>7|x[2]<<9;p[Q++]=c>>5;c=c>>2|m[2]<<14;c=c>>2|q[2]<<14;c=c>>6|l[2]<<10;p[Q++]=c>>3;c=c>>3|k[26]<<13;
p[Q++]=c>>8;c=c>>3|k[27]<<13;c=c>>3|k[28]<<13;c=c>>3|k[29]<<13;p[Q++]=c>>7;c=c>>3|k[30]<<13;c=c>>3|k[31]<<13;c=c>>3|k[32]<<13;p[Q++]=c>>6;c=c>>3|k[33]<<13;c=c>>3|k[34]<<13;p[Q++]=c>>8;c=c>>3|k[35]<<13;c=c>>3|k[36]<<13;c=c>>3|k[37]<<13;p[Q++]=c>>7;c=c>>3|k[38]<<13;c=c>>7|x[3]<<9;p[Q++]=c>>5;c=c>>2|m[3]<<14;c=c>>2|q[3]<<14;c=c>>6|l[3]<<10;p[Q++]=c>>3;c=c>>3|k[39]<<13;p[Q++]=c>>8;c=c>>3|k[40]<<13;c=c>>3|k[41]<<13;c=c>>3|k[42]<<13;p[Q++]=c>>7;c=c>>3|k[43]<<13;c=c>>3|k[44]<<13;c=c>>3|k[45]<<13;p[Q++]=
c>>6;c=c>>3|k[46]<<13;c=c>>3|k[47]<<13;p[Q++]=c>>8;c=c>>3|k[48]<<13;c=c>>3|k[49]<<13;c=c>>3|k[50]<<13;p[Q++]=c>>7;c=c>>3|k[51]<<13;p[Q]=c>>12;z=p[Q]}else c=z<<6|d[0]<<10,p[Q++]=c>>6,c=c>>6|d[1]<<10,p[Q++]=c>>8,c=c>>5|d[2]<<11,c=c>>5|d[3]<<11,p[Q++]=c>>6,c=c>>4|d[4]<<12,c=c>>4|d[5]<<12,p[Q++]=c>>6,c=c>>3|d[6]<<13,c=c>>3|d[7]<<13,p[Q++]=c>>8,c=c>>7|x[0]<<9,c=c>>2|m[0]<<14,p[Q++]=c>>7,c=c>>2|q[0]<<14,c=c>>6|l[0]<<10,p[Q++]=c>>7,c=c>>3|k[0]<<13,c=c>>3|k[1]<<13,c=c>>3|k[2]<<13,p[Q++]=c>>6,c=c>>3|k[3]<<
13,c=c>>3|k[4]<<13,p[Q++]=c>>8,c=c>>3|k[5]<<13,c=c>>3|k[6]<<13,c=c>>3|k[7]<<13,p[Q++]=c>>7,c=c>>3|k[8]<<13,c=c>>3|k[9]<<13,c=c>>3|k[10]<<13,p[Q++]=c>>6,c=c>>3|k[11]<<13,c=c>>3|k[12]<<13,p[Q++]=c>>8,c=c>>7|x[1]<<9,c=c>>2|m[1]<<14,p[Q++]=c>>7,c=c>>2|q[1]<<14,c=c>>6|l[1]<<10,p[Q++]=c>>7,c=c>>3|k[13]<<13,c=c>>3|k[14]<<13,c=c>>3|k[15]<<13,p[Q++]=c>>6,c=c>>3|k[16]<<13,c=c>>3|k[17]<<13,p[Q++]=c>>8,c=c>>3|k[18]<<13,c=c>>3|k[19]<<13,c=c>>3|k[20]<<13,p[Q++]=c>>7,c=c>>3|k[21]<<13,c=c>>3|k[22]<<13,c=c>>3|k[23]<<
13,p[Q++]=c>>6,c=c>>3|k[24]<<13,c=c>>3|k[25]<<13,p[Q++]=c>>8,c=c>>7|x[2]<<9,c=c>>2|m[2]<<14,p[Q++]=c>>7,c=c>>2|q[2]<<14,c=c>>6|l[2]<<10,p[Q++]=c>>7,c=c>>3|k[26]<<13,c=c>>3|k[27]<<13,c=c>>3|k[28]<<13,p[Q++]=c>>6,c=c>>3|k[29]<<13,c=c>>3|k[30]<<13,p[Q++]=c>>8,c=c>>3|k[31]<<13,c=c>>3|k[32]<<13,c=c>>3|k[33]<<13,p[Q++]=c>>7,c=c>>3|k[34]<<13,c=c>>3|k[35]<<13,c=c>>3|k[36]<<13,p[Q++]=c>>6,c=c>>3|k[37]<<13,c=c>>3|k[38]<<13,p[Q++]=c>>8,c=c>>7|x[3]<<9,c=c>>2|m[3]<<14,p[Q++]=c>>7,c=c>>2|q[3]<<14,c=c>>6|l[3]<<
10,p[Q++]=c>>7,c=c>>3|k[39]<<13,c=c>>3|k[40]<<13,c=c>>3|k[41]<<13,p[Q++]=c>>6,c=c>>3|k[42]<<13,c=c>>3|k[43]<<13,p[Q++]=c>>8,c=c>>3|k[44]<<13,c=c>>3|k[45]<<13,c=c>>3|k[46]<<13,p[Q++]=c>>7,c=c>>3|k[47]<<13,c=c>>3|k[48]<<13,c=c>>3|k[49]<<13,p[Q++]=c>>6,c=c>>3|k[50]<<13,c=c>>3|k[51]<<13,p[Q++]=c>>8;var Wb,Ac=f?32:33;for(Wb=0;Wb<Ac;Wb++)ya[Wb+oa]=p[Wb];return Ac};var f=!1,A=[8,7,6,6,5,5,5,5,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=new Int32Array(9),v=0,L=0,D=0,w=0,G=0,I=0,E=new Int16Array(40)}
function MSGSM(){function K(h,f,A,n,v,L,D,w){var G=0;k(e,0,160,0);k(p,0,40,0);for(var I=0;3>=I;I++,G+=13){var E=v[I],b=A[I],W=G,ya=L,oa=p,Ia=new Int32Array(13);Ia.buffer||k(Ia,0,13,0);var Ba=0;15<E&&(Ba=(E>>3)-1);E-=Ba<<3;if(0==E)Ba=-4,E=7;else{for(;7>=E;)E=E<<1|1,Ba--;E-=8}var Ea=Array(2);Ea[0]=Ba;Ea[1]=E;Ba=Ia;E=W;W=ba[Ea[1]];Ea=O(6,Ea[0]);var Q=O(Ea,1);Q=16<=Q?0:-16>=Q?-0:0>Q?Ca(1,-Q):1<<Q;for(var Yb=0,sb=0;13>sb;sb++){var Wa=(ya[E++]<<1)-7;Wa<<=12;Wa=S(W,Wa);Wa+=Q;-32768>Wa?Wa=-32768:32767<Wa&&
(Wa=32767);Ba[Yb++]=Ca(Wa,Ea)}ya=13;W=Ba=0;switch(b){case 3:oa[W++]=0;case 2:oa[W++]=0;case 1:oa[W++]=0;case 0:oa[W++]=Ia[Ba++],ya--}do oa[W++]=0,oa[W++]=0,oa[W++]=Ia[Ba++];while(0<--ya);for(;4>++b;)oa[W++]=0;Ia=f[I];b=n[I];oa=p;t=Ia=40>Ia||120<Ia?t:Ia;ya=Z[b];for(Ba=0;39>=Ba;Ba++)b=S(ya,u[Ba-Ia+120]),b+=oa[Ba],-32768>b?b=-32768:32767<b&&(b=32767),u[Ba+120]=b;l(u,40,u,0,120);l(u,120,e,40*I,39)}f=C[B];A=C[B^=1];n=0;N(h,f,n++,0,0,-32,13107);N(h,f,n++,0,0,-32,13107);N(h,f,n++,0,2048,-16,13107);N(h,f,
n++,0,-2560,-16,13107);N(h,f,n++,0,94,-8,19223);N(h,f,n++,0,-1792,-8,17476);N(h,f,n++,0,-341,-4,31454);N(h,f,n++,0,-1144,-4,29708);h=z;for(v=0;8>v;v++)n=(A[v]>>2)+(f[v]>>2),-32768>n?n=-32768:32767<n&&(n=32767),n+=A[v]>>1,-32768>n?n=-32768:32767<n&&(n=32767),h[v]=n;P(z);V(z,13,e,D,0,w);h=z;for(v=0;8>v;v++)n=(A[v]>>1)+(f[v]>>1),-32768>n?n=-32768:32767<n&&(n=32767),h[v]=n;P(z);V(z,14,e,D,13,w);h=z;for(v=0;8>v;v++)n=(A[v]>>2)+(f[v]>>2),-32768>n?n=-32768:32767<n&&(n=32767),n+=f[v]>>1,-32768>n?n=-32768:
32767<n&&(n=32767),h[v]=n;P(z);V(z,13,e,D,27,w);h=z;for(A=0;8>A;A++)h[A]=f[A];P(z);V(z,120,e,D,40,w);f=w;for(A=w+160;A-- >w;f++)h=S(x,28180),x=D[f]+h,-32768>x?x=-32768:32767<x&&(x=32767),h=x<<1,-32768>h?h=-32768:32767<h&&(h=32767),D[f]=h}function N(h,f,A,n,v,L,D){n=h[A]+L;-32768>n?n=-32768:32767<n&&(n=32767);n=O(n<<10,v<<1);n=S(D,n);n+=n;-32768>n?n=-32768:32767<n&&(n=32767);f[A]=n}function P(h){for(var f,A=0;8>A;A++)0>h[A]?(f=-32768==h[A]?32767:-h[A],h[A]=-(11059>f?f<<1:20070>f?f+11059:xa(f>>2,26112))):
(f=h[A],h[A]=11059>f?f<<1:20070>f?f+11059:xa(f>>2,26112))}function V(h,f,A,n,v,L){for(var D,w,G;0!=f;){f--;D=A[v];for(var I=7;0<=I;I--)w=h[I],G=d[I],G=((-32768==w&&-32768==G?32767:65535&w*G+16384>>15)&65535)<<16>>16,D=O(D,G),w=((-32768==w&&-32768==D?32767:65535&w*D+16384>>15)&65535)<<16>>16,w=d[I]+w,-32768>w?w=-32768:32767<w&&(w=32767),d[I+1]=w;n[L+v++]=d[0]=D}}function S(h,f){return-32768==h&&-32768==f?32767:(h*f+16384>>15&65535)<<16>>16}function xa(h,f){h+=f;return-32768>h?-32768:32767<h?32767:
h}function O(h,f){h-=f;return-32768>h?-32768:32767<h?32767:h}function Ca(h,f){return 16<=f?0>h?-1:0:-16>=f?0:0>f?h<<-f:h>>f}var ba=[18431,20479,22527,24575,26623,28671,30719,32767],Z=[3277,11469,21299,32767],u=new Int32Array(280),C=[new Int32Array(8),new Int32Array(8)],B=0,t=40,d=new Int32Array(9),x=0,q=new Int32Array(320);q[0]=0;var m=[.1],l=hi5.Arrays.arraycopy,k=hi5.Arrays.fill;this.decode=function(h,f,A){var n=0,v;A=f+A;for(var L=new Int32Array(8),D=new Int32Array(4),w=new Int32Array(4),G=new Int32Array(4),
I=new Int32Array(4),E=new Int32Array(52);f<A;){var b=h[f++]&255;L[0]=b&63;b>>>=6;b|=h[f++]<<2&1023;L[1]=b&63;b>>>=6;b|=h[f++]<<4&4095;L[2]=b&31;b>>>=5;L[3]=b&31;b>>>=5;b|=h[f++]<<2&1023;L[4]=b&15;b>>>=4;L[5]=b&15;b>>>=4;b|=h[f++]<<2&1023;L[6]=b&7;b>>>=3;L[7]=b&7;b>>>=3;b|=h[f++]<<4&4095;D[0]=b&127;b>>>=7;G[0]=b&3;b>>>=2;w[0]=b&3;b>>>=2;b|=h[f++]<<1&511;I[0]=b&63;b>>>=6;E[0]=b&7;b=h[f++]&255;E[1]=b&7;b>>>=3;E[2]=b&7;b>>>=3;b|=h[f++]<<2&1023;E[3]=b&7;b>>>=3;E[4]=b&7;b>>>=3;E[5]=b&7;b>>>=3;b|=h[f++]<<
1&511;E[6]=b&7;b>>>=3;E[7]=b&7;b>>>=3;E[8]=b&7;b=h[f++]&255;E[9]=b&7;b>>>=3;E[10]=b&7;b>>>=3;b|=h[f++]<<2&1023;E[11]=b&7;b>>>=3;E[12]=b&7;b>>>=3;b|=h[f++]<<4&4095;D[1]=b&127;b>>>=7;G[1]=b&3;b>>>=2;w[1]=b&3;b>>>=2;b|=h[f++]<<1&511;I[1]=b&63;b>>>=6;E[13]=b&7;b=h[f++]&255;E[14]=b&7;b>>>=3;E[15]=b&7;b>>>=3;b|=h[f++]<<2&1023;E[16]=b&7;b>>>=3;E[17]=b&7;b>>>=3;E[18]=b&7;b>>>=3;b|=h[f++]<<1&511;E[19]=b&7;b>>>=3;E[20]=b&7;b>>>=3;E[21]=b&7;b=h[f++]&255;E[22]=b&7;b>>>=3;E[23]=b&7;b>>>=3;b|=h[f++]<<2&1023;E[24]=
b&7;b>>>=3;E[25]=b&7;b>>>=3;b|=h[f++]<<4&4095;D[2]=b&127;b>>>=7;G[2]=b&3;b>>>=2;w[2]=b&3;b>>>=2;b|=h[f++]<<1&511;I[2]=b&63;b>>>=6;E[26]=b&7;b=h[f++]&255;E[27]=b&7;b>>>=3;E[28]=b&7;b>>>=3;b|=h[f++]<<2&1023;E[29]=b&7;b>>>=3;E[30]=b&7;b>>>=3;E[31]=b&7;b>>>=3;b|=h[f++]<<1&511;E[32]=b&7;b>>>=3;E[33]=b&7;b>>>=3;E[34]=b&7;b=h[f++]&255;E[35]=b&7;b>>>=3;E[36]=b&7;b>>>=3;b|=h[f++]<<2&1023;E[37]=b&7;b>>>=3;E[38]=b&7;b>>>=3;b|=h[f++]<<4&4095;D[3]=b&127;b>>>=7;G[3]=b&3;b>>>=2;w[3]=b&3;b>>>=2;b|=h[f++]<<1&511;
I[3]=b&63;b>>>=6;E[39]=b&7;b=h[f++]&255;E[40]=b&7;b>>>=3;E[41]=b&7;b>>>=3;b|=h[f++]<<2&1023;E[42]=b&7;b>>>=3;E[43]=b&7;b>>>=3;E[44]=b&7;b>>>=3;b|=h[f++]<<1&511;E[45]=b&7;b>>>=3;E[46]=b&7;b>>>=3;E[47]=b&7;b=h[f++]&255;E[48]=b&7;b>>>=3;E[49]=b&7;b>>>=3;b|=h[f++]<<2&1023;E[50]=b&7;b>>>=3;E[51]=b&7;b>>>=3;K(L,D,w,G,I,E,q,0);b&=15;b|=h[f++]<<4&4095;L[0]=b&63;b>>>=6;L[1]=b&63;b=h[f++]&255;L[2]=b&31;b>>>=5;b|=h[f++]<<3&2047;L[3]=b&31;b>>>=5;L[4]=b&15;b>>>=4;b|=h[f++]<<2&1023;L[5]=b&15;b>>>=4;L[6]=b&7;b>>>=
3;L[7]=b&7;b=h[f++]&255;D[0]=b&127;b>>>=7;b|=h[f++]<<1&511;G[0]=b&3;b>>>=2;w[0]=b&3;b>>>=2;b|=h[f++]<<5&8191;I[0]=b&63;b>>>=6;E[0]=b&7;b>>>=3;E[1]=b&7;b>>>=3;b|=h[f++]<<1&511;E[2]=b&7;b>>>=3;E[3]=b&7;b>>>=3;E[4]=b&7;b=h[f++]&255;E[5]=b&7;b>>>=3;E[6]=b&7;b>>>=3;b|=h[f++]<<2&1023;E[7]=b&7;b>>>=3;E[8]=b&7;b>>>=3;E[9]=b&7;b>>>=3;b|=h[f++]<<1&511;E[10]=b&7;b>>>=3;E[11]=b&7;b>>>=3;E[12]=b&7;b=h[f++]&255;D[1]=b&127;b>>>=7;b|=h[f++]<<1&511;G[1]=b&3;b>>>=2;w[1]=b&3;b>>>=2;b|=h[f++]<<5&8191;I[1]=b&63;b>>>=
6;E[13]=b&7;b>>>=3;E[14]=b&7;b>>>=3;b|=h[f++]<<1&511;E[15]=b&7;b>>>=3;E[16]=b&7;b>>>=3;E[17]=b&7;b=h[f++]&255;E[18]=b&7;b>>>=3;E[19]=b&7;b>>>=3;b|=h[f++]<<2&1023;E[20]=b&7;b>>>=3;E[21]=b&7;b>>>=3;E[22]=b&7;b>>>=3;b|=h[f++]<<1&511;E[23]=b&7;b>>>=3;E[24]=b&7;b>>>=3;E[25]=b&7;b=h[f++]&255;D[2]=b&127;b>>>=7;b|=h[f++]<<1&511;G[2]=b&3;b>>>=2;w[2]=b&3;b>>>=2;b|=h[f++]<<5&8191;I[2]=b&63;b>>>=6;E[26]=b&7;b>>>=3;E[27]=b&7;b>>>=3;b|=h[f++]<<1&511;E[28]=b&7;b>>>=3;E[29]=b&7;b>>>=3;E[30]=b&7;b=h[f++]&255;E[31]=
b&7;b>>>=3;E[32]=b&7;b>>>=3;b|=h[f++]<<2&1023;E[33]=b&7;b>>>=3;E[34]=b&7;b>>>=3;E[35]=b&7;b>>>=3;b|=h[f++]<<1&511;E[36]=b&7;b>>>=3;E[37]=b&7;b>>>=3;E[38]=b&7;b=h[f++]&255;D[3]=b&127;b>>>=7;b|=h[f++]<<1&511;G[3]=b&3;b>>>=2;w[3]=b&3;b>>>=2;b|=h[f++]<<5&8191;I[3]=b&63;b>>>=6;E[39]=b&7;b>>>=3;E[40]=b&7;b>>>=3;b|=h[f++]<<1&511;E[41]=b&7;b>>>=3;E[42]=b&7;b>>>=3;E[43]=b&7;b=h[f++]&255;E[44]=b&7;b>>>=3;E[45]=b&7;b>>>=3;b|=h[f++]<<2&1023;E[46]=b&7;b>>>=3;E[47]=b&7;b>>>=3;E[48]=b&7;b>>>=3;b|=h[f++]<<1&511;
E[49]=b&7;b>>>=3;E[50]=b&7;b>>>=3;E[51]=b&7;K(L,D,w,G,I,E,q,160);b=320*n++;for(v=0;320>v;v++)m[b++]=q[v]/32768}m.length=320*n;return m};var e=new Int32Array(160),p=new Int32Array(40),z=new Int32Array(8)};
